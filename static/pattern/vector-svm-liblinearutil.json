{"path": "/home/asumal/git/cs410/pattern/pattern/vector/svm/liblinearutil.py", "lines": [{"index": "1", "colour": "orange", "code": "#!/usr/bin/env python\n", "error": "none", "author": "tom@organisms.be"}, {"index": "2", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "3", "colour": "orange", "code": "import os, sys\n", "error": "none", "author": "tom@organisms.be"}, {"index": "4", "colour": "orange", "code": "sys.path = [os.path.dirname(os.path.abspath(__file__))] + sys.path \n", "error": "none", "author": "tom@organisms.be"}, {"index": "5", "colour": "green", "code": "from liblinear import *\n", "error": "W", "author": "tom@organisms.be"}, {"index": "6", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "7", "colour": "orange", "code": "def svm_read_problem(data_file_name):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "8", "colour": "green", "code": "\t\"\"\"\n", "error": "W", "author": "tom@organisms.be"}, {"index": "9", "colour": "orange", "code": "\tsvm_read_problem(data_file_name) -> [y, x]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "10", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "11", "colour": "orange", "code": "\tRead LIBSVM-format data from data_file_name and return labels y\n", "error": "none", "author": "tom@organisms.be"}, {"index": "12", "colour": "orange", "code": "\tand data instances x.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "13", "colour": "orange", "code": "\t\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "14", "colour": "green", "code": "\tprob_y = []\n", "error": "W", "author": "tom@organisms.be"}, {"index": "15", "colour": "green", "code": "\tprob_x = []\n", "error": "W", "author": "tom@organisms.be"}, {"index": "16", "colour": "green", "code": "\tfor line in open(data_file_name):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "17", "colour": "green", "code": "\t\tline = line.split(None, 1)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "18", "colour": "orange", "code": "\t\t# In case an instance with all zero features\n", "error": "none", "author": "tom@organisms.be"}, {"index": "19", "colour": "green", "code": "\t\tif len(line) == 1: line += ['']\n", "error": "W", "author": "tom@organisms.be"}, {"index": "20", "colour": "green", "code": "\t\tlabel, features = line\n", "error": "W", "author": "tom@organisms.be"}, {"index": "21", "colour": "green", "code": "\t\txi = {}\n", "error": "W", "author": "tom@organisms.be"}, {"index": "22", "colour": "green", "code": "\t\tfor e in features.split():\n", "error": "W", "author": "tom@organisms.be"}, {"index": "23", "colour": "green", "code": "\t\t\tind, val = e.split(\":\")\n", "error": "W", "author": "tom@organisms.be"}, {"index": "24", "colour": "green", "code": "\t\t\txi[int(ind)] = float(val)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "25", "colour": "green", "code": "\t\tprob_y += [float(label)]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "26", "colour": "green", "code": "\t\tprob_x += [xi]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "27", "colour": "green", "code": "\treturn (prob_y, prob_x)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "28", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "29", "colour": "orange", "code": "def load_model(model_file_name):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "30", "colour": "green", "code": "\t\"\"\"\n", "error": "W", "author": "tom@organisms.be"}, {"index": "31", "colour": "orange", "code": "\tload_model(model_file_name) -> model\n", "error": "none", "author": "tom@organisms.be"}, {"index": "32", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "33", "colour": "orange", "code": "\tLoad a LIBLINEAR model from model_file_name and return.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "34", "colour": "orange", "code": "\t\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "35", "colour": "green", "code": "\tmodel = liblinear.load_model(model_file_name.encode())\n", "error": "W", "author": "tom@organisms.be"}, {"index": "36", "colour": "green", "code": "\tif not model:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "37", "colour": "green", "code": "\t\tprint(\"can't open model file %s\" % model_file_name)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "38", "colour": "green", "code": "\t\treturn None\n", "error": "W", "author": "tom@organisms.be"}, {"index": "39", "colour": "green", "code": "\tmodel = toPyModel(model)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "40", "colour": "green", "code": "\treturn model\n", "error": "W", "author": "tom@organisms.be"}, {"index": "41", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "42", "colour": "green", "code": "def save_model(model_file_name, model):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "43", "colour": "green", "code": "\t\"\"\"\n", "error": "W", "author": "tom@organisms.be"}, {"index": "44", "colour": "orange", "code": "\tsave_model(model_file_name, model) -> None\n", "error": "none", "author": "tom@organisms.be"}, {"index": "45", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "46", "colour": "orange", "code": "\tSave a LIBLINEAR model to the file model_file_name.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "47", "colour": "orange", "code": "\t\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "48", "colour": "green", "code": "\tliblinear.save_model(model_file_name.encode(), model)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "49", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "50", "colour": "orange", "code": "def evaluations(ty, pv):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "51", "colour": "green", "code": "\t\"\"\"\n", "error": "W", "author": "tom@organisms.be"}, {"index": "52", "colour": "orange", "code": "\tevaluations(ty, pv) -> (ACC, MSE, SCC)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "53", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "54", "colour": "orange", "code": "\tCalculate accuracy, mean squared error and squared correlation coefficient\n", "error": "none", "author": "tom@organisms.be"}, {"index": "55", "colour": "orange", "code": "\tusing the true values (ty) and predicted values (pv).\n", "error": "none", "author": "tom@organisms.be"}, {"index": "56", "colour": "orange", "code": "\t\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "57", "colour": "green", "code": "\tif len(ty) != len(pv):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "58", "colour": "green", "code": "\t\traise ValueError(\"len(ty) must equal to len(pv)\")\n", "error": "W", "author": "tom@organisms.be"}, {"index": "59", "colour": "green", "code": "\ttotal_correct = total_error = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "60", "colour": "green", "code": "\tsumv = sumy = sumvv = sumyy = sumvy = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "61", "colour": "green", "code": "\tfor v, y in zip(pv, ty):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "62", "colour": "green", "code": "\t\tif y == v:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "63", "colour": "green", "code": "\t\t\ttotal_correct += 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "64", "colour": "green", "code": "\t\ttotal_error += (v-y)*(v-y)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "65", "colour": "green", "code": "\t\tsumv += v\n", "error": "W", "author": "tom@organisms.be"}, {"index": "66", "colour": "green", "code": "\t\tsumy += y\n", "error": "W", "author": "tom@organisms.be"}, {"index": "67", "colour": "green", "code": "\t\tsumvv += v*v\n", "error": "W", "author": "tom@organisms.be"}, {"index": "68", "colour": "green", "code": "\t\tsumyy += y*y\n", "error": "W", "author": "tom@organisms.be"}, {"index": "69", "colour": "green", "code": "\t\tsumvy += v*y\n", "error": "W", "author": "tom@organisms.be"}, {"index": "70", "colour": "green", "code": "\tl = len(ty)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "71", "colour": "green", "code": "\tACC = 100.0*total_correct/l\n", "error": "W", "author": "tom@organisms.be"}, {"index": "72", "colour": "green", "code": "\tMSE = total_error/l\n", "error": "W", "author": "tom@organisms.be"}, {"index": "73", "colour": "green", "code": "\ttry:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "74", "colour": "green", "code": "\t\tSCC = ((l*sumvy-sumv*sumy)*(l*sumvy-sumv*sumy))/((l*sumvv-sumv*sumv)*(l*sumyy-sumy*sumy))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "75", "colour": "green", "code": "\texcept:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "76", "colour": "green", "code": "\t\tSCC = float('nan')\n", "error": "W", "author": "tom@organisms.be"}, {"index": "77", "colour": "green", "code": "\treturn (ACC, MSE, SCC)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "78", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "79", "colour": "blue", "code": "def train(arg1, arg2=None, arg3=None):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "80", "colour": "green", "code": "\t\"\"\"\n", "error": "W", "author": "tom@organisms.be"}, {"index": "81", "colour": "orange", "code": "\ttrain(y, x [, options]) -> model | ACC\n", "error": "none", "author": "tom@organisms.be"}, {"index": "82", "colour": "orange", "code": "\ttrain(prob [, options]) -> model | ACC\n", "error": "none", "author": "tom@organisms.be"}, {"index": "83", "colour": "orange", "code": "\ttrain(prob, param) -> model | ACC\n", "error": "none", "author": "tom@organisms.be"}, {"index": "84", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "85", "colour": "orange", "code": "\tTrain a model from data (y, x) or a problem prob using\n", "error": "none", "author": "tom@organisms.be"}, {"index": "86", "colour": "orange", "code": "\t'options' or a parameter param.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "87", "colour": "orange", "code": "\tIf '-v' is specified in 'options' (i.e., cross validation)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "88", "colour": "orange", "code": "\teither accuracy (ACC) or mean-squared error (MSE) is returned.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "89", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "90", "colour": "orange", "code": "\toptions:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "91", "colour": "orange", "code": "\t\t-s type : set type of solver (default 1)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "92", "colour": "orange", "code": "\t\t  for multi-class classification\n", "error": "none", "author": "tom@organisms.be"}, {"index": "93", "colour": "orange", "code": "\t\t\t 0 -- L2-regularized logistic regression (primal)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "94", "colour": "orange", "code": "\t\t\t 1 -- L2-regularized L2-loss support vector classification (dual)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "95", "colour": "orange", "code": "\t\t\t 2 -- L2-regularized L2-loss support vector classification (primal)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "96", "colour": "orange", "code": "\t\t\t 3 -- L2-regularized L1-loss support vector classification (dual)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "97", "colour": "orange", "code": "\t\t\t 4 -- support vector classification by Crammer and Singer\n", "error": "none", "author": "tom@organisms.be"}, {"index": "98", "colour": "orange", "code": "\t\t\t 5 -- L1-regularized L2-loss support vector classification\n", "error": "none", "author": "tom@organisms.be"}, {"index": "99", "colour": "orange", "code": "\t\t\t 6 -- L1-regularized logistic regression\n", "error": "none", "author": "tom@organisms.be"}, {"index": "100", "colour": "orange", "code": "\t\t\t 7 -- L2-regularized logistic regression (dual)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "101", "colour": "orange", "code": "\t\t  for regression\n", "error": "none", "author": "tom@organisms.be"}, {"index": "102", "colour": "orange", "code": "\t\t\t11 -- L2-regularized L2-loss support vector regression (primal)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "103", "colour": "orange", "code": "\t\t\t12 -- L2-regularized L2-loss support vector regression (dual)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "104", "colour": "orange", "code": "\t\t\t13 -- L2-regularized L1-loss support vector regression (dual)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "105", "colour": "orange", "code": "\t\t-c cost : set the parameter C (default 1)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "106", "colour": "orange", "code": "\t\t-p epsilon : set the epsilon in loss function of SVR (default 0.1)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "107", "colour": "orange", "code": "\t\t-e epsilon : set tolerance of termination criterion\n", "error": "none", "author": "tom@organisms.be"}, {"index": "108", "colour": "orange", "code": "\t\t\t-s 0 and 2\n", "error": "none", "author": "tom@organisms.be"}, {"index": "109", "colour": "orange", "code": "\t\t\t\t|f'(w)|_2 <= eps*min(pos,neg)/l*|f'(w0)|_2,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "110", "colour": "orange", "code": "\t\t\t\twhere f is the primal function, (default 0.01)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "111", "colour": "orange", "code": "\t\t\t-s 11\n", "error": "none", "author": "tom@organisms.be"}, {"index": "112", "colour": "orange", "code": "\t\t\t\t|f'(w)|_2 <= eps*|f'(w0)|_2 (default 0.001)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "113", "colour": "orange", "code": "\t\t\t-s 1, 3, 4, and 7\n", "error": "none", "author": "tom@organisms.be"}, {"index": "114", "colour": "orange", "code": "\t\t\t\tDual maximal violation <= eps; similar to liblinear (default 0.)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "115", "colour": "orange", "code": "\t\t\t-s 5 and 6\n", "error": "none", "author": "tom@organisms.be"}, {"index": "116", "colour": "orange", "code": "\t\t\t\t|f'(w)|_inf <= eps*min(pos,neg)/l*|f'(w0)|_inf,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "117", "colour": "orange", "code": "\t\t\t\twhere f is the primal function (default 0.01)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "118", "colour": "orange", "code": "\t\t\t-s 12 and 13\n", "error": "none", "author": "tom@organisms.be"}, {"index": "119", "colour": "orange", "code": "\t\t\t\t|f'(alpha)|_1 <= eps |f'(alpha0)|,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "120", "colour": "orange", "code": "\t\t\t\twhere f is the dual function (default 0.1)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "121", "colour": "orange", "code": "\t\t-B bias : if bias >= 0, instance x becomes [x; bias]; if < 0, no bias term added (default -1)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "122", "colour": "orange", "code": "\t\t-wi weight: weights adjust the parameter C of different classes (see README for details)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "123", "colour": "orange", "code": "\t\t-v n: n-fold cross validation mode\n", "error": "none", "author": "tom@organisms.be"}, {"index": "124", "colour": "orange", "code": "\t    -q : quiet mode (no outputs)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "125", "colour": "orange", "code": "\t\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "126", "colour": "green", "code": "\tprob, param = None, None\n", "error": "W", "author": "tom@organisms.be"}, {"index": "127", "colour": "green", "code": "\tif isinstance(arg1, (list, tuple)):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "128", "colour": "green", "code": "\t\tassert isinstance(arg2, (list, tuple))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "129", "colour": "green", "code": "\t\ty, x, options = arg1, arg2, arg3\n", "error": "W", "author": "tom@organisms.be"}, {"index": "130", "colour": "green", "code": "\t\tprob = problem(y, x)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "131", "colour": "green", "code": "\t\tparam = parameter(options)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "132", "colour": "green", "code": "\telif isinstance(arg1, problem):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "133", "colour": "green", "code": "\t\tprob = arg1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "134", "colour": "green", "code": "\t\tif isinstance(arg2, parameter):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "135", "colour": "green", "code": "\t\t\tparam = arg2\n", "error": "W", "author": "tom@organisms.be"}, {"index": "136", "colour": "green", "code": "\t\telse :\n", "error": "W", "author": "tom@organisms.be"}, {"index": "137", "colour": "green", "code": "\t\t\tparam = parameter(arg2)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "138", "colour": "green", "code": "\tif prob == None or param == None :\n", "error": "W", "author": "tom@organisms.be"}, {"index": "139", "colour": "green", "code": "\t\traise TypeError(\"Wrong types for the arguments\")\n", "error": "W", "author": "tom@organisms.be"}, {"index": "140", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "141", "colour": "green", "code": "\tprob.set_bias(param.bias)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "142", "colour": "green", "code": "\tliblinear.set_print_string_function(param.print_func)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "143", "colour": "green", "code": "\terr_msg = liblinear.check_parameter(prob, param)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "144", "colour": "green", "code": "\tif err_msg :\n", "error": "W", "author": "tom@organisms.be"}, {"index": "145", "colour": "green", "code": "\t\traise ValueError('Error: %s' % err_msg)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "146", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "147", "colour": "green", "code": "\tif param.cross_validation:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "148", "colour": "green", "code": "\t\tl, nr_fold = prob.l, param.nr_fold\n", "error": "W", "author": "tom@organisms.be"}, {"index": "149", "colour": "green", "code": "\t\ttarget = (c_double * l)()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "150", "colour": "green", "code": "\t\tliblinear.cross_validation(prob, param, nr_fold, target)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "151", "colour": "green", "code": "\t\tACC, MSE, SCC = evaluations(prob.y[:l], target[:l])\n", "error": "W", "author": "tom@organisms.be"}, {"index": "152", "colour": "red", "code": "\t\tif param.solver_type in [L2R_L2LOSS_SVR, L2R_L2LOSS_SVR_DUAL, L2R_L1LOSS_SVR_DUAL]:\n", "error": "E", "author": "tom@organisms.be"}, {"index": "153", "colour": "green", "code": "\t\t\tprint(\"Cross Validation Mean squared error = %g\" % MSE)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "154", "colour": "green", "code": "\t\t\tprint(\"Cross Validation Squared correlation coefficient = %g\" % SCC)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "155", "colour": "green", "code": "\t\t\treturn MSE\n", "error": "W", "author": "tom@organisms.be"}, {"index": "156", "colour": "green", "code": "\t\telse:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "157", "colour": "green", "code": "\t\t\tprint(\"Cross Validation Accuracy = %g%%\" % ACC)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "158", "colour": "green", "code": "\t\t\treturn ACC\n", "error": "W", "author": "tom@organisms.be"}, {"index": "159", "colour": "green", "code": "\telse :\n", "error": "W", "author": "tom@organisms.be"}, {"index": "160", "colour": "green", "code": "\t\tm = liblinear.train(prob, param)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "161", "colour": "green", "code": "\t\tm = toPyModel(m)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "162", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "163", "colour": "green", "code": "\t\treturn m\n", "error": "W", "author": "tom@organisms.be"}, {"index": "164", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "165", "colour": "blue", "code": "def predict(y, x, m, options=\"\"):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "166", "colour": "green", "code": "\t\"\"\"\n", "error": "W", "author": "tom@organisms.be"}, {"index": "167", "colour": "orange", "code": "\tpredict(y, x, m [, options]) -> (p_labels, p_acc, p_vals)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "168", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "169", "colour": "orange", "code": "\tPredict data (y, x) with the SVM model m.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "170", "colour": "orange", "code": "\toptions:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "171", "colour": "orange", "code": "\t    -b probability_estimates: whether to output probability estimates, 0 or 1 (default 0); currently for logistic regression only\n", "error": "none", "author": "tom@organisms.be"}, {"index": "172", "colour": "orange", "code": "\t    -q quiet mode (no outputs)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "173", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "174", "colour": "orange", "code": "\tThe return tuple contains\n", "error": "none", "author": "tom@organisms.be"}, {"index": "175", "colour": "orange", "code": "\tp_labels: a list of predicted labels\n", "error": "none", "author": "tom@organisms.be"}, {"index": "176", "colour": "orange", "code": "\tp_acc: a tuple including  accuracy (for classification), mean-squared\n", "error": "none", "author": "tom@organisms.be"}, {"index": "177", "colour": "orange", "code": "\t       error, and squared correlation coefficient (for regression).\n", "error": "none", "author": "tom@organisms.be"}, {"index": "178", "colour": "orange", "code": "\tp_vals: a list of decision values or probability estimates (if '-b 1'\n", "error": "none", "author": "tom@organisms.be"}, {"index": "179", "colour": "orange", "code": "\t        is specified). If k is the number of classes, for decision values,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "180", "colour": "orange", "code": "\t        each element includes results of predicting k binary-class\n", "error": "none", "author": "tom@organisms.be"}, {"index": "181", "colour": "orange", "code": "\t        SVMs. if k = 2 and solver is not MCSVM_CS, only one decision value\n", "error": "none", "author": "tom@organisms.be"}, {"index": "182", "colour": "orange", "code": "\t        is returned. For probabilities, each element contains k values\n", "error": "none", "author": "tom@organisms.be"}, {"index": "183", "colour": "orange", "code": "\t        indicating the probability that the testing instance is in each class.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "184", "colour": "orange", "code": "\t        Note that the order of classes here is the same as 'model.label'\n", "error": "none", "author": "tom@organisms.be"}, {"index": "185", "colour": "orange", "code": "\t        field in the model structure.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "186", "colour": "orange", "code": "\t\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "187", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "188", "colour": "green", "code": "\tdef info(s):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "189", "colour": "green", "code": "\t\tprint(s)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "190", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "191", "colour": "green", "code": "\tpredict_probability = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "192", "colour": "green", "code": "\targv = options.split()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "193", "colour": "green", "code": "\ti = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "194", "colour": "green", "code": "\twhile i < len(argv):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "195", "colour": "green", "code": "\t\tif argv[i] == '-b':\n", "error": "W", "author": "tom@organisms.be"}, {"index": "196", "colour": "green", "code": "\t\t\ti += 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "197", "colour": "green", "code": "\t\t\tpredict_probability = int(argv[i])\n", "error": "W", "author": "tom@organisms.be"}, {"index": "198", "colour": "green", "code": "\t\telif argv[i] == '-q':\n", "error": "W", "author": "tom@organisms.be"}, {"index": "199", "colour": "green", "code": "\t\t\tinfo = print_null\n", "error": "W", "author": "tom@organisms.be"}, {"index": "200", "colour": "green", "code": "\t\telse:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "201", "colour": "green", "code": "\t\t\traise ValueError(\"Wrong options\")\n", "error": "W", "author": "tom@organisms.be"}, {"index": "202", "colour": "green", "code": "\t\ti+=1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "203", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "204", "colour": "green", "code": "\tsolver_type = m.param.solver_type\n", "error": "W", "author": "tom@organisms.be"}, {"index": "205", "colour": "green", "code": "\tnr_class = m.get_nr_class()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "206", "colour": "green", "code": "\tnr_feature = m.get_nr_feature()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "207", "colour": "green", "code": "\tis_prob_model = m.is_probability_model()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "208", "colour": "green", "code": "\tbias = m.bias\n", "error": "W", "author": "tom@organisms.be"}, {"index": "209", "colour": "green", "code": "\tif bias >= 0:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "210", "colour": "green", "code": "\t\tbiasterm = feature_node(nr_feature+1, bias)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "211", "colour": "green", "code": "\telse:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "212", "colour": "green", "code": "\t\tbiasterm = feature_node(-1, bias)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "213", "colour": "green", "code": "\tpred_labels = []\n", "error": "W", "author": "tom@organisms.be"}, {"index": "214", "colour": "green", "code": "\tpred_values = []\n", "error": "W", "author": "tom@organisms.be"}, {"index": "215", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "216", "colour": "green", "code": "\tif predict_probability:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "217", "colour": "green", "code": "\t\tif not is_prob_model:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "218", "colour": "green", "code": "\t\t\traise TypeError('probability output is only supported for logistic regression')\n", "error": "W", "author": "tom@organisms.be"}, {"index": "219", "colour": "green", "code": "\t\tprob_estimates = (c_double * nr_class)()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "220", "colour": "green", "code": "\t\tfor xi in x:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "221", "colour": "green", "code": "\t\t\txi, idx = gen_feature_nodearray(xi, feature_max=nr_feature)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "222", "colour": "green", "code": "\t\t\txi[-2] = biasterm\n", "error": "W", "author": "tom@organisms.be"}, {"index": "223", "colour": "green", "code": "\t\t\tlabel = liblinear.predict_probability(m, xi, prob_estimates)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "224", "colour": "green", "code": "\t\t\tvalues = prob_estimates[:nr_class]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "225", "colour": "green", "code": "\t\t\tpred_labels += [label]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "226", "colour": "green", "code": "\t\t\tpred_values += [values]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "227", "colour": "green", "code": "\telse:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "228", "colour": "green", "code": "\t\tif nr_class <= 2:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "229", "colour": "green", "code": "\t\t\tnr_classifier = 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "230", "colour": "green", "code": "\t\telse:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "231", "colour": "green", "code": "\t\t\tnr_classifier = nr_class\n", "error": "W", "author": "tom@organisms.be"}, {"index": "232", "colour": "green", "code": "\t\tdec_values = (c_double * nr_classifier)()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "233", "colour": "green", "code": "\t\tfor xi in x:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "234", "colour": "green", "code": "\t\t\txi, idx = gen_feature_nodearray(xi, feature_max=nr_feature)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "235", "colour": "green", "code": "\t\t\txi[-2] = biasterm\n", "error": "W", "author": "tom@organisms.be"}, {"index": "236", "colour": "green", "code": "\t\t\tlabel = liblinear.predict_values(m, xi, dec_values)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "237", "colour": "green", "code": "\t\t\tvalues = dec_values[:nr_classifier]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "238", "colour": "green", "code": "\t\t\tpred_labels += [label]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "239", "colour": "green", "code": "\t\t\tpred_values += [values]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "240", "colour": "green", "code": "\tif len(y) == 0:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "241", "colour": "green", "code": "\t\ty = [0] * len(x)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "242", "colour": "green", "code": "\tACC, MSE, SCC = evaluations(y, pred_labels)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "243", "colour": "green", "code": "\tl = len(y)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "244", "colour": "red", "code": "\tif solver_type in [L2R_L2LOSS_SVR, L2R_L2LOSS_SVR_DUAL, L2R_L1LOSS_SVR_DUAL]:\n", "error": "E", "author": "tom@organisms.be"}, {"index": "245", "colour": "green", "code": "\t\tinfo(\"Mean squared error = %g (regression)\" % MSE)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "246", "colour": "green", "code": "\t\tinfo(\"Squared correlation coefficient = %g (regression)\" % SCC)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "247", "colour": "green", "code": "\telse:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "248", "colour": "green", "code": "\t\tinfo(\"Accuracy = %g%% (%d/%d) (classification)\" % (ACC, int(l*ACC/100), l))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "249", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "250", "colour": "green", "code": "\treturn pred_labels, (ACC, MSE, SCC), pred_values\n", "error": "W", "author": "tom@organisms.be"}]}