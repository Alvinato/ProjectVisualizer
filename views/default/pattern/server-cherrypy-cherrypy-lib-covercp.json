{"path": "/home/asumal/git/cs410/pattern/pattern/server/cherrypy/cherrypy/lib/covercp.py", "lines": [{"index": "1", "colour": "orange", "code": "\"\"\"Code-coverage tools for CherryPy.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "2", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "3", "colour": "orange", "code": "To use this module, or the coverage tools in the test suite,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "4", "colour": "orange", "code": "you need to download 'coverage.py', either Gareth Rees' `original\n", "error": "none", "author": "tom@organisms.be"}, {"index": "5", "colour": "orange", "code": "implementation <http://www.garethrees.org/2001/12/04/python-coverage/>`_\n", "error": "none", "author": "tom@organisms.be"}, {"index": "6", "colour": "orange", "code": "or Ned Batchelder's `enhanced version:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "7", "colour": "orange", "code": "<http://www.nedbatchelder.com/code/modules/coverage.html>`_\n", "error": "none", "author": "tom@organisms.be"}, {"index": "8", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "9", "colour": "orange", "code": "To turn on coverage tracing, use the following code::\n", "error": "none", "author": "tom@organisms.be"}, {"index": "10", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "11", "colour": "orange", "code": "    cherrypy.engine.subscribe('start', covercp.start)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "12", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "13", "colour": "orange", "code": "DO NOT subscribe anything on the 'start_thread' channel, as previously\n", "error": "none", "author": "tom@organisms.be"}, {"index": "14", "colour": "orange", "code": "recommended. Calling start once in the main thread should be sufficient\n", "error": "none", "author": "tom@organisms.be"}, {"index": "15", "colour": "orange", "code": "to start coverage on all threads. Calling start again in each thread\n", "error": "none", "author": "tom@organisms.be"}, {"index": "16", "colour": "orange", "code": "effectively clears any coverage data gathered up to that point.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "17", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "18", "colour": "orange", "code": "Run your code, then use the ``covercp.serve()`` function to browse the\n", "error": "none", "author": "tom@organisms.be"}, {"index": "19", "colour": "orange", "code": "results in a web browser. If you run this module from the command line,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "20", "colour": "orange", "code": "it will call ``serve()`` for you.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "21", "colour": "orange", "code": "\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "22", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "23", "colour": "orange", "code": "import re\n", "error": "none", "author": "tom@organisms.be"}, {"index": "24", "colour": "orange", "code": "import sys\n", "error": "none", "author": "tom@organisms.be"}, {"index": "25", "colour": "orange", "code": "import cgi\n", "error": "none", "author": "tom@organisms.be"}, {"index": "26", "colour": "orange", "code": "from cherrypy._cpcompat import quote_plus\n", "error": "none", "author": "tom@organisms.be"}, {"index": "27", "colour": "orange", "code": "import os, os.path\n", "error": "none", "author": "tom@organisms.be"}, {"index": "28", "colour": "orange", "code": "localFile = os.path.join(os.path.dirname(__file__), \"coverage.cache\")\n", "error": "none", "author": "tom@organisms.be"}, {"index": "29", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "30", "colour": "orange", "code": "the_coverage = None\n", "error": "none", "author": "tom@organisms.be"}, {"index": "31", "colour": "orange", "code": "try:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "32", "colour": "orange", "code": "    from coverage import coverage\n", "error": "none", "author": "tom@organisms.be"}, {"index": "33", "colour": "orange", "code": "    the_coverage = coverage(data_file=localFile)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "34", "colour": "orange", "code": "    def start():\n", "error": "none", "author": "tom@organisms.be"}, {"index": "35", "colour": "orange", "code": "        the_coverage.start()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "36", "colour": "orange", "code": "except ImportError:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "37", "colour": "orange", "code": "    # Setting the_coverage to None will raise errors\n", "error": "none", "author": "tom@organisms.be"}, {"index": "38", "colour": "orange", "code": "    # that need to be trapped downstream.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "39", "colour": "orange", "code": "    the_coverage = None\n", "error": "none", "author": "tom@organisms.be"}, {"index": "40", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "41", "colour": "orange", "code": "    import warnings\n", "error": "none", "author": "tom@organisms.be"}, {"index": "42", "colour": "orange", "code": "    warnings.warn(\"No code coverage will be performed; coverage.py could not be imported.\")\n", "error": "none", "author": "tom@organisms.be"}, {"index": "43", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "44", "colour": "orange", "code": "    def start():\n", "error": "none", "author": "tom@organisms.be"}, {"index": "45", "colour": "orange", "code": "        pass\n", "error": "none", "author": "tom@organisms.be"}, {"index": "46", "colour": "orange", "code": "start.priority = 20\n", "error": "none", "author": "tom@organisms.be"}, {"index": "47", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "48", "colour": "orange", "code": "TEMPLATE_MENU = \"\"\"<html>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "49", "colour": "orange", "code": "<head>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "50", "colour": "orange", "code": "    <title>CherryPy Coverage Menu</title>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "51", "colour": "orange", "code": "    <style>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "52", "colour": "orange", "code": "        body {font: 9pt Arial, serif;}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "53", "colour": "orange", "code": "        #tree {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "54", "colour": "orange", "code": "            font-size: 8pt;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "55", "colour": "orange", "code": "            font-family: Andale Mono, monospace;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "56", "colour": "orange", "code": "            white-space: pre;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "57", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "58", "colour": "orange", "code": "        #tree a:active, a:focus {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "59", "colour": "orange", "code": "            background-color: black;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "60", "colour": "orange", "code": "            padding: 1px;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "61", "colour": "orange", "code": "            color: white;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "62", "colour": "orange", "code": "            border: 0px solid #9999FF;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "63", "colour": "orange", "code": "            -moz-outline-style: none;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "64", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "65", "colour": "orange", "code": "        .fail { color: red;}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "66", "colour": "orange", "code": "        .pass { color: #888;}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "67", "colour": "orange", "code": "        #pct { text-align: right;}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "68", "colour": "orange", "code": "        h3 {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "69", "colour": "orange", "code": "            font-size: small;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "70", "colour": "orange", "code": "            font-weight: bold;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "71", "colour": "orange", "code": "            font-style: italic;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "72", "colour": "orange", "code": "            margin-top: 5px;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "73", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "74", "colour": "orange", "code": "        input { border: 1px solid #ccc; padding: 2px; }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "75", "colour": "orange", "code": "        .directory {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "76", "colour": "orange", "code": "            color: #933;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "77", "colour": "orange", "code": "            font-style: italic;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "78", "colour": "orange", "code": "            font-weight: bold;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "79", "colour": "orange", "code": "            font-size: 10pt;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "80", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "81", "colour": "orange", "code": "        .file {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "82", "colour": "orange", "code": "            color: #400;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "83", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "84", "colour": "orange", "code": "        a { text-decoration: none; }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "85", "colour": "orange", "code": "        #crumbs {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "86", "colour": "orange", "code": "            color: white;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "87", "colour": "orange", "code": "            font-size: 8pt;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "88", "colour": "orange", "code": "            font-family: Andale Mono, monospace;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "89", "colour": "orange", "code": "            width: 100%;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "90", "colour": "orange", "code": "            background-color: black;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "91", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "92", "colour": "orange", "code": "        #crumbs a {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "93", "colour": "orange", "code": "            color: #f88;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "94", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "95", "colour": "orange", "code": "        #options {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "96", "colour": "orange", "code": "            line-height: 2.3em;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "97", "colour": "orange", "code": "            border: 1px solid black;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "98", "colour": "orange", "code": "            background-color: #eee;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "99", "colour": "orange", "code": "            padding: 4px;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "100", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "101", "colour": "orange", "code": "        #exclude {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "102", "colour": "orange", "code": "            width: 100%;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "103", "colour": "orange", "code": "            margin-bottom: 3px;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "104", "colour": "orange", "code": "            border: 1px solid #999;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "105", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "106", "colour": "orange", "code": "        #submit {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "107", "colour": "orange", "code": "            background-color: black;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "108", "colour": "orange", "code": "            color: white;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "109", "colour": "orange", "code": "            border: 0;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "110", "colour": "orange", "code": "            margin-bottom: -9px;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "111", "colour": "orange", "code": "            }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "112", "colour": "orange", "code": "    </style>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "113", "colour": "orange", "code": "</head>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "114", "colour": "orange", "code": "<body>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "115", "colour": "orange", "code": "<h2>CherryPy Coverage</h2>\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "116", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "117", "colour": "orange", "code": "TEMPLATE_FORM = \"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "118", "colour": "orange", "code": "<div id=\"options\">\n", "error": "none", "author": "tom@organisms.be"}, {"index": "119", "colour": "orange", "code": "<form action='menu' method=GET>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "120", "colour": "orange", "code": "    <input type='hidden' name='base' value='%(base)s' />\n", "error": "none", "author": "tom@organisms.be"}, {"index": "121", "colour": "orange", "code": "    Show percentages <input type='checkbox' %(showpct)s name='showpct' value='checked' /><br />\n", "error": "none", "author": "tom@organisms.be"}, {"index": "122", "colour": "orange", "code": "    Hide files over <input type='text' id='pct' name='pct' value='%(pct)s' size='3' />%%<br />\n", "error": "none", "author": "tom@organisms.be"}, {"index": "123", "colour": "orange", "code": "    Exclude files matching<br />\n", "error": "none", "author": "tom@organisms.be"}, {"index": "124", "colour": "orange", "code": "    <input type='text' id='exclude' name='exclude' value='%(exclude)s' size='20' />\n", "error": "none", "author": "tom@organisms.be"}, {"index": "125", "colour": "orange", "code": "    <br />\n", "error": "none", "author": "tom@organisms.be"}, {"index": "126", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "127", "colour": "orange", "code": "    <input type='submit' value='Change view' id=\"submit\"/>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "128", "colour": "orange", "code": "</form>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "129", "colour": "orange", "code": "</div>\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "130", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "131", "colour": "orange", "code": "TEMPLATE_FRAMESET = \"\"\"<html>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "132", "colour": "orange", "code": "<head><title>CherryPy coverage data</title></head>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "133", "colour": "orange", "code": "<frameset cols='250, 1*'>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "134", "colour": "orange", "code": "    <frame src='menu?base=%s' />\n", "error": "none", "author": "tom@organisms.be"}, {"index": "135", "colour": "orange", "code": "    <frame name='main' src='' />\n", "error": "none", "author": "tom@organisms.be"}, {"index": "136", "colour": "orange", "code": "</frameset>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "137", "colour": "orange", "code": "</html>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "138", "colour": "orange", "code": "\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "139", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "140", "colour": "orange", "code": "TEMPLATE_COVERAGE = \"\"\"<html>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "141", "colour": "orange", "code": "<head>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "142", "colour": "orange", "code": "    <title>Coverage for %(name)s</title>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "143", "colour": "orange", "code": "    <style>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "144", "colour": "orange", "code": "        h2 { margin-bottom: .25em; }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "145", "colour": "orange", "code": "        p { margin: .25em; }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "146", "colour": "orange", "code": "        .covered { color: #000; background-color: #fff; }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "147", "colour": "orange", "code": "        .notcovered { color: #fee; background-color: #500; }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "148", "colour": "orange", "code": "        .excluded { color: #00f; background-color: #fff; }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "149", "colour": "orange", "code": "         table .covered, table .notcovered, table .excluded\n", "error": "none", "author": "tom@organisms.be"}, {"index": "150", "colour": "orange", "code": "             { font-family: Andale Mono, monospace;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "151", "colour": "orange", "code": "               font-size: 10pt; white-space: pre; }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "152", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "153", "colour": "orange", "code": "         .lineno { background-color: #eee;}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "154", "colour": "orange", "code": "         .notcovered .lineno { background-color: #000;}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "155", "colour": "orange", "code": "         table { border-collapse: collapse;\n", "error": "none", "author": "tom@organisms.be"}, {"index": "156", "colour": "orange", "code": "    </style>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "157", "colour": "orange", "code": "</head>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "158", "colour": "orange", "code": "<body>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "159", "colour": "orange", "code": "<h2>%(name)s</h2>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "160", "colour": "orange", "code": "<p>%(fullpath)s</p>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "161", "colour": "orange", "code": "<p>Coverage: %(pc)s%%</p>\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "162", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "163", "colour": "orange", "code": "TEMPLATE_LOC_COVERED = \"\"\"<tr class=\"covered\">\n", "error": "none", "author": "tom@organisms.be"}, {"index": "164", "colour": "orange", "code": "    <td class=\"lineno\">%s&nbsp;</td>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "165", "colour": "orange", "code": "    <td>%s</td>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "166", "colour": "orange", "code": "</tr>\\n\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "167", "colour": "orange", "code": "TEMPLATE_LOC_NOT_COVERED = \"\"\"<tr class=\"notcovered\">\n", "error": "none", "author": "tom@organisms.be"}, {"index": "168", "colour": "orange", "code": "    <td class=\"lineno\">%s&nbsp;</td>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "169", "colour": "orange", "code": "    <td>%s</td>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "170", "colour": "orange", "code": "</tr>\\n\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "171", "colour": "orange", "code": "TEMPLATE_LOC_EXCLUDED = \"\"\"<tr class=\"excluded\">\n", "error": "none", "author": "tom@organisms.be"}, {"index": "172", "colour": "orange", "code": "    <td class=\"lineno\">%s&nbsp;</td>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "173", "colour": "orange", "code": "    <td>%s</td>\n", "error": "none", "author": "tom@organisms.be"}, {"index": "174", "colour": "orange", "code": "</tr>\\n\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "175", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "176", "colour": "orange", "code": "TEMPLATE_ITEM = \"%s%s<a class='file' href='report?name=%s' target='main'>%s</a>\\n\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "177", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "178", "colour": "orange", "code": "def _percent(statements, missing):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "179", "colour": "orange", "code": "    s = len(statements)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "180", "colour": "orange", "code": "    e = s - len(missing)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "181", "colour": "orange", "code": "    if s > 0:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "182", "colour": "orange", "code": "        return int(round(100.0 * e / s))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "183", "colour": "orange", "code": "    return 0\n", "error": "none", "author": "tom@organisms.be"}, {"index": "184", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "185", "colour": "blue", "code": "def _show_branch(root, base, path, pct=0, showpct=False, exclude=\"\",\n", "error": "R", "author": "tom@organisms.be"}, {"index": "186", "colour": "green", "code": "                 coverage=the_coverage):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "187", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "188", "colour": "orange", "code": "    # Show the directory name and any of our children\n", "error": "none", "author": "tom@organisms.be"}, {"index": "189", "colour": "orange", "code": "    dirs = [k for k, v in root.items() if v]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "190", "colour": "orange", "code": "    dirs.sort()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "191", "colour": "orange", "code": "    for name in dirs:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "192", "colour": "orange", "code": "        newpath = os.path.join(path, name)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "193", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "194", "colour": "orange", "code": "        if newpath.lower().startswith(base):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "195", "colour": "orange", "code": "            relpath = newpath[len(base):]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "196", "colour": "orange", "code": "            yield \"| \" * relpath.count(os.sep)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "197", "colour": "orange", "code": "            yield \"<a class='directory' href='menu?base=%s&exclude=%s'>%s</a>\\n\" % \\\n", "error": "none", "author": "tom@organisms.be"}, {"index": "198", "colour": "orange", "code": "                   (newpath, quote_plus(exclude), name)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "199", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "200", "colour": "orange", "code": "        for chunk in _show_branch(root[name], base, newpath, pct, showpct, exclude, coverage=coverage):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "201", "colour": "orange", "code": "            yield chunk\n", "error": "none", "author": "tom@organisms.be"}, {"index": "202", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "203", "colour": "orange", "code": "    # Now list the files\n", "error": "none", "author": "tom@organisms.be"}, {"index": "204", "colour": "orange", "code": "    if path.lower().startswith(base):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "205", "colour": "orange", "code": "        relpath = path[len(base):]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "206", "colour": "orange", "code": "        files = [k for k, v in root.items() if not v]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "207", "colour": "orange", "code": "        files.sort()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "208", "colour": "orange", "code": "        for name in files:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "209", "colour": "orange", "code": "            newpath = os.path.join(path, name)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "210", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "211", "colour": "orange", "code": "            pc_str = \"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "212", "colour": "orange", "code": "            if showpct:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "213", "colour": "orange", "code": "                try:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "214", "colour": "orange", "code": "                    _, statements, _, missing, _ = coverage.analysis2(newpath)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "215", "colour": "green", "code": "                except:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "216", "colour": "orange", "code": "                    # Yes, we really want to pass on all errors.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "217", "colour": "orange", "code": "                    pass\n", "error": "none", "author": "tom@organisms.be"}, {"index": "218", "colour": "orange", "code": "                else:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "219", "colour": "orange", "code": "                    pc = _percent(statements, missing)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "220", "colour": "orange", "code": "                    pc_str = (\"%3d%% \" % pc).replace(' ','&nbsp;')\n", "error": "none", "author": "tom@organisms.be"}, {"index": "221", "colour": "orange", "code": "                    if pc < float(pct) or pc == -1:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "222", "colour": "orange", "code": "                        pc_str = \"<span class='fail'>%s</span>\" % pc_str\n", "error": "none", "author": "tom@organisms.be"}, {"index": "223", "colour": "orange", "code": "                    else:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "224", "colour": "orange", "code": "                        pc_str = \"<span class='pass'>%s</span>\" % pc_str\n", "error": "none", "author": "tom@organisms.be"}, {"index": "225", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "226", "colour": "orange", "code": "            yield TEMPLATE_ITEM % (\"| \" * (relpath.count(os.sep) + 1),\n", "error": "none", "author": "tom@organisms.be"}, {"index": "227", "colour": "orange", "code": "                                   pc_str, newpath, name)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "228", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "229", "colour": "orange", "code": "def _skip_file(path, exclude):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "230", "colour": "orange", "code": "    if exclude:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "231", "colour": "orange", "code": "        return bool(re.search(exclude, path))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "232", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "233", "colour": "orange", "code": "def _graft(path, tree):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "234", "colour": "orange", "code": "    d = tree\n", "error": "none", "author": "tom@organisms.be"}, {"index": "235", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "236", "colour": "orange", "code": "    p = path\n", "error": "none", "author": "tom@organisms.be"}, {"index": "237", "colour": "orange", "code": "    atoms = []\n", "error": "none", "author": "tom@organisms.be"}, {"index": "238", "colour": "orange", "code": "    while True:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "239", "colour": "orange", "code": "        p, tail = os.path.split(p)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "240", "colour": "orange", "code": "        if not tail:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "241", "colour": "orange", "code": "            break\n", "error": "none", "author": "tom@organisms.be"}, {"index": "242", "colour": "orange", "code": "        atoms.append(tail)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "243", "colour": "orange", "code": "    atoms.append(p)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "244", "colour": "orange", "code": "    if p != \"/\":\n", "error": "none", "author": "tom@organisms.be"}, {"index": "245", "colour": "orange", "code": "        atoms.append(\"/\")\n", "error": "none", "author": "tom@organisms.be"}, {"index": "246", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "247", "colour": "orange", "code": "    atoms.reverse()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "248", "colour": "orange", "code": "    for node in atoms:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "249", "colour": "orange", "code": "        if node:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "250", "colour": "orange", "code": "            d = d.setdefault(node, {})\n", "error": "none", "author": "tom@organisms.be"}, {"index": "251", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "252", "colour": "green", "code": "def get_tree(base, exclude, coverage=the_coverage):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "253", "colour": "orange", "code": "    \"\"\"Return covered module names as a nested dict.\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "254", "colour": "orange", "code": "    tree = {}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "255", "colour": "orange", "code": "    runs = coverage.data.executed_files()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "256", "colour": "orange", "code": "    for path in runs:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "257", "colour": "orange", "code": "        if not _skip_file(path, exclude) and not os.path.isdir(path):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "258", "colour": "orange", "code": "            _graft(path, tree)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "259", "colour": "orange", "code": "    return tree\n", "error": "none", "author": "tom@organisms.be"}, {"index": "260", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "261", "colour": "orange", "code": "class CoverStats(object):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "262", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "263", "colour": "green", "code": "    def __init__(self, coverage, root=None):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "264", "colour": "orange", "code": "        self.coverage = coverage\n", "error": "none", "author": "tom@organisms.be"}, {"index": "265", "colour": "orange", "code": "        if root is None:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "266", "colour": "orange", "code": "            # Guess initial depth. Files outside this path will not be\n", "error": "none", "author": "tom@organisms.be"}, {"index": "267", "colour": "orange", "code": "            # reachable from the web interface.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "268", "colour": "orange", "code": "            import cherrypy\n", "error": "none", "author": "tom@organisms.be"}, {"index": "269", "colour": "orange", "code": "            root = os.path.dirname(cherrypy.__file__)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "270", "colour": "orange", "code": "        self.root = root\n", "error": "none", "author": "tom@organisms.be"}, {"index": "271", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "272", "colour": "orange", "code": "    def index(self):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "273", "colour": "orange", "code": "        return TEMPLATE_FRAMESET % self.root.lower()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "274", "colour": "orange", "code": "    index.exposed = True\n", "error": "none", "author": "tom@organisms.be"}, {"index": "275", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "276", "colour": "orange", "code": "    def menu(self, base=\"/\", pct=\"50\", showpct=\"\",\n", "error": "none", "author": "tom@organisms.be"}, {"index": "277", "colour": "orange", "code": "             exclude=r'python\\d\\.\\d|test|tut\\d|tutorial'):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "278", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "279", "colour": "orange", "code": "        # The coverage module uses all-lower-case names.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "280", "colour": "orange", "code": "        base = base.lower().rstrip(os.sep)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "281", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "282", "colour": "orange", "code": "        yield TEMPLATE_MENU\n", "error": "none", "author": "tom@organisms.be"}, {"index": "283", "colour": "orange", "code": "        yield TEMPLATE_FORM % locals()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "284", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "285", "colour": "orange", "code": "        # Start by showing links for parent paths\n", "error": "none", "author": "tom@organisms.be"}, {"index": "286", "colour": "orange", "code": "        yield \"<div id='crumbs'>\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "287", "colour": "orange", "code": "        path = \"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "288", "colour": "orange", "code": "        atoms = base.split(os.sep)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "289", "colour": "orange", "code": "        atoms.pop()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "290", "colour": "orange", "code": "        for atom in atoms:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "291", "colour": "orange", "code": "            path += atom + os.sep\n", "error": "none", "author": "tom@organisms.be"}, {"index": "292", "colour": "orange", "code": "            yield (\"<a href='menu?base=%s&exclude=%s'>%s</a> %s\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "293", "colour": "orange", "code": "                   % (path, quote_plus(exclude), atom, os.sep))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "294", "colour": "orange", "code": "        yield \"</div>\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "295", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "296", "colour": "orange", "code": "        yield \"<div id='tree'>\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "297", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "298", "colour": "orange", "code": "        # Then display the tree\n", "error": "none", "author": "tom@organisms.be"}, {"index": "299", "colour": "orange", "code": "        tree = get_tree(base, exclude, self.coverage)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "300", "colour": "orange", "code": "        if not tree:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "301", "colour": "orange", "code": "            yield \"<p>No modules covered.</p>\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "302", "colour": "orange", "code": "        else:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "303", "colour": "orange", "code": "            for chunk in _show_branch(tree, base, \"/\", pct,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "304", "colour": "orange", "code": "                                      showpct=='checked', exclude, coverage=self.coverage):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "305", "colour": "orange", "code": "                yield chunk\n", "error": "none", "author": "tom@organisms.be"}, {"index": "306", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "307", "colour": "orange", "code": "        yield \"</div>\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "308", "colour": "orange", "code": "        yield \"</body></html>\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "309", "colour": "orange", "code": "    menu.exposed = True\n", "error": "none", "author": "tom@organisms.be"}, {"index": "310", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "311", "colour": "blue", "code": "    def annotated_file(self, filename, statements, excluded, missing):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "312", "colour": "orange", "code": "        source = open(filename, 'r')\n", "error": "none", "author": "tom@organisms.be"}, {"index": "313", "colour": "green", "code": "        buffer = []\n", "error": "W", "author": "tom@organisms.be"}, {"index": "314", "colour": "orange", "code": "        for lineno, line in enumerate(source.readlines()):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "315", "colour": "orange", "code": "            lineno += 1\n", "error": "none", "author": "tom@organisms.be"}, {"index": "316", "colour": "orange", "code": "            line = line.strip(\"\\n\\r\")\n", "error": "none", "author": "tom@organisms.be"}, {"index": "317", "colour": "orange", "code": "            empty_the_buffer = True\n", "error": "none", "author": "tom@organisms.be"}, {"index": "318", "colour": "orange", "code": "            if lineno in excluded:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "319", "colour": "orange", "code": "                template = TEMPLATE_LOC_EXCLUDED\n", "error": "none", "author": "tom@organisms.be"}, {"index": "320", "colour": "orange", "code": "            elif lineno in missing:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "321", "colour": "orange", "code": "                template = TEMPLATE_LOC_NOT_COVERED\n", "error": "none", "author": "tom@organisms.be"}, {"index": "322", "colour": "orange", "code": "            elif lineno in statements:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "323", "colour": "orange", "code": "                template = TEMPLATE_LOC_COVERED\n", "error": "none", "author": "tom@organisms.be"}, {"index": "324", "colour": "orange", "code": "            else:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "325", "colour": "orange", "code": "                empty_the_buffer = False\n", "error": "none", "author": "tom@organisms.be"}, {"index": "326", "colour": "orange", "code": "                buffer.append((lineno, line))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "327", "colour": "orange", "code": "            if empty_the_buffer:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "328", "colour": "orange", "code": "                for lno, pastline in buffer:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "329", "colour": "orange", "code": "                    yield template % (lno, cgi.escape(pastline))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "330", "colour": "orange", "code": "                buffer = []\n", "error": "none", "author": "tom@organisms.be"}, {"index": "331", "colour": "orange", "code": "                yield template % (lineno, cgi.escape(line))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "332", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "333", "colour": "orange", "code": "    def report(self, name):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "334", "colour": "orange", "code": "        filename, statements, excluded, missing, _ = self.coverage.analysis2(name)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "335", "colour": "orange", "code": "        pc = _percent(statements, missing)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "336", "colour": "orange", "code": "        yield TEMPLATE_COVERAGE % dict(name=os.path.basename(name),\n", "error": "none", "author": "tom@organisms.be"}, {"index": "337", "colour": "orange", "code": "                                       fullpath=name,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "338", "colour": "orange", "code": "                                       pc=pc)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "339", "colour": "orange", "code": "        yield '<table>\\n'\n", "error": "none", "author": "tom@organisms.be"}, {"index": "340", "colour": "orange", "code": "        for line in self.annotated_file(filename, statements, excluded,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "341", "colour": "orange", "code": "                                        missing):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "342", "colour": "orange", "code": "            yield line\n", "error": "none", "author": "tom@organisms.be"}, {"index": "343", "colour": "orange", "code": "        yield '</table>'\n", "error": "none", "author": "tom@organisms.be"}, {"index": "344", "colour": "orange", "code": "        yield '</body>'\n", "error": "none", "author": "tom@organisms.be"}, {"index": "345", "colour": "orange", "code": "        yield '</html>'\n", "error": "none", "author": "tom@organisms.be"}, {"index": "346", "colour": "orange", "code": "    report.exposed = True\n", "error": "none", "author": "tom@organisms.be"}, {"index": "347", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "348", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "349", "colour": "orange", "code": "def serve(path=localFile, port=8080, root=None):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "350", "colour": "orange", "code": "    if coverage is None:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "351", "colour": "orange", "code": "        raise ImportError(\"The coverage module could not be imported.\")\n", "error": "none", "author": "tom@organisms.be"}, {"index": "352", "colour": "green", "code": "    from coverage import coverage\n", "error": "W", "author": "tom@organisms.be"}, {"index": "353", "colour": "orange", "code": "    cov = coverage(data_file = path)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "354", "colour": "orange", "code": "    cov.load()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "355", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "356", "colour": "orange", "code": "    import cherrypy\n", "error": "none", "author": "tom@organisms.be"}, {"index": "357", "colour": "orange", "code": "    cherrypy.config.update({'server.socket_port': int(port),\n", "error": "none", "author": "tom@organisms.be"}, {"index": "358", "colour": "orange", "code": "                            'server.thread_pool': 10,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "359", "colour": "orange", "code": "                            'environment': \"production\",\n", "error": "none", "author": "tom@organisms.be"}, {"index": "360", "colour": "orange", "code": "                            })\n", "error": "none", "author": "tom@organisms.be"}, {"index": "361", "colour": "orange", "code": "    cherrypy.quickstart(CoverStats(cov, root))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "362", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "363", "colour": "orange", "code": "if __name__ == \"__main__\":\n", "error": "none", "author": "tom@organisms.be"}, {"index": "364", "colour": "green", "code": "    serve(*tuple(sys.argv[1:]))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "365", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}]}