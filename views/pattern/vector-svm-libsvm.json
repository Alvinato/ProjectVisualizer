{"path": "/home/asumal/git/cs410/pattern/pattern/vector/svm/libsvm.py", "lines": [[{"error": "C", "line": "1", "code": "#!/usr/bin/env python\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "2", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "3", "code": "from ctypes import *\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "4", "code": "from ctypes.util import find_library\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "5", "code": "from os import path\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "6", "code": "import sys\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "7", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "8", "code": "# For unix the prefix 'lib' is not considered.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "9", "code": "if find_library('svm'):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "10", "code": "\tlibsvm = CDLL(find_library('svm'))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "11", "code": "elif find_library('libsvm'):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "12", "code": "\tlibsvm = CDLL(find_library('libsvm'))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "13", "code": "else:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "14", "code": "\tb = False\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "15", "code": "\tfor v in (\"libsvm-3.17\", \"libsvm-3.11\"):  # LIBSVM 3.11-17\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "16", "code": "\t\tfor binary in (\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "17", "code": "\t\t  # If you have OS X 32-bit, you need a 32-bit Python and libsvm-mac32.so.\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "18", "code": "\t\t  # If you have OS X 32-bit with 64-bit Python, \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "19", "code": "\t\t  # it will try to load libsvm-mac64.so which fails since OS X is 32-bit.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "20", "code": "\t\t  # It won't load libsvm-mac32.so since Python is 64-bit.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "21", "code": "\t\t  \"libsvm-win64.dll\",   # 1) 64-bit Windows\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "22", "code": "\t\t  \"libsvm-win32.dll\",   # 2) 32-bit Windows\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "23", "code": "\t\t  \"libsvm-mac32.so\",    # 3) 32-bit Mac OS X\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "24", "code": "\t\t  \"libsvm-mac64.so\",    # 4) 64-bit Mac OS X\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "25", "code": "\t\t  \"libsvm-ubuntu64.so\", # 5) 64-bit Linux Ubuntu\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "26", "code": "\t\t  \"libsvm.so\",          # 6) User-compiled Mac / Linux\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "27", "code": "\t\t  \"libsvm.dll\"):        # 7) User-compiled Windows\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "28", "code": "\t\t\tif sys.platform.startswith(\"win\") and binary.endswith(\".so\"):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "29", "code": "\t\t\t\tcontinue\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "30", "code": "\t\t\ttry:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "31", "code": "\t\t\t\tlibsvm = CDLL(path.join(path.dirname(__file__), v, binary)); b=True; break\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "32", "code": "\t\t\texcept OSError as e:\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "33", "code": "\t\t\t\tcontinue\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "34", "code": "\t\tif b: break\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "35", "code": "\tif not b:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "36", "code": "\t\traise ImportError(\"can't import libsvm (%sbit-%s)\" % (\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "37", "code": "\t\t\tsizeof(c_voidp) * 8, \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "38", "code": "\t\t\tsys.platform\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "39", "code": "\t\t))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "40", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "41", "code": "# Construct constants\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "42", "code": "SVM_TYPE = ['C_SVC', 'NU_SVC', 'ONE_CLASS', 'EPSILON_SVR', 'NU_SVR' ]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "43", "code": "KERNEL_TYPE = ['LINEAR', 'POLY', 'RBF', 'SIGMOID', 'PRECOMPUTED']\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "44", "code": "for i, s in enumerate(SVM_TYPE): exec(\"%s = %d\" % (s , i))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "45", "code": "for i, s in enumerate(KERNEL_TYPE): exec(\"%s = %d\" % (s , i))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "46", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "47", "code": "PRINT_STRING_FUN = CFUNCTYPE(None, c_char_p)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "48", "code": "def print_null(s): \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "49", "code": "\treturn \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "50", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "51", "code": "def genFields(names, types): \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "52", "code": "\treturn list(zip(names, types))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "53", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "54", "code": "def fillprototype(f, restype, argtypes): \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "55", "code": "\tf.restype = restype\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "56", "code": "\tf.argtypes = argtypes\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "57", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "58", "code": "class svm_node(Structure):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "W", "line": "59", "code": "\t_names = [\"index\", \"value\"]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "60", "code": "\t_types = [c_int, c_double]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "61", "code": "\t_fields_ = genFields(_names, _types)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "62", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "63", "code": "\tdef __str__(self):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "64", "code": "\t\treturn '%d:%g' % (self.index, self.value)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "65", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "66", "code": "def gen_svm_nodearray(xi, feature_max=None, isKernel=None):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "67", "code": "\tif isinstance(xi, dict):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "68", "code": "\t\tindex_range = xi.keys()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "69", "code": "\telif isinstance(xi, (list, tuple)):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "70", "code": "\t\tif not isKernel:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "71", "code": "\t\t\txi = [0] + xi  # idx should start from 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "72", "code": "\t\tindex_range = range(len(xi))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "73", "code": "\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "74", "code": "\t\traise TypeError('xi should be a dictionary, list or tuple')\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "75", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "76", "code": "\tif feature_max:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "77", "code": "\t\tassert(isinstance(feature_max, int))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "78", "code": "\t\tindex_range = filter(lambda j: j <= feature_max, index_range)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "79", "code": "\tif not isKernel: \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "80", "code": "\t\tindex_range = filter(lambda j:xi[j] != 0, index_range)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "81", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "82", "code": "\tindex_range = sorted(index_range)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "83", "code": "\tret = (svm_node * (len(index_range)+1))()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "84", "code": "\tret[-1].index = -1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "85", "code": "\tfor idx, j in enumerate(index_range):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "86", "code": "\t\tret[idx].index = j\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "87", "code": "\t\tret[idx].value = xi[j]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "88", "code": "\tmax_idx = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "89", "code": "\tif index_range: \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "90", "code": "\t\tmax_idx = index_range[-1]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "91", "code": "\treturn ret, max_idx\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "92", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "93", "code": "class svm_problem(Structure):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "W", "line": "94", "code": "\t_names = [\"l\", \"y\", \"x\"]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "95", "code": "\t_types = [c_int, POINTER(c_double), POINTER(POINTER(svm_node))]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "96", "code": "\t_fields_ = genFields(_names, _types)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "97", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "98", "code": "\tdef __init__(self, y, x, isKernel=None):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "99", "code": "\t\tif len(y) != len(x):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "100", "code": "\t\t\traise ValueError(\"len(y) != len(x)\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "101", "code": "\t\tself.l = l = len(y)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "102", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "103", "code": "\t\tmax_idx = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "104", "code": "\t\tx_space = self.x_space = []\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "105", "code": "\t\tfor i, xi in enumerate(x):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "106", "code": "\t\t\ttmp_xi, tmp_idx = gen_svm_nodearray(xi,isKernel=isKernel)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "107", "code": "\t\t\tx_space += [tmp_xi]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "108", "code": "\t\t\tmax_idx = max(max_idx, tmp_idx)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "109", "code": "\t\tself.n = max_idx\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "110", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "111", "code": "\t\tself.y = (c_double * l)()\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "112", "code": "\t\tfor i, yi in enumerate(y): self.y[i] = yi\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "113", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "114", "code": "\t\tself.x = (POINTER(svm_node) * l)() \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "115", "code": "\t\tfor i, xi in enumerate(self.x_space): self.x[i] = xi\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "116", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "117", "code": "class svm_parameter(Structure):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "W", "line": "118", "code": "\t_names = [\"svm_type\", \"kernel_type\", \"degree\", \"gamma\", \"coef0\",\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "119", "code": "\t\t\t\"cache_size\", \"eps\", \"C\", \"nr_weight\", \"weight_label\", \"weight\", \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "120", "code": "\t\t\t\"nu\", \"p\", \"shrinking\", \"probability\"]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "121", "code": "\t_types = [c_int, c_int, c_int, c_double, c_double, \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "122", "code": "\t\t\tc_double, c_double, c_double, c_int, POINTER(c_int), POINTER(c_double),\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "123", "code": "\t\t\tc_double, c_double, c_int, c_int]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "124", "code": "\t_fields_ = genFields(_names, _types)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "125", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "126", "code": "\tdef __init__(self, options = None):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "127", "code": "\t\tif options == None:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "128", "code": "\t\t\toptions = ''\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "129", "code": "\t\tself.parse_options(options)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "130", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "131", "code": "\tdef __str__(self):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "132", "code": "\t\ts = ''\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "133", "code": "\t\tattrs = svm_parameter._names + list(self.__dict__.keys())\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "134", "code": "\t\tvalues = map(lambda attr: getattr(self, attr), attrs) \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "135", "code": "\t\tfor attr, val in zip(attrs, values):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "136", "code": "\t\t\ts += (' %s: %s\\n' % (attr, val))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "137", "code": "\t\ts = s.strip()\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "138", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "139", "code": "\t\treturn s\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "140", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "141", "code": "\tdef set_to_default_values(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "142", "code": "\t\tself.svm_type = C_SVC;\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "143", "code": "\t\tself.kernel_type = RBF\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "144", "code": "\t\tself.degree = 3\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "145", "code": "\t\tself.gamma = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "146", "code": "\t\tself.coef0 = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "147", "code": "\t\tself.nu = 0.5\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "148", "code": "\t\tself.cache_size = 100\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "149", "code": "\t\tself.C = 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "150", "code": "\t\tself.eps = 0.001\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "151", "code": "\t\tself.p = 0.1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "152", "code": "\t\tself.shrinking = 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "153", "code": "\t\tself.probability = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "154", "code": "\t\tself.nr_weight = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "155", "code": "\t\tself.weight_label = (c_int*0)()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "156", "code": "\t\tself.weight = (c_double*0)()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "157", "code": "\t\tself.cross_validation = False\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "158", "code": "\t\tself.nr_fold = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "159", "code": "\t\tself.print_func = None\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "160", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "161", "code": "\tdef parse_options(self, options):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "W", "line": "162", "code": "\t\tif isinstance(options, list):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "163", "code": "\t\t\targv = options\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "164", "code": "\t\telif isinstance(options, str):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "165", "code": "\t\t\targv = options.split()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "166", "code": "\t\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "167", "code": "\t\t\traise TypeError(\"arg 1 should be a list or a str.\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "168", "code": "\t\tself.set_to_default_values()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "169", "code": "\t\tself.print_func = cast(None, PRINT_STRING_FUN)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "170", "code": "\t\tweight_label = []\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "171", "code": "\t\tweight = []\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "172", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "173", "code": "\t\ti = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "174", "code": "\t\twhile i < len(argv):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "175", "code": "\t\t\tif argv[i] == \"-s\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "176", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "177", "code": "\t\t\t\tself.svm_type = int(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "178", "code": "\t\t\telif argv[i] == \"-t\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "179", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "180", "code": "\t\t\t\tself.kernel_type = int(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "181", "code": "\t\t\telif argv[i] == \"-d\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "182", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "183", "code": "\t\t\t\tself.degree = int(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "184", "code": "\t\t\telif argv[i] == \"-g\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "185", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "186", "code": "\t\t\t\tself.gamma = float(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "187", "code": "\t\t\telif argv[i] == \"-r\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "188", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "189", "code": "\t\t\t\tself.coef0 = float(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "190", "code": "\t\t\telif argv[i] == \"-n\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "191", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "192", "code": "\t\t\t\tself.nu = float(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "193", "code": "\t\t\telif argv[i] == \"-m\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "194", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "195", "code": "\t\t\t\tself.cache_size = float(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "196", "code": "\t\t\telif argv[i] == \"-c\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "197", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "198", "code": "\t\t\t\tself.C = float(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "199", "code": "\t\t\telif argv[i] == \"-e\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "200", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "201", "code": "\t\t\t\tself.eps = float(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "202", "code": "\t\t\telif argv[i] == \"-p\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "203", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "204", "code": "\t\t\t\tself.p = float(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "205", "code": "\t\t\telif argv[i] == \"-h\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "206", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "207", "code": "\t\t\t\tself.shrinking = int(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "208", "code": "\t\t\telif argv[i] == \"-b\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "209", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "210", "code": "\t\t\t\tself.probability = int(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "211", "code": "\t\t\telif argv[i] == \"-q\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "212", "code": "\t\t\t\tself.print_func = PRINT_STRING_FUN(print_null)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "213", "code": "\t\t\telif argv[i] == \"-v\":\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "214", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "215", "code": "\t\t\t\tself.cross_validation = 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "216", "code": "\t\t\t\tself.nr_fold = int(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "217", "code": "\t\t\t\tif self.nr_fold < 2:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "218", "code": "\t\t\t\t\traise ValueError(\"n-fold cross validation: n must >= 2\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "219", "code": "\t\t\telif argv[i].startswith(\"-w\"):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "220", "code": "\t\t\t\ti = i + 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "221", "code": "\t\t\t\tself.nr_weight += 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "222", "code": "\t\t\t\tnr_weight = self.nr_weight\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "223", "code": "\t\t\t\tweight_label += [int(argv[i-1][2:])]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "224", "code": "\t\t\t\tweight += [float(argv[i])]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "225", "code": "\t\t\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "226", "code": "\t\t\t\traise ValueError(\"Wrong options\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "227", "code": "\t\t\ti += 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "228", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "229", "code": "\t\tlibsvm.svm_set_print_string_function(self.print_func)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "230", "code": "\t\tself.weight_label = (c_int*self.nr_weight)()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "231", "code": "\t\tself.weight = (c_double*self.nr_weight)()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "232", "code": "\t\tfor i in range(self.nr_weight): \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "233", "code": "\t\t\tself.weight[i] = weight[i]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "234", "code": "\t\t\tself.weight_label[i] = weight_label[i]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "235", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "236", "code": "class svm_model(Structure):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "237", "code": "\t_names = ['param', 'nr_class', 'l', 'SV', 'sv_coef', 'rho',\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "238", "code": "\t\t\t'probA', 'probB', 'sv_indices', 'label', 'nSV', 'free_sv']\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "239", "code": "\t_types = [svm_parameter, c_int, c_int, POINTER(POINTER(svm_node)),\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "240", "code": "\t\t\tPOINTER(POINTER(c_double)), POINTER(c_double),\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "241", "code": "\t\t\tPOINTER(c_double), POINTER(c_double), POINTER(c_int),\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "242", "code": "\t\t\tPOINTER(c_int), POINTER(c_int), c_int]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "243", "code": "\t_fields_ = genFields(_names, _types)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "244", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "245", "code": "\tdef __init__(self):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "246", "code": "\t\tself.__createfrom__ = 'python'\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "247", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "248", "code": "\tdef __del__(self):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "249", "code": "\t\t# free memory created by C to avoid memory leak\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "250", "code": "\t\tif hasattr(self, '__createfrom__') and self.__createfrom__ == 'C':\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "251", "code": "\t\t\tlibsvm.svm_free_and_destroy_model(pointer(self))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "252", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "253", "code": "\tdef get_svm_type(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "254", "code": "\t\treturn libsvm.svm_get_svm_type(self)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "255", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "256", "code": "\tdef get_nr_class(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "257", "code": "\t\treturn libsvm.svm_get_nr_class(self)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "258", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "259", "code": "\tdef get_svr_probability(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "260", "code": "\t\treturn libsvm.svm_get_svr_probability(self)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "261", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "262", "code": "\tdef get_labels(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "263", "code": "\t\tnr_class = self.get_nr_class()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "264", "code": "\t\tlabels = (c_int * nr_class)()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "265", "code": "\t\tlibsvm.svm_get_labels(self, labels)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "266", "code": "\t\treturn labels[:nr_class]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "267", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "268", "code": "\tdef get_sv_indices(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "269", "code": "\t\ttotal_sv = self.get_nr_sv()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "270", "code": "\t\tsv_indices = (c_int * total_sv)()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "271", "code": "\t\tlibsvm.svm_get_sv_indices(self, sv_indices)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "272", "code": "\t\treturn sv_indices[:total_sv]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "273", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "274", "code": "\tdef get_nr_sv(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "275", "code": "\t\treturn libsvm.svm_get_nr_sv(self)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "276", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "277", "code": "\tdef is_probability_model(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "278", "code": "\t\treturn (libsvm.svm_check_probability_model(self) == 1)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "279", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "280", "code": "\tdef get_sv_coef(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "281", "code": "\t\treturn [tuple(self.sv_coef[j][i] for j in xrange(self.nr_class - 1))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "282", "code": "\t\t\t\tfor i in xrange(self.l)]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "283", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "284", "code": "\tdef get_SV(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "285", "code": "\t\tresult = []\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "286", "code": "\t\tfor sparse_sv in self.SV[:self.l]:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "287", "code": "\t\t\trow = dict()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "288", "code": "\t\t\t\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "289", "code": "\t\t\ti = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "290", "code": "\t\t\twhile True:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "291", "code": "\t\t\t\trow[sparse_sv[i].index] = sparse_sv[i].value\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "292", "code": "\t\t\t\tif sparse_sv[i].index == -1:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "293", "code": "\t\t\t\t\tbreak\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "294", "code": "\t\t\t\ti += 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "295", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "296", "code": "\t\t\tresult.append(row)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "297", "code": "\t\treturn result\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "298", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "299", "code": "def toPyModel(model_ptr):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "300", "code": "\t\"\"\"\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "301", "code": "\ttoPyModel(model_ptr) -> svm_model\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "302", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "303", "code": "\tConvert a ctypes POINTER(svm_model) to a Python svm_model\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "304", "code": "\t\"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "305", "code": "\tif bool(model_ptr) == False:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "306", "code": "\t\traise ValueError(\"Null pointer\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "307", "code": "\tm = model_ptr.contents\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "308", "code": "\tm.__createfrom__ = 'C'\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "309", "code": "\treturn m\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "310", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "311", "code": "fillprototype(libsvm.svm_train, POINTER(svm_model), [POINTER(svm_problem), POINTER(svm_parameter)])\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "312", "code": "fillprototype(libsvm.svm_cross_validation, None, [POINTER(svm_problem), POINTER(svm_parameter), c_int, POINTER(c_double)])\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "313", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "314", "code": "fillprototype(libsvm.svm_save_model, c_int, [c_char_p, POINTER(svm_model)])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "315", "code": "fillprototype(libsvm.svm_load_model, POINTER(svm_model), [c_char_p])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "316", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "317", "code": "fillprototype(libsvm.svm_get_svm_type, c_int, [POINTER(svm_model)])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "318", "code": "fillprototype(libsvm.svm_get_nr_class, c_int, [POINTER(svm_model)])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "319", "code": "fillprototype(libsvm.svm_get_labels, None, [POINTER(svm_model), POINTER(c_int)])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "320", "code": "fillprototype(libsvm.svm_get_sv_indices, None, [POINTER(svm_model), POINTER(c_int)])\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "321", "code": "fillprototype(libsvm.svm_get_nr_sv, c_int, [POINTER(svm_model)])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "322", "code": "fillprototype(libsvm.svm_get_svr_probability, c_double, [POINTER(svm_model)])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "323", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "324", "code": "fillprototype(libsvm.svm_predict_values, c_double, [POINTER(svm_model), POINTER(svm_node), POINTER(c_double)])\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "325", "code": "fillprototype(libsvm.svm_predict, c_double, [POINTER(svm_model), POINTER(svm_node)])\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "326", "code": "fillprototype(libsvm.svm_predict_probability, c_double, [POINTER(svm_model), POINTER(svm_node), POINTER(c_double)])\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "327", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "328", "code": "fillprototype(libsvm.svm_free_model_content, None, [POINTER(svm_model)])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "329", "code": "fillprototype(libsvm.svm_free_and_destroy_model, None, [POINTER(POINTER(svm_model))])\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "330", "code": "fillprototype(libsvm.svm_destroy_param, None, [POINTER(svm_parameter)])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "331", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "332", "code": "fillprototype(libsvm.svm_check_parameter, c_char_p, [POINTER(svm_problem), POINTER(svm_parameter)])\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "333", "code": "fillprototype(libsvm.svm_check_probability_model, c_int, [POINTER(svm_model)])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "334", "code": "fillprototype(libsvm.svm_set_print_string_function, None, [PRINT_STRING_FUN])\n", "colour": "black", "author": "tom@organisms.be"}]]}