{"path": "/home/asumal/git/cs410/pattern/pattern/web/pdf/converter.py", "lines": [[{"error": "C", "line": "1", "code": "#!/usr/bin/env python2\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "2", "code": "import sys, os.path\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "3", "code": "from pdfdevice import PDFDevice, PDFTextDevice\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "4", "code": "from pdffont import PDFUnicodeNotDefined\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "5", "code": "from pdftypes import LITERALS_DCT_DECODE\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "6", "code": "from pdfcolor import LITERAL_DEVICE_GRAY, LITERAL_DEVICE_RGB\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "7", "code": "from layout import LTContainer, LTPage, LTText, LTLine, LTRect, LTCurve\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "8", "code": "from layout import LTFigure, LTImage, LTChar, LTTextLine\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "9", "code": "from layout import LTTextBox, LTTextBoxVertical, LTTextGroup\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "10", "code": "from utils import apply_matrix_pt, mult_matrix\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "11", "code": "from utils import enc, bbox2str, create_bmp\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "12", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "13", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "14", "code": "##  PDFLayoutAnalyzer\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "15", "code": "##\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "16", "code": "class PDFLayoutAnalyzer(PDFTextDevice):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "17", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "18", "code": "    def __init__(self, rsrcmgr, pageno=1, laparams=None):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "19", "code": "        PDFTextDevice.__init__(self, rsrcmgr)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "20", "code": "        self.pageno = pageno\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "21", "code": "        self.laparams = laparams\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "22", "code": "        self._stack = []\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "23", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "24", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "25", "code": "    def begin_page(self, page, ctm):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "26", "code": "        (x0,y0,x1,y1) = page.mediabox\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "27", "code": "        (x0,y0) = apply_matrix_pt(ctm, (x0,y0))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "28", "code": "        (x1,y1) = apply_matrix_pt(ctm, (x1,y1))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "29", "code": "        mediabox = (0, 0, abs(x0-x1), abs(y0-y1))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "30", "code": "        self.cur_item = LTPage(self.pageno, mediabox)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "31", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "32", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "33", "code": "    def end_page(self, page):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "34", "code": "        assert not self._stack\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "35", "code": "        assert isinstance(self.cur_item, LTPage)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "36", "code": "        if self.laparams is not None:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "37", "code": "            self.cur_item.analyze(self.laparams)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "38", "code": "        self.pageno += 1\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "39", "code": "        self.receive_layout(self.cur_item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "40", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "41", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "42", "code": "    def begin_figure(self, name, bbox, matrix):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "43", "code": "        self._stack.append(self.cur_item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "44", "code": "        self.cur_item = LTFigure(name, bbox, mult_matrix(matrix, self.ctm))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "45", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "46", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "47", "code": "    def end_figure(self, _):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "48", "code": "        fig = self.cur_item\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "49", "code": "        assert isinstance(self.cur_item, LTFigure)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "50", "code": "        self.cur_item = self._stack.pop()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "51", "code": "        self.cur_item.add(fig)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "52", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "53", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "54", "code": "    def render_image(self, name, stream):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "55", "code": "        assert isinstance(self.cur_item, LTFigure)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "56", "code": "        item = LTImage(name, stream,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "57", "code": "                       (self.cur_item.x0, self.cur_item.y0,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "58", "code": "                        self.cur_item.x1, self.cur_item.y1))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "59", "code": "        self.cur_item.add(item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "60", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "61", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "62", "code": "    def paint_path(self, gstate, stroke, fill, evenodd, path):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "63", "code": "        shape = ''.join(x[0] for x in path)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "64", "code": "        if shape == 'ml':\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "65", "code": "            # horizontal/vertical line\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "66", "code": "            (_,x0,y0) = path[0]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "67", "code": "            (_,x1,y1) = path[1]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "68", "code": "            (x0,y0) = apply_matrix_pt(self.ctm, (x0,y0))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "69", "code": "            (x1,y1) = apply_matrix_pt(self.ctm, (x1,y1))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "70", "code": "            if x0 == x1 or y0 == y1:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "71", "code": "                self.cur_item.add(LTLine(gstate.linewidth, (x0,y0), (x1,y1)))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "72", "code": "                return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "73", "code": "        if shape == 'mlllh':\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "74", "code": "            # rectangle\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "75", "code": "            (_,x0,y0) = path[0]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "76", "code": "            (_,x1,y1) = path[1]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "77", "code": "            (_,x2,y2) = path[2]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "78", "code": "            (_,x3,y3) = path[3]\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "79", "code": "            (x0,y0) = apply_matrix_pt(self.ctm, (x0,y0))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "80", "code": "            (x1,y1) = apply_matrix_pt(self.ctm, (x1,y1))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "81", "code": "            (x2,y2) = apply_matrix_pt(self.ctm, (x2,y2))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "82", "code": "            (x3,y3) = apply_matrix_pt(self.ctm, (x3,y3))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "83", "code": "            if ((x0 == x1 and y1 == y2 and x2 == x3 and y3 == y0) or\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "84", "code": "                (y0 == y1 and x1 == x2 and y2 == y3 and x3 == x0)):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "85", "code": "                self.cur_item.add(LTRect(gstate.linewidth, (x0,y0,x2,y2)))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "86", "code": "                return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "87", "code": "        # other shapes\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "88", "code": "        pts = []\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "89", "code": "        for p in path:\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "90", "code": "            for i in xrange(1, len(p), 2):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "91", "code": "                pts.append(apply_matrix_pt(self.ctm, (p[i], p[i+1])))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "92", "code": "        self.cur_item.add(LTCurve(gstate.linewidth, pts))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "93", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "94", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "95", "code": "    def render_char(self, matrix, font, fontsize, scaling, rise, cid):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "96", "code": "        try:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "97", "code": "            text = font.to_unichr(cid)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "98", "code": "            assert isinstance(text, unicode), text\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "99", "code": "        except PDFUnicodeNotDefined:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "100", "code": "            text = self.handle_undefined_char(font, cid)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "101", "code": "        textwidth = font.char_width(cid)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "102", "code": "        textdisp = font.char_disp(cid)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "103", "code": "        item = LTChar(matrix, font, fontsize, scaling, rise, text, textwidth, textdisp)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "104", "code": "        self.cur_item.add(item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "105", "code": "        return item.adv\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "106", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "107", "code": "    def handle_undefined_char(self, font, cid):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "108", "code": "        if self.debug:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "109", "code": "            print >>sys.stderr, 'undefined: %r, %r' % (font, cid)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "110", "code": "        return '(cid:%d)' % cid\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "111", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "112", "code": "    def receive_layout(self, ltpage):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "113", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "114", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "115", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "116", "code": "##  PDFPageAggregator\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "117", "code": "##\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "118", "code": "class PDFPageAggregator(PDFLayoutAnalyzer):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "119", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "120", "code": "    def __init__(self, rsrcmgr, pageno=1, laparams=None):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "121", "code": "        PDFLayoutAnalyzer.__init__(self, rsrcmgr, pageno=pageno, laparams=laparams)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "122", "code": "        self.result = None\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "123", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "124", "code": "    \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "125", "code": "    def receive_layout(self, ltpage):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "126", "code": "        self.result = ltpage\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "127", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "128", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "129", "code": "    def get_result(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "130", "code": "        return self.result\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "131", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "132", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "133", "code": "##  PDFConverter\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "134", "code": "##\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "135", "code": "class PDFConverter(PDFLayoutAnalyzer):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "136", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "137", "code": "    def __init__(self, rsrcmgr, outfp, codec='utf-8', pageno=1, laparams=None):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "C", "line": "138", "code": "        PDFLayoutAnalyzer.__init__(self, rsrcmgr, pageno=pageno, laparams=laparams)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "139", "code": "        self.outfp = outfp\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "140", "code": "        self.codec = codec\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "141", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "142", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "143", "code": "    def write_image(self, image):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "144", "code": "        stream = image.stream\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "145", "code": "        filters = stream.get_filters()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "146", "code": "        if len(filters) == 1 and filters[0] in LITERALS_DCT_DECODE:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "147", "code": "            ext = '.jpg'\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "148", "code": "            data = stream.get_rawdata()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "149", "code": "        elif stream.colorspace is LITERAL_DEVICE_RGB:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "150", "code": "            ext = '.bmp'\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "151", "code": "            data = create_bmp(stream.get_data(), stream.bits*3, image.width, image.height)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "152", "code": "        elif stream.colorspace is LITERAL_DEVICE_GRAY:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "153", "code": "            ext = '.bmp'\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "154", "code": "            data = create_bmp(stream.get_data(), stream.bits, image.width, image.height)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "155", "code": "        else:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "156", "code": "            ext = '.img'\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "157", "code": "            data = stream.get_data()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "158", "code": "        name = image.name+ext\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "E", "line": "159", "code": "        path = os.path.join(self.outdir, name)\n", "colour": "yellow", "author": "tom@organisms.be"}, {"error": "W", "line": "160", "code": "        fp = file(path, 'wb')\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "161", "code": "        fp.write(data)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "162", "code": "        fp.close()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "163", "code": "        return name\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "164", "code": "    \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "165", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "166", "code": "##  TextConverter\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "167", "code": "##\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "168", "code": "class TextConverter(PDFConverter):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "169", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "170", "code": "    def __init__(self, rsrcmgr, outfp, codec='utf-8', pageno=1, laparams=None,\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "171", "code": "                 showpageno=False):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "172", "code": "        PDFConverter.__init__(self, rsrcmgr, outfp, codec=codec, pageno=pageno, laparams=laparams)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "173", "code": "        self.showpageno = showpageno\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "174", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "175", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "176", "code": "    def write_text(self, text):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "177", "code": "        self.outfp.write(text.encode(self.codec, 'ignore'))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "178", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "179", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "180", "code": "    def receive_layout(self, ltpage):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "181", "code": "        def render(item):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "182", "code": "            if isinstance(item, LTContainer):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "183", "code": "                for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "184", "code": "                    render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "185", "code": "            elif isinstance(item, LTText):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "186", "code": "                self.write_text(item.get_text())\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "187", "code": "            if isinstance(item, LTTextBox):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "188", "code": "                self.write_text('\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "189", "code": "        if self.showpageno:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "190", "code": "            self.write_text('Page %s\\n' % ltpage.pageid)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "191", "code": "        render(ltpage)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "192", "code": "        self.write_text('\\f')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "193", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "194", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "195", "code": "    # Some dummy functions to save memory/CPU when all that is wanted is text.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "196", "code": "    # This stops all the image and drawing ouput from being recorded and taking\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "197", "code": "    # up RAM.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "198", "code": "    def render_image(self, name, stream):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "199", "code": "        pass\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "200", "code": "    def paint_path(self, gstate, stroke, fill, evenodd, path):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "201", "code": "        pass\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "202", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "203", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "204", "code": "##  HTMLConverter\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "205", "code": "##\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "206", "code": "class HTMLConverter(PDFConverter):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "207", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "208", "code": "    RECT_COLORS = {\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "209", "code": "        #'char': 'green',\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "210", "code": "        'figure': 'yellow',\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "211", "code": "        'textline': 'magenta',\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "212", "code": "        'textbox': 'cyan',\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "213", "code": "        'textgroup': 'red',\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "214", "code": "        'curve': 'black',\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "215", "code": "        'page': 'gray',\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "216", "code": "        }\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "217", "code": "    \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "218", "code": "    TEXT_COLORS = {\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "219", "code": "        'textbox': 'blue',\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "220", "code": "        'char': 'black',\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "221", "code": "        }\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "222", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "223", "code": "    def __init__(self, rsrcmgr, outfp, codec='utf-8', pageno=1, laparams=None, \n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "224", "code": "                 scale=1, fontscale=0.7, layoutmode='normal', showpageno=True,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "225", "code": "                 pagemargin=50, outdir=None,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "226", "code": "                 rect_colors={'curve':'black', 'page':'gray'},\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "227", "code": "                 text_colors={'char':'black'}):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "228", "code": "        PDFConverter.__init__(self, rsrcmgr, outfp, codec=codec, pageno=pageno, laparams=laparams)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "229", "code": "        self.scale = scale\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "230", "code": "        self.fontscale = fontscale\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "231", "code": "        self.layoutmode = layoutmode\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "232", "code": "        self.showpageno = showpageno\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "233", "code": "        self.pagemargin = pagemargin\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "234", "code": "        self.outdir = outdir\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "235", "code": "        self.rect_colors = rect_colors\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "236", "code": "        self.text_colors = text_colors\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "237", "code": "        if self.debug:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "238", "code": "            self.rect_colors.update(self.RECT_COLORS)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "239", "code": "            self.text_colors.update(self.TEXT_COLORS)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "240", "code": "        self._yoffset = self.pagemargin\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "241", "code": "        self._font = None\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "242", "code": "        self._fontstack = []\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "243", "code": "        self.write_header()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "244", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "245", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "246", "code": "    def write(self, text):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "247", "code": "        self.outfp.write(text)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "248", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "249", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "250", "code": "    def write_header(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "251", "code": "        self.write('<html><head>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "252", "code": "        self.write('<meta http-equiv=\"Content-Type\" content=\"text/html; charset=%s\">\\n' % self.codec)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "253", "code": "        self.write('</head><body>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "254", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "255", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "256", "code": "    def write_footer(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "257", "code": "        self.write('<div style=\"position:absolute; top:0px;\">Page: %s</div>\\n' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "258", "code": "                   ', '.join('<a href=\"#%s\">%s</a>' % (i,i) for i in xrange(1,self.pageno)))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "259", "code": "        self.write('</body></html>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "260", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "261", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "262", "code": "    def write_text(self, text):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "263", "code": "        self.write(enc(text, self.codec))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "264", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "265", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "266", "code": "    def place_rect(self, color, borderwidth, x, y, w, h):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "267", "code": "        color = self.rect_colors.get(color)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "268", "code": "        if color is not None:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "269", "code": "            self.write('<span style=\"position:absolute; border: %s %dpx solid; '\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "270", "code": "                       'left:%dpx; top:%dpx; width:%dpx; height:%dpx;\"></span>\\n' %\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "271", "code": "                       (color, borderwidth,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "272", "code": "                        x*self.scale, (self._yoffset-y)*self.scale,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "273", "code": "                        w*self.scale, h*self.scale))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "274", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "275", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "276", "code": "    def place_border(self, color, borderwidth, item):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "277", "code": "        self.place_rect(color, borderwidth, item.x0, item.y1, item.width, item.height)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "278", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "279", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "280", "code": "    def place_image(self, item, borderwidth, x, y, w, h):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "281", "code": "        if self.outdir is not None:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "282", "code": "            name = self.write_image(item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "283", "code": "            self.write('<img src=\"%s\" border=\"%d\" style=\"position:absolute; left:%dpx; top:%dpx;\" '\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "284", "code": "                       'width=\"%d\" height=\"%d\" />\\n' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "285", "code": "                       (enc(name), borderwidth,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "286", "code": "                        x*self.scale, (self._yoffset-y)*self.scale,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "287", "code": "                        w*self.scale, h*self.scale))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "288", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "289", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "290", "code": "    def place_text(self, color, text, x, y, size):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "291", "code": "        color = self.text_colors.get(color)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "292", "code": "        if color is not None:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "293", "code": "            self.write('<span style=\"position:absolute; color:%s; left:%dpx; top:%dpx; font-size:%dpx;\">' %\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "294", "code": "                       (color, x*self.scale, (self._yoffset-y)*self.scale, size*self.scale*self.fontscale))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "295", "code": "            self.write_text(text)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "296", "code": "            self.write('</span>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "297", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "298", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "299", "code": "    def begin_textbox(self, color, borderwidth, x, y, w, h, writing_mode):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "300", "code": "        self._fontstack.append(self._font)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "301", "code": "        self._font = None\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "302", "code": "        self.write('<div style=\"position:absolute; border: %s %dpx solid; writing-mode:%s; '\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "303", "code": "                   'left:%dpx; top:%dpx; width:%dpx; height:%dpx;\">' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "304", "code": "                   (color, borderwidth, writing_mode,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "305", "code": "                    x*self.scale, (self._yoffset-y)*self.scale,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "306", "code": "                    w*self.scale, h*self.scale))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "307", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "308", "code": "    \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "309", "code": "    def put_text(self, text, fontname, fontsize):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "310", "code": "        font = (fontname, fontsize)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "311", "code": "        if font != self._font:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "312", "code": "            if self._font is not None:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "313", "code": "                self.write('</span>')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "314", "code": "            self.write('<span style=\"font-family: %s; font-size:%dpx\">' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "315", "code": "                       (fontname, fontsize * self.scale * self.fontscale))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "316", "code": "            self._font = font\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "317", "code": "        self.write_text(text)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "318", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "319", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "320", "code": "    def put_newline(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "321", "code": "        self.write('<br>')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "322", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "323", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "324", "code": "    def end_textbox(self, color):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "325", "code": "        if self._font is not None:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "326", "code": "            self.write('</span>')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "327", "code": "        self._font = self._fontstack.pop()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "328", "code": "        self.write('</div>')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "329", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "330", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "331", "code": "    def receive_layout(self, ltpage):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "C", "line": "332", "code": "        def show_group(item):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "333", "code": "            if isinstance(item, LTTextGroup):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "334", "code": "                self.place_border('textgroup', 1, item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "335", "code": "                for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "336", "code": "                    show_group(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "337", "code": "            return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "338", "code": "        def render(item):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "339", "code": "            if isinstance(item, LTPage):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "340", "code": "                self._yoffset += item.y1\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "341", "code": "                self.place_border('page', 1, item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "342", "code": "                if self.showpageno:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "343", "code": "                    self.write('<div style=\"position:absolute; top:%dpx;\">' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "344", "code": "                               ((self._yoffset-item.y1)*self.scale))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "345", "code": "                    self.write('<a name=\"%s\">Page %s</a></div>\\n' % (item.pageid, item.pageid))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "346", "code": "                for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "347", "code": "                    render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "348", "code": "                if item.groups is not None:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "349", "code": "                    for group in item.groups:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "350", "code": "                        show_group(group)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "351", "code": "            elif isinstance(item, LTCurve):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "352", "code": "                self.place_border('curve', 1, item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "353", "code": "            elif isinstance(item, LTFigure):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "354", "code": "                self.place_border('figure', 1, item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "355", "code": "                for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "356", "code": "                    render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "357", "code": "            elif isinstance(item, LTImage):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "358", "code": "                self.place_image(item, 1, item.x0, item.y1, item.width, item.height)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "359", "code": "            else:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "360", "code": "                if self.layoutmode == 'exact':\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "361", "code": "                    if isinstance(item, LTTextLine):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "362", "code": "                        self.place_border('textline', 1, item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "363", "code": "                        for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "364", "code": "                            render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "365", "code": "                    elif isinstance(item, LTTextBox):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "366", "code": "                        self.place_border('textbox', 1, item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "367", "code": "                        self.place_text('textbox', str(item.index+1), item.x0, item.y1, 20)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "368", "code": "                        for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "369", "code": "                            render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "370", "code": "                    elif isinstance(item, LTChar):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "371", "code": "                        self.place_border('char', 1, item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "372", "code": "                        self.place_text('char', item.get_text(), item.x0, item.y1, item.size)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "373", "code": "                else:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "374", "code": "                    if isinstance(item, LTTextLine):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "375", "code": "                        for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "376", "code": "                            render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "377", "code": "                        if self.layoutmode != 'loose':\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "378", "code": "                            self.put_newline()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "379", "code": "                    elif isinstance(item, LTTextBox):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "380", "code": "                        self.begin_textbox('textbox', 1, item.x0, item.y1, item.width, item.height,\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "381", "code": "                                           item.get_writing_mode())\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "382", "code": "                        for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "383", "code": "                            render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "384", "code": "                        self.end_textbox('textbox')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "385", "code": "                    elif isinstance(item, LTChar):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "386", "code": "                        self.put_text(item.get_text(), item.fontname, item.size)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "387", "code": "                    elif isinstance(item, LTText):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "388", "code": "                        self.write_text(item.get_text())\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "389", "code": "            return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "390", "code": "        render(ltpage)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "391", "code": "        self._yoffset += self.pagemargin\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "392", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "393", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "394", "code": "    def close(self):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "395", "code": "        self.write_footer()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "396", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "397", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "398", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "399", "code": "##  XMLConverter\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "400", "code": "##\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "401", "code": "class XMLConverter(PDFConverter):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "402", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "403", "code": "    def __init__(self, rsrcmgr, outfp, codec='utf-8', pageno=1, laparams=None, outdir=None):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "C", "line": "404", "code": "        PDFConverter.__init__(self, rsrcmgr, outfp, codec=codec, pageno=pageno, laparams=laparams)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "405", "code": "        self.outdir = outdir\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "406", "code": "        self.write_header()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "407", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "408", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "409", "code": "    def write_header(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "410", "code": "        self.outfp.write('<?xml version=\"1.0\" encoding=\"%s\" ?>\\n' % self.codec)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "411", "code": "        self.outfp.write('<pages>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "412", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "413", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "414", "code": "    def write_footer(self):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "415", "code": "        self.outfp.write('</pages>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "416", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "417", "code": "    \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "418", "code": "    def write_text(self, text):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "419", "code": "        self.outfp.write(enc(text, self.codec))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "420", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "421", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "422", "code": "    def receive_layout(self, ltpage):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "C", "line": "423", "code": "        def show_group(item):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "424", "code": "            if isinstance(item, LTTextBox):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "425", "code": "                self.outfp.write('<textbox id=\"%d\" bbox=\"%s\" />\\n' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "426", "code": "                                 (item.index, bbox2str(item.bbox)))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "427", "code": "            elif isinstance(item, LTTextGroup):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "428", "code": "                self.outfp.write('<textgroup bbox=\"%s\">\\n' % bbox2str(item.bbox))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "429", "code": "                for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "430", "code": "                    show_group(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "431", "code": "                self.outfp.write('</textgroup>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "432", "code": "            return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "433", "code": "        def render(item):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "434", "code": "            if isinstance(item, LTPage):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "435", "code": "                self.outfp.write('<page id=\"%s\" bbox=\"%s\" rotate=\"%d\">\\n' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "436", "code": "                                 (item.pageid, bbox2str(item.bbox), item.rotate))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "437", "code": "                for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "438", "code": "                    render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "439", "code": "                if item.groups is not None:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "440", "code": "                    self.outfp.write('<layout>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "441", "code": "                    for group in item.groups:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "442", "code": "                        show_group(group)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "443", "code": "                    self.outfp.write('</layout>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "444", "code": "                self.outfp.write('</page>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "445", "code": "            elif isinstance(item, LTLine):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "446", "code": "                self.outfp.write('<line linewidth=\"%d\" bbox=\"%s\" />\\n' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "447", "code": "                                 (item.linewidth, bbox2str(item.bbox)))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "448", "code": "            elif isinstance(item, LTRect):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "449", "code": "                self.outfp.write('<rect linewidth=\"%d\" bbox=\"%s\" />\\n' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "450", "code": "                                 (item.linewidth, bbox2str(item.bbox)))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "451", "code": "            elif isinstance(item, LTCurve):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "452", "code": "                self.outfp.write('<curve linewidth=\"%d\" bbox=\"%s\" pts=\"%s\"/>\\n' %\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "453", "code": "                                 (item.linewidth, bbox2str(item.bbox), item.get_pts()))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "454", "code": "            elif isinstance(item, LTFigure):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "455", "code": "                self.outfp.write('<figure name=\"%s\" bbox=\"%s\">\\n' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "456", "code": "                                 (item.name, bbox2str(item.bbox)))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "457", "code": "                for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "458", "code": "                    render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "459", "code": "                self.outfp.write('</figure>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "460", "code": "            elif isinstance(item, LTTextLine):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "461", "code": "                self.outfp.write('<textline bbox=\"%s\">\\n' % bbox2str(item.bbox))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "462", "code": "                for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "463", "code": "                    render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "464", "code": "                self.outfp.write('</textline>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "465", "code": "            elif isinstance(item, LTTextBox):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "466", "code": "                wmode = ''\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "467", "code": "                if isinstance(item, LTTextBoxVertical):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "468", "code": "                    wmode = ' wmode=\"vertical\"'\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "469", "code": "                self.outfp.write('<textbox id=\"%d\" bbox=\"%s\"%s>\\n' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "470", "code": "                                 (item.index, bbox2str(item.bbox), wmode))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "471", "code": "                for child in item:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "472", "code": "                    render(child)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "473", "code": "                self.outfp.write('</textbox>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "474", "code": "            elif isinstance(item, LTChar):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "475", "code": "                self.outfp.write('<text font=\"%s\" bbox=\"%s\" size=\"%.3f\">' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "476", "code": "                                 (enc(item.fontname), bbox2str(item.bbox), item.size))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "477", "code": "                self.write_text(item.get_text())\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "478", "code": "                self.outfp.write('</text>\\n')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "479", "code": "            elif isinstance(item, LTText):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "480", "code": "                self.outfp.write('<text>%s</text>\\n' % item.get_text())\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "481", "code": "            elif isinstance(item, LTImage):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "482", "code": "                if self.outdir:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "483", "code": "                    name = self.write_image(item)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "484", "code": "                    self.outfp.write('<image src=\"%s\" width=\"%d\" height=\"%d\" />\\n' %\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "485", "code": "                                     (enc(name), item.width, item.height))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "486", "code": "                else:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "487", "code": "                    self.outfp.write('<image width=\"%d\" height=\"%d\" />\\n' %\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "488", "code": "                                     (item.width, item.height))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "489", "code": "            else:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "490", "code": "                assert 0, item\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "491", "code": "            return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "492", "code": "        render(ltpage)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "493", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "494", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "495", "code": "    def close(self):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "496", "code": "        self.write_footer()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "497", "code": "        return\n", "colour": "black", "author": "tom@organisms.be"}]]}