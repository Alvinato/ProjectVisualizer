{"path": "/home/asumal/git/cs410/pattern/pattern/web/pdf/encodingdb.py", "lines": [[{"error": "C", "line": "1", "code": "#!/usr/bin/env python2\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "2", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "3", "code": "import re\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "4", "code": "from psparser import PSLiteral\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "5", "code": "from glyphlist import glyphname2unicode\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "6", "code": "from latin_enc import ENCODING\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "7", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "8", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "9", "code": "##  name2unicode\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "10", "code": "##\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "11", "code": "STRIP_NAME = re.compile(r'[0-9]+')\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "12", "code": "def name2unicode(name):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "13", "code": "    \"\"\"Converts Adobe glyph names to Unicode numbers.\"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "14", "code": "    if name in glyphname2unicode:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "15", "code": "        return glyphname2unicode[name]\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "16", "code": "    m = STRIP_NAME.search(name)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "17", "code": "    if not m: raise KeyError(name)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "18", "code": "    return unichr(int(m.group(0)))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "19", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "20", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "21", "code": "##  EncodingDB\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "22", "code": "##\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "23", "code": "class EncodingDB(object):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "none", "line": "24", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "25", "code": "    std2unicode = {}\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "26", "code": "    mac2unicode = {}\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "27", "code": "    win2unicode = {}\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "28", "code": "    pdf2unicode = {}\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "29", "code": "    for (name,std,mac,win,pdf) in ENCODING:\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "30", "code": "        c = name2unicode(name)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "31", "code": "        if std: std2unicode[std] = c\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "32", "code": "        if mac: mac2unicode[mac] = c\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "33", "code": "        if win: win2unicode[win] = c\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "34", "code": "        if pdf: pdf2unicode[pdf] = c\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "35", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "36", "code": "    encodings = {\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "37", "code": "      'StandardEncoding': std2unicode,\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "38", "code": "      'MacRomanEncoding': mac2unicode,\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "39", "code": "      'WinAnsiEncoding': win2unicode,\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "40", "code": "      'PDFDocEncoding': pdf2unicode,\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "41", "code": "      }\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "42", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "43", "code": "    @classmethod\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "44", "code": "    def get_encoding(klass, name, diff=None):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "45", "code": "        cid2unicode = klass.encodings.get(name, klass.std2unicode)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "46", "code": "        if diff:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "47", "code": "            cid2unicode = cid2unicode.copy()\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "48", "code": "            cid = 0\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "49", "code": "            for x in diff:\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "50", "code": "                if isinstance(x, int):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "51", "code": "                    cid = x\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "52", "code": "                elif isinstance(x, PSLiteral):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "53", "code": "                    try:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "54", "code": "                        cid2unicode[cid] = name2unicode(x.name)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "55", "code": "                    except KeyError:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "56", "code": "                        pass\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "57", "code": "                    cid += 1\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "58", "code": "        return cid2unicode\n", "colour": "black", "author": "tom@organisms.be"}]]}