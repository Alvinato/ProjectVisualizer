{"path": "/home/asumal/git/cs410/pattern/pattern/web/pdf/encodingdb.py", "lines": [[{"index": "1", "colour": "orange", "code": "#!/usr/bin/env python2\n", "error": "none", "author": "tom@organisms.be"}, {"index": "2", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "3", "colour": "orange", "code": "import re\n", "error": "none", "author": "tom@organisms.be"}, {"index": "4", "colour": "green", "code": "from psparser import PSLiteral\n", "error": "W", "author": "tom@organisms.be"}, {"index": "5", "colour": "green", "code": "from glyphlist import glyphname2unicode\n", "error": "W", "author": "tom@organisms.be"}, {"index": "6", "colour": "green", "code": "from latin_enc import ENCODING\n", "error": "W", "author": "tom@organisms.be"}, {"index": "7", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "8", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "9", "colour": "orange", "code": "##  name2unicode\n", "error": "none", "author": "tom@organisms.be"}, {"index": "10", "colour": "orange", "code": "##\n", "error": "none", "author": "tom@organisms.be"}, {"index": "11", "colour": "orange", "code": "STRIP_NAME = re.compile(r'[0-9]+')\n", "error": "none", "author": "tom@organisms.be"}, {"index": "12", "colour": "orange", "code": "def name2unicode(name):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "13", "colour": "orange", "code": "    \"\"\"Converts Adobe glyph names to Unicode numbers.\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "14", "colour": "orange", "code": "    if name in glyphname2unicode:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "15", "colour": "orange", "code": "        return glyphname2unicode[name]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "16", "colour": "orange", "code": "    m = STRIP_NAME.search(name)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "17", "colour": "orange", "code": "    if not m: raise KeyError(name)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "18", "colour": "orange", "code": "    return unichr(int(m.group(0)))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "19", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "20", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "21", "colour": "orange", "code": "##  EncodingDB\n", "error": "none", "author": "tom@organisms.be"}, {"index": "22", "colour": "orange", "code": "##\n", "error": "none", "author": "tom@organisms.be"}, {"index": "23", "colour": "blue", "code": "class EncodingDB(object):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "24", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "25", "colour": "orange", "code": "    std2unicode = {}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "26", "colour": "orange", "code": "    mac2unicode = {}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "27", "colour": "orange", "code": "    win2unicode = {}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "28", "colour": "orange", "code": "    pdf2unicode = {}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "29", "colour": "orange", "code": "    for (name,std,mac,win,pdf) in ENCODING:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "30", "colour": "orange", "code": "        c = name2unicode(name)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "31", "colour": "orange", "code": "        if std: std2unicode[std] = c\n", "error": "none", "author": "tom@organisms.be"}, {"index": "32", "colour": "orange", "code": "        if mac: mac2unicode[mac] = c\n", "error": "none", "author": "tom@organisms.be"}, {"index": "33", "colour": "orange", "code": "        if win: win2unicode[win] = c\n", "error": "none", "author": "tom@organisms.be"}, {"index": "34", "colour": "orange", "code": "        if pdf: pdf2unicode[pdf] = c\n", "error": "none", "author": "tom@organisms.be"}, {"index": "35", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "36", "colour": "orange", "code": "    encodings = {\n", "error": "none", "author": "tom@organisms.be"}, {"index": "37", "colour": "orange", "code": "      'StandardEncoding': std2unicode,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "38", "colour": "orange", "code": "      'MacRomanEncoding': mac2unicode,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "39", "colour": "orange", "code": "      'WinAnsiEncoding': win2unicode,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "40", "colour": "orange", "code": "      'PDFDocEncoding': pdf2unicode,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "41", "colour": "orange", "code": "      }\n", "error": "none", "author": "tom@organisms.be"}, {"index": "42", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "43", "colour": "orange", "code": "    @classmethod\n", "error": "none", "author": "tom@organisms.be"}, {"index": "44", "colour": "orange", "code": "    def get_encoding(klass, name, diff=None):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "45", "colour": "orange", "code": "        cid2unicode = klass.encodings.get(name, klass.std2unicode)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "46", "colour": "orange", "code": "        if diff:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "47", "colour": "orange", "code": "            cid2unicode = cid2unicode.copy()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "48", "colour": "orange", "code": "            cid = 0\n", "error": "none", "author": "tom@organisms.be"}, {"index": "49", "colour": "orange", "code": "            for x in diff:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "50", "colour": "orange", "code": "                if isinstance(x, int):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "51", "colour": "orange", "code": "                    cid = x\n", "error": "none", "author": "tom@organisms.be"}, {"index": "52", "colour": "orange", "code": "                elif isinstance(x, PSLiteral):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "53", "colour": "orange", "code": "                    try:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "54", "colour": "orange", "code": "                        cid2unicode[cid] = name2unicode(x.name)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "55", "colour": "orange", "code": "                    except KeyError:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "56", "colour": "orange", "code": "                        pass\n", "error": "none", "author": "tom@organisms.be"}, {"index": "57", "colour": "orange", "code": "                    cid += 1\n", "error": "none", "author": "tom@organisms.be"}, {"index": "58", "colour": "orange", "code": "        return cid2unicode\n", "error": "none", "author": "tom@organisms.be"}]]}