{"path": "/home/asumal/git/cs410/pattern/pattern/server/cherrypy/cherrypy/lib/gctools.py", "lines": [[{"index": "1", "colour": "orange", "code": "import gc\n", "error": "none", "author": "tom@organisms.be"}, {"index": "2", "colour": "orange", "code": "import inspect\n", "error": "none", "author": "tom@organisms.be"}, {"index": "3", "colour": "green", "code": "import os\n", "error": "W", "author": "tom@organisms.be"}, {"index": "4", "colour": "orange", "code": "import sys\n", "error": "none", "author": "tom@organisms.be"}, {"index": "5", "colour": "orange", "code": "import time\n", "error": "none", "author": "tom@organisms.be"}, {"index": "6", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "7", "colour": "orange", "code": "try:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "8", "colour": "orange", "code": "    import objgraph\n", "error": "none", "author": "tom@organisms.be"}, {"index": "9", "colour": "orange", "code": "except ImportError:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "10", "colour": "orange", "code": "    objgraph = None\n", "error": "none", "author": "tom@organisms.be"}, {"index": "11", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "12", "colour": "orange", "code": "import cherrypy\n", "error": "none", "author": "tom@organisms.be"}, {"index": "13", "colour": "orange", "code": "from cherrypy import _cprequest, _cpwsgi\n", "error": "none", "author": "tom@organisms.be"}, {"index": "14", "colour": "orange", "code": "from cherrypy.process.plugins import SimplePlugin\n", "error": "none", "author": "tom@organisms.be"}, {"index": "15", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "16", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "17", "colour": "orange", "code": "class ReferrerTree(object):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "18", "colour": "orange", "code": "    \"\"\"An object which gathers all referrers of an object to a given depth.\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "19", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "20", "colour": "orange", "code": "    peek_length = 40\n", "error": "none", "author": "tom@organisms.be"}, {"index": "21", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "22", "colour": "orange", "code": "    def __init__(self, ignore=None, maxdepth=2, maxparents=10):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "23", "colour": "orange", "code": "        self.ignore = ignore or []\n", "error": "none", "author": "tom@organisms.be"}, {"index": "24", "colour": "orange", "code": "        self.ignore.append(inspect.currentframe().f_back)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "25", "colour": "orange", "code": "        self.maxdepth = maxdepth\n", "error": "none", "author": "tom@organisms.be"}, {"index": "26", "colour": "orange", "code": "        self.maxparents = maxparents\n", "error": "none", "author": "tom@organisms.be"}, {"index": "27", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "28", "colour": "orange", "code": "    def ascend(self, obj, depth=1):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "29", "colour": "orange", "code": "        \"\"\"Return a nested list containing referrers of the given object.\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "30", "colour": "orange", "code": "        depth += 1\n", "error": "none", "author": "tom@organisms.be"}, {"index": "31", "colour": "orange", "code": "        parents = []\n", "error": "none", "author": "tom@organisms.be"}, {"index": "32", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "33", "colour": "orange", "code": "        # Gather all referrers in one step to minimize\n", "error": "none", "author": "tom@organisms.be"}, {"index": "34", "colour": "orange", "code": "        # cascading references due to repr() logic.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "35", "colour": "orange", "code": "        refs = gc.get_referrers(obj)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "36", "colour": "orange", "code": "        self.ignore.append(refs)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "37", "colour": "orange", "code": "        if len(refs) > self.maxparents:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "38", "colour": "orange", "code": "            return [(\"[%s referrers]\" % len(refs), [])]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "39", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "40", "colour": "orange", "code": "        try:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "41", "colour": "orange", "code": "            ascendcode = self.ascend.__code__\n", "error": "none", "author": "tom@organisms.be"}, {"index": "42", "colour": "orange", "code": "        except AttributeError:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "43", "colour": "orange", "code": "            ascendcode = self.ascend.im_func.func_code\n", "error": "none", "author": "tom@organisms.be"}, {"index": "44", "colour": "orange", "code": "        for parent in refs:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "45", "colour": "orange", "code": "            if inspect.isframe(parent) and parent.f_code is ascendcode:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "46", "colour": "orange", "code": "                continue\n", "error": "none", "author": "tom@organisms.be"}, {"index": "47", "colour": "orange", "code": "            if parent in self.ignore:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "48", "colour": "orange", "code": "                continue\n", "error": "none", "author": "tom@organisms.be"}, {"index": "49", "colour": "orange", "code": "            if depth <= self.maxdepth:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "50", "colour": "orange", "code": "                parents.append((parent, self.ascend(parent, depth)))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "51", "colour": "orange", "code": "            else:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "52", "colour": "orange", "code": "                parents.append((parent, []))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "53", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "54", "colour": "orange", "code": "        return parents\n", "error": "none", "author": "tom@organisms.be"}, {"index": "55", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "56", "colour": "orange", "code": "    def peek(self, s):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "57", "colour": "orange", "code": "        \"\"\"Return s, restricted to a sane length.\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "58", "colour": "orange", "code": "        if len(s) > (self.peek_length + 3):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "59", "colour": "orange", "code": "            half = self.peek_length // 2\n", "error": "none", "author": "tom@organisms.be"}, {"index": "60", "colour": "orange", "code": "            return s[:half] + '...' + s[-half:]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "61", "colour": "orange", "code": "        else:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "62", "colour": "orange", "code": "            return s\n", "error": "none", "author": "tom@organisms.be"}, {"index": "63", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "64", "colour": "blue", "code": "    def _format(self, obj, descend=True):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "65", "colour": "orange", "code": "        \"\"\"Return a string representation of a single object.\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "66", "colour": "orange", "code": "        if inspect.isframe(obj):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "67", "colour": "green", "code": "            filename, lineno, func, context, index = inspect.getframeinfo(obj)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "68", "colour": "orange", "code": "            return \"<frame of function '%s'>\" % func\n", "error": "none", "author": "tom@organisms.be"}, {"index": "69", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "70", "colour": "orange", "code": "        if not descend:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "71", "colour": "orange", "code": "            return self.peek(repr(obj))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "72", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "73", "colour": "orange", "code": "        if isinstance(obj, dict):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "74", "colour": "orange", "code": "            return \"{\" + \", \".join([\"%s: %s\" % (self._format(k, descend=False),\n", "error": "none", "author": "tom@organisms.be"}, {"index": "75", "colour": "orange", "code": "                                                self._format(v, descend=False))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "76", "colour": "orange", "code": "                                    for k, v in obj.items()]) + \"}\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "77", "colour": "orange", "code": "        elif isinstance(obj, list):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "78", "colour": "orange", "code": "            return \"[\" + \", \".join([self._format(item, descend=False)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "79", "colour": "orange", "code": "                                    for item in obj]) + \"]\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "80", "colour": "orange", "code": "        elif isinstance(obj, tuple):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "81", "colour": "orange", "code": "            return \"(\" + \", \".join([self._format(item, descend=False)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "82", "colour": "orange", "code": "                                    for item in obj]) + \")\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "83", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "84", "colour": "orange", "code": "        r = self.peek(repr(obj))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "85", "colour": "orange", "code": "        if isinstance(obj, (str, int, float)):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "86", "colour": "orange", "code": "            return r\n", "error": "none", "author": "tom@organisms.be"}, {"index": "87", "colour": "orange", "code": "        return \"%s: %s\" % (type(obj), r)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "88", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "89", "colour": "orange", "code": "    def format(self, tree):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "90", "colour": "orange", "code": "        \"\"\"Return a list of string reprs from a nested list of referrers.\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "91", "colour": "orange", "code": "        output = []\n", "error": "none", "author": "tom@organisms.be"}, {"index": "92", "colour": "orange", "code": "        def ascend(branch, depth=1):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "93", "colour": "orange", "code": "            for parent, grandparents in branch:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "94", "colour": "orange", "code": "                output.append((\"    \" * depth) + self._format(parent))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "95", "colour": "orange", "code": "                if grandparents:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "96", "colour": "orange", "code": "                    ascend(grandparents, depth + 1)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "97", "colour": "orange", "code": "        ascend(tree)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "98", "colour": "orange", "code": "        return output\n", "error": "none", "author": "tom@organisms.be"}, {"index": "99", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "100", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "101", "colour": "orange", "code": "def get_instances(cls):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "102", "colour": "orange", "code": "    return [x for x in gc.get_objects() if isinstance(x, cls)]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "103", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "104", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "105", "colour": "orange", "code": "class RequestCounter(SimplePlugin):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "106", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "107", "colour": "orange", "code": "    def start(self):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "108", "colour": "green", "code": "        self.count = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "109", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "110", "colour": "orange", "code": "    def before_request(self):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "111", "colour": "orange", "code": "        self.count += 1\n", "error": "none", "author": "tom@organisms.be"}, {"index": "112", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "113", "colour": "orange", "code": "    def after_request(self):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "114", "colour": "orange", "code": "        self.count -=1\n", "error": "none", "author": "tom@organisms.be"}, {"index": "115", "colour": "orange", "code": "request_counter = RequestCounter(cherrypy.engine)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "116", "colour": "orange", "code": "request_counter.subscribe()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "117", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "118", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "119", "colour": "orange", "code": "def get_context(obj):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "120", "colour": "orange", "code": "    if isinstance(obj, _cprequest.Request):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "121", "colour": "orange", "code": "        return \"path=%s;stage=%s\" % (obj.path_info, obj.stage)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "122", "colour": "orange", "code": "    elif isinstance(obj, _cprequest.Response):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "123", "colour": "orange", "code": "        return \"status=%s\" % obj.status\n", "error": "none", "author": "tom@organisms.be"}, {"index": "124", "colour": "orange", "code": "    elif isinstance(obj, _cpwsgi.AppResponse):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "125", "colour": "orange", "code": "        return \"PATH_INFO=%s\" % obj.environ.get('PATH_INFO', '')\n", "error": "none", "author": "tom@organisms.be"}, {"index": "126", "colour": "orange", "code": "    elif hasattr(obj, \"tb_lineno\"):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "127", "colour": "orange", "code": "        return \"tb_lineno=%s\" % obj.tb_lineno\n", "error": "none", "author": "tom@organisms.be"}, {"index": "128", "colour": "orange", "code": "    return \"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "129", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "130", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "131", "colour": "orange", "code": "class GCRoot(object):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "132", "colour": "orange", "code": "    \"\"\"A CherryPy page handler for testing reference leaks.\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "133", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "134", "colour": "orange", "code": "    classes = [(_cprequest.Request, 2, 2,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "135", "colour": "orange", "code": "                \"Should be 1 in this request thread and 1 in the main thread.\"),\n", "error": "none", "author": "tom@organisms.be"}, {"index": "136", "colour": "orange", "code": "               (_cprequest.Response, 2, 2,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "137", "colour": "orange", "code": "                \"Should be 1 in this request thread and 1 in the main thread.\"),\n", "error": "none", "author": "tom@organisms.be"}, {"index": "138", "colour": "orange", "code": "               (_cpwsgi.AppResponse, 1, 1,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "139", "colour": "orange", "code": "                \"Should be 1 in this request thread only.\"),\n", "error": "none", "author": "tom@organisms.be"}, {"index": "140", "colour": "orange", "code": "               ]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "141", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "142", "colour": "blue", "code": "    def index(self):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "143", "colour": "orange", "code": "        return \"Hello, world!\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "144", "colour": "orange", "code": "    index.exposed = True\n", "error": "none", "author": "tom@organisms.be"}, {"index": "145", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "146", "colour": "blue", "code": "    def stats(self):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "147", "colour": "orange", "code": "        output = [\"Statistics:\"]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "148", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "149", "colour": "green", "code": "        for trial in range(10):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "150", "colour": "orange", "code": "            if request_counter.count > 0:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "151", "colour": "orange", "code": "                break\n", "error": "none", "author": "tom@organisms.be"}, {"index": "152", "colour": "orange", "code": "            time.sleep(0.5)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "153", "colour": "orange", "code": "        else:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "154", "colour": "orange", "code": "            output.append(\"\\nNot all requests closed properly.\")\n", "error": "none", "author": "tom@organisms.be"}, {"index": "155", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "156", "colour": "orange", "code": "        # gc_collect isn't perfectly synchronous, because it may\n", "error": "none", "author": "tom@organisms.be"}, {"index": "157", "colour": "orange", "code": "        # break reference cycles that then take time to fully\n", "error": "none", "author": "tom@organisms.be"}, {"index": "158", "colour": "orange", "code": "        # finalize. Call it thrice and hope for the best.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "159", "colour": "orange", "code": "        gc.collect()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "160", "colour": "orange", "code": "        gc.collect()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "161", "colour": "orange", "code": "        unreachable = gc.collect()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "162", "colour": "orange", "code": "        if unreachable:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "163", "colour": "orange", "code": "            if objgraph is not None:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "164", "colour": "orange", "code": "                final = objgraph.by_type('Nondestructible')\n", "error": "none", "author": "tom@organisms.be"}, {"index": "165", "colour": "orange", "code": "                if final:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "166", "colour": "orange", "code": "                    objgraph.show_backrefs(final, filename='finalizers.png')\n", "error": "none", "author": "tom@organisms.be"}, {"index": "167", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "168", "colour": "orange", "code": "            trash = {}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "169", "colour": "orange", "code": "            for x in gc.garbage:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "170", "colour": "orange", "code": "                trash[type(x)] = trash.get(type(x), 0) + 1\n", "error": "none", "author": "tom@organisms.be"}, {"index": "171", "colour": "orange", "code": "            if trash:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "172", "colour": "orange", "code": "                output.insert(0, \"\\n%s unreachable objects:\" % unreachable)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "173", "colour": "orange", "code": "                trash = [(v, k) for k, v in trash.items()]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "174", "colour": "orange", "code": "                trash.sort()\n", "error": "none", "author": "tom@organisms.be"}, {"index": "175", "colour": "orange", "code": "                for pair in trash:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "176", "colour": "orange", "code": "                    output.append(\"    \" + repr(pair))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "177", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "178", "colour": "orange", "code": "        # Check declared classes to verify uncollected instances.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "179", "colour": "orange", "code": "        # These don't have to be part of a cycle; they can be\n", "error": "none", "author": "tom@organisms.be"}, {"index": "180", "colour": "orange", "code": "        # any objects that have unanticipated referrers that keep\n", "error": "none", "author": "tom@organisms.be"}, {"index": "181", "colour": "orange", "code": "        # them from being collected.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "182", "colour": "orange", "code": "        allobjs = {}\n", "error": "none", "author": "tom@organisms.be"}, {"index": "183", "colour": "green", "code": "        for cls, minobj, maxobj, msg in self.classes:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "184", "colour": "orange", "code": "            allobjs[cls] = get_instances(cls)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "185", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "186", "colour": "orange", "code": "        for cls, minobj, maxobj, msg in self.classes:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "187", "colour": "orange", "code": "            objs = allobjs[cls]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "188", "colour": "orange", "code": "            lenobj = len(objs)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "189", "colour": "orange", "code": "            if lenobj < minobj or lenobj > maxobj:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "190", "colour": "orange", "code": "                if minobj == maxobj:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "191", "colour": "orange", "code": "                    output.append(\n", "error": "none", "author": "tom@organisms.be"}, {"index": "192", "colour": "orange", "code": "                        \"\\nExpected %s %r references, got %s.\" %\n", "error": "none", "author": "tom@organisms.be"}, {"index": "193", "colour": "orange", "code": "                        (minobj, cls, lenobj))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "194", "colour": "orange", "code": "                else:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "195", "colour": "orange", "code": "                    output.append(\n", "error": "none", "author": "tom@organisms.be"}, {"index": "196", "colour": "orange", "code": "                        \"\\nExpected %s to %s %r references, got %s.\" %\n", "error": "none", "author": "tom@organisms.be"}, {"index": "197", "colour": "orange", "code": "                        (minobj, maxobj, cls, lenobj))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "198", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "199", "colour": "orange", "code": "                for obj in objs:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "200", "colour": "orange", "code": "                    if objgraph is not None:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "201", "colour": "orange", "code": "                        ig = [id(objs), id(inspect.currentframe())]\n", "error": "none", "author": "tom@organisms.be"}, {"index": "202", "colour": "orange", "code": "                        fname = \"graph_%s_%s.png\" % (cls.__name__, id(obj))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "203", "colour": "orange", "code": "                        objgraph.show_backrefs(\n", "error": "none", "author": "tom@organisms.be"}, {"index": "204", "colour": "orange", "code": "                            obj, extra_ignore=ig, max_depth=4, too_many=20,\n", "error": "none", "author": "tom@organisms.be"}, {"index": "205", "colour": "orange", "code": "                            filename=fname, extra_info=get_context)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "206", "colour": "orange", "code": "                    output.append(\"\\nReferrers for %s (refcount=%s):\" %\n", "error": "none", "author": "tom@organisms.be"}, {"index": "207", "colour": "orange", "code": "                                  (repr(obj), sys.getrefcount(obj)))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "208", "colour": "orange", "code": "                    t = ReferrerTree(ignore=[objs], maxdepth=3)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "209", "colour": "orange", "code": "                    tree = t.ascend(obj)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "210", "colour": "orange", "code": "                    output.extend(t.format(tree))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "211", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "212", "colour": "orange", "code": "        return \"\\n\".join(output)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "213", "colour": "orange", "code": "    stats.exposed = True\n", "error": "none", "author": "tom@organisms.be"}, {"index": "214", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}]]}