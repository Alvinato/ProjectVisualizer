{"path": "/home/asumal/git/cs410/pattern/pattern/vector/svm/libsvmutil.py", "lines": [[{"error": "C", "line": "1", "code": "#!/usr/bin/env python\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "2", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "3", "code": "from libsvm import *\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "4", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "5", "code": "import os, sys\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "6", "code": "sys.path = [os.path.dirname(os.path.abspath(__file__))] + sys.path \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "7", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "8", "code": "def svm_read_problem(data_file_name):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "9", "code": "\t\"\"\"\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "10", "code": "\tsvm_read_problem(data_file_name) -> [y, x]\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "11", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "12", "code": "\tRead LIBSVM-format data from data_file_name and return labels y\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "13", "code": "\tand data instances x.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "14", "code": "\t\"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "15", "code": "\tprob_y = []\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "16", "code": "\tprob_x = []\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "17", "code": "\tfor line in open(data_file_name):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "18", "code": "\t\tline = line.split(None, 1)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "19", "code": "\t\t# In case an instance with all zero features\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "20", "code": "\t\tif len(line) == 1: line += ['']\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "21", "code": "\t\tlabel, features = line\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "22", "code": "\t\txi = {}\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "23", "code": "\t\tfor e in features.split():\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "24", "code": "\t\t\tind, val = e.split(\":\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "25", "code": "\t\t\txi[int(ind)] = float(val)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "26", "code": "\t\tprob_y += [float(label)]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "27", "code": "\t\tprob_x += [xi]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "28", "code": "\treturn (prob_y, prob_x)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "29", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "30", "code": "def svm_load_model(model_file_name):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "31", "code": "\t\"\"\"\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "32", "code": "\tsvm_load_model(model_file_name) -> model\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "33", "code": "\t\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "34", "code": "\tLoad a LIBSVM model from model_file_name and return.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "35", "code": "\t\"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "36", "code": "\tmodel = libsvm.svm_load_model(model_file_name.encode())\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "37", "code": "\tif not model: \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "38", "code": "\t\tprint(\"can't open model file %s\" % model_file_name)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "39", "code": "\t\treturn None\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "40", "code": "\tmodel = toPyModel(model)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "41", "code": "\treturn model\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "42", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "43", "code": "def svm_save_model(model_file_name, model):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "44", "code": "\t\"\"\"\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "45", "code": "\tsvm_save_model(model_file_name, model) -> None\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "46", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "47", "code": "\tSave a LIBSVM model to the file model_file_name.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "48", "code": "\t\"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "49", "code": "\tlibsvm.svm_save_model(model_file_name.encode(), model)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "50", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "51", "code": "def evaluations(ty, pv):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "52", "code": "\t\"\"\"\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "53", "code": "\tevaluations(ty, pv) -> (ACC, MSE, SCC)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "54", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "55", "code": "\tCalculate accuracy, mean squared error and squared correlation coefficient\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "56", "code": "\tusing the true values (ty) and predicted values (pv).\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "57", "code": "\t\"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "58", "code": "\tif len(ty) != len(pv):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "59", "code": "\t\traise ValueError(\"len(ty) must equal to len(pv)\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "60", "code": "\ttotal_correct = total_error = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "61", "code": "\tsumv = sumy = sumvv = sumyy = sumvy = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "62", "code": "\tfor v, y in zip(pv, ty):\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "63", "code": "\t\tif y == v: \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "64", "code": "\t\t\ttotal_correct += 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "65", "code": "\t\ttotal_error += (v-y)*(v-y)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "66", "code": "\t\tsumv += v\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "67", "code": "\t\tsumy += y\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "68", "code": "\t\tsumvv += v*v\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "69", "code": "\t\tsumyy += y*y\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "70", "code": "\t\tsumvy += v*y \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "71", "code": "\tl = len(ty)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "72", "code": "\tACC = 100.0*total_correct/l\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "73", "code": "\tMSE = total_error/l\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "74", "code": "\ttry:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "75", "code": "\t\tSCC = ((l*sumvy-sumv*sumy)*(l*sumvy-sumv*sumy))/((l*sumvv-sumv*sumv)*(l*sumyy-sumy*sumy))\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "76", "code": "\texcept:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "77", "code": "\t\tSCC = float('nan')\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "78", "code": "\treturn (ACC, MSE, SCC)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "79", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "80", "code": "def svm_train(arg1, arg2=None, arg3=None):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "W", "line": "81", "code": "\t\"\"\"\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "82", "code": "\tsvm_train(y, x [, options]) -> model | ACC | MSE \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "83", "code": "\tsvm_train(prob [, options]) -> model | ACC | MSE \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "84", "code": "\tsvm_train(prob, param) -> model | ACC| MSE \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "85", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "86", "code": "\tTrain an SVM model from data (y, x) or an svm_problem prob using\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "87", "code": "\t'options' or an svm_parameter param. \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "88", "code": "\tIf '-v' is specified in 'options' (i.e., cross validation)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "89", "code": "\teither accuracy (ACC) or mean-squared error (MSE) is returned.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "90", "code": "\toptions:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "91", "code": "\t    -s svm_type : set type of SVM (default 0)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "92", "code": "\t        0 -- C-SVC\t\t(multi-class classification)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "93", "code": "\t        1 -- nu-SVC\t\t(multi-class classification)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "94", "code": "\t        2 -- one-class SVM\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "95", "code": "\t        3 -- epsilon-SVR\t(regression)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "96", "code": "\t        4 -- nu-SVR\t\t(regression)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "97", "code": "\t    -t kernel_type : set type of kernel function (default 2)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "98", "code": "\t        0 -- linear: u'*v\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "99", "code": "\t        1 -- polynomial: (gamma*u'*v + coef0)^degree\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "100", "code": "\t        2 -- radial basis function: exp(-gamma*|u-v|^2)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "101", "code": "\t        3 -- sigmoid: tanh(gamma*u'*v + coef0)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "102", "code": "\t        4 -- precomputed kernel (kernel values in training_set_file)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "103", "code": "\t    -d degree : set degree in kernel function (default 3)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "104", "code": "\t    -g gamma : set gamma in kernel function (default 1/num_features)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "105", "code": "\t    -r coef0 : set coef0 in kernel function (default 0)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "106", "code": "\t    -c cost : set the parameter C of C-SVC, epsilon-SVR, and nu-SVR (default 1)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "107", "code": "\t    -n nu : set the parameter nu of nu-SVC, one-class SVM, and nu-SVR (default 0.5)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "108", "code": "\t    -p epsilon : set the epsilon in loss function of epsilon-SVR (default 0.1)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "109", "code": "\t    -m cachesize : set cache memory size in MB (default 100)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "110", "code": "\t    -e epsilon : set tolerance of termination criterion (default 0.001)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "111", "code": "\t    -h shrinking : whether to use the shrinking heuristics, 0 or 1 (default 1)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "112", "code": "\t    -b probability_estimates : whether to train a SVC or SVR model for probability estimates, 0 or 1 (default 0)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "113", "code": "\t    -wi weight : set the parameter C of class i to weight*C, for C-SVC (default 1)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "114", "code": "\t    -v n: n-fold cross validation mode\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "115", "code": "\t    -q : quiet mode (no outputs)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "116", "code": "\t\"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "117", "code": "\tprob, param = None, None\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "118", "code": "\tif isinstance(arg1, (list, tuple)):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "119", "code": "\t\tassert isinstance(arg2, (list, tuple))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "120", "code": "\t\ty, x, options = arg1, arg2, arg3\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "121", "code": "\t\tparam = svm_parameter(options)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "E", "line": "122", "code": "\t\tprob = svm_problem(y, x, isKernel=(param.kernel_type == PRECOMPUTED))\n", "colour": "yellow", "author": "tom@organisms.be"}, {"error": "W", "line": "123", "code": "\telif isinstance(arg1, svm_problem):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "124", "code": "\t\tprob = arg1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "125", "code": "\t\tif isinstance(arg2, svm_parameter):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "126", "code": "\t\t\tparam = arg2\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "127", "code": "\t\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "128", "code": "\t\t\tparam = svm_parameter(arg2)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "129", "code": "\tif prob == None or param == None:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "130", "code": "\t\traise TypeError(\"Wrong types for the arguments\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "131", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "E", "line": "132", "code": "\tif param.kernel_type == PRECOMPUTED:\n", "colour": "yellow", "author": "tom@organisms.be"}, {"error": "C", "line": "133", "code": "\t\tfor xi in prob.x_space:\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "134", "code": "\t\t\tidx, val = xi[0].index, xi[0].value\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "135", "code": "\t\t\tif xi[0].index != 0:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "136", "code": "\t\t\t\traise ValueError('Wrong input format: first column must be 0:sample_serial_number')\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "137", "code": "\t\t\tif val <= 0 or val > prob.n:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "138", "code": "\t\t\t\traise ValueError('Wrong input format: sample_serial_number out of range')\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "139", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "140", "code": "\tif param.gamma == 0 and prob.n > 0: \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "141", "code": "\t\tparam.gamma = 1.0 / prob.n\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "142", "code": "\tlibsvm.svm_set_print_string_function(param.print_func)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "143", "code": "\terr_msg = libsvm.svm_check_parameter(prob, param)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "144", "code": "\tif err_msg:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "145", "code": "\t\traise ValueError('Error: %s' % err_msg)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "146", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "147", "code": "\tif param.cross_validation:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "148", "code": "\t\tl, nr_fold = prob.l, param.nr_fold\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "149", "code": "\t\ttarget = (c_double * l)()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "150", "code": "\t\tlibsvm.svm_cross_validation(prob, param, nr_fold, target)\t\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "151", "code": "\t\tACC, MSE, SCC = evaluations(prob.y[:l], target[:l])\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "E", "line": "152", "code": "\t\tif param.svm_type in [EPSILON_SVR, NU_SVR]:\n", "colour": "yellow", "author": "tom@organisms.be"}, {"error": "C", "line": "153", "code": "\t\t\tprint(\"Cross Validation Mean squared error = %g\" % MSE)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "154", "code": "\t\t\tprint(\"Cross Validation Squared correlation coefficient = %g\" % SCC)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "155", "code": "\t\t\treturn MSE\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "156", "code": "\t\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "157", "code": "\t\t\tprint(\"Cross Validation Accuracy = %g%%\" % ACC)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "158", "code": "\t\t\treturn ACC\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "159", "code": "\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "160", "code": "\t\tm = libsvm.svm_train(prob, param)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "161", "code": "\t\tm = toPyModel(m)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "162", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "163", "code": "\t\t# If prob is destroyed, data including SVs pointed by m can remain.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "164", "code": "\t\tm.x_space = prob.x_space\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "165", "code": "\t\treturn m\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "166", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "R", "line": "167", "code": "def svm_predict(y, x, m, options=\"\"):\n", "colour": "green", "author": "tom@organisms.be"}, {"error": "W", "line": "168", "code": "\t\"\"\"\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "169", "code": "\tsvm_predict(y, x, m [, options]) -> (p_labels, p_acc, p_vals)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "170", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "171", "code": "\tPredict data (y, x) with the SVM model m. \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "172", "code": "\toptions: \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "173", "code": "\t    -b probability_estimates: whether to predict probability estimates, \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "174", "code": "\t        0 or 1 (default 0); for one-class SVM only 0 is supported.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "175", "code": "\t    -q : quiet mode (no outputs).\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "176", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "177", "code": "\tThe return tuple contains\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "178", "code": "\tp_labels: a list of predicted labels\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "179", "code": "\tp_acc: a tuple including  accuracy (for classification), mean-squared \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "180", "code": "\t       error, and squared correlation coefficient (for regression).\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "181", "code": "\tp_vals: a list of decision values or probability estimates (if '-b 1' \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "182", "code": "\t        is specified). If k is the number of classes, for decision values,\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "183", "code": "\t        each element includes results of predicting k(k-1)/2 binary-class\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "184", "code": "\t        SVMs. For probabilities, each element contains k values indicating\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "185", "code": "\t        the probability that the testing instance is in each class.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "186", "code": "\t        Note that the order of classes here is the same as 'model.label'\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "187", "code": "\t        field in the model structure.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "188", "code": "\t\"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "189", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "190", "code": "\tdef info(s):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "191", "code": "\t\tprint(s)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "192", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "193", "code": "\tpredict_probability = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "194", "code": "\targv = options.split()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "195", "code": "\ti = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "196", "code": "\twhile i < len(argv):\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "197", "code": "\t\tif argv[i] == '-b':\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "198", "code": "\t\t\ti += 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "199", "code": "\t\t\tpredict_probability = int(argv[i])\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "200", "code": "\t\telif argv[i] == '-q':\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "201", "code": "\t\t\tinfo = print_null\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "202", "code": "\t\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "203", "code": "\t\t\traise ValueError(\"Wrong options\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "204", "code": "\t\ti+=1\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "205", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "206", "code": "\tsvm_type = m.get_svm_type()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "207", "code": "\tis_prob_model = m.is_probability_model()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "208", "code": "\tnr_class = m.get_nr_class()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "209", "code": "\tpred_labels = []\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "210", "code": "\tpred_values = []\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "211", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "212", "code": "\tif predict_probability:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "213", "code": "\t\tif not is_prob_model:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "214", "code": "\t\t\traise ValueError(\"Model does not support probabiliy estimates\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "215", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "E", "line": "216", "code": "\t\tif svm_type in [NU_SVR, EPSILON_SVR]:\n", "colour": "yellow", "author": "tom@organisms.be"}, {"error": "W", "line": "217", "code": "\t\t\tinfo(\"Prob. model for test data: target value = predicted value + z,\\n\"\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "218", "code": "\t\t\t\"z: Laplace distribution e^(-|z|/sigma)/(2sigma),sigma=%g\" % m.get_svr_probability());\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "219", "code": "\t\t\tnr_class = 0\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "220", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "221", "code": "\t\tprob_estimates = (c_double * nr_class)()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "222", "code": "\t\tfor xi in x:\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "223", "code": "\t\t\txi, idx = gen_svm_nodearray(xi, isKernel=(m.param.kernel_type == PRECOMPUTED))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "224", "code": "\t\t\tlabel = libsvm.svm_predict_probability(m, xi, prob_estimates)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "225", "code": "\t\t\tvalues = prob_estimates[:nr_class]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "226", "code": "\t\t\tpred_labels += [label]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "227", "code": "\t\t\tpred_values += [values]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "228", "code": "\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "229", "code": "\t\tif is_prob_model:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "230", "code": "\t\t\tinfo(\"Model supports probability estimates, but disabled in predicton.\")\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "E", "line": "231", "code": "\t\tif svm_type in (ONE_CLASS, EPSILON_SVR, NU_SVC):\n", "colour": "yellow", "author": "tom@organisms.be"}, {"error": "W", "line": "232", "code": "\t\t\tnr_classifier = 1\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "233", "code": "\t\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "234", "code": "\t\t\tnr_classifier = nr_class*(nr_class-1)//2\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "235", "code": "\t\tdec_values = (c_double * nr_classifier)()\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "236", "code": "\t\tfor xi in x:\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "E", "line": "237", "code": "\t\t\txi, idx = gen_svm_nodearray(xi, isKernel=(m.param.kernel_type == PRECOMPUTED))\n", "colour": "yellow", "author": "tom@organisms.be"}, {"error": "W", "line": "238", "code": "\t\t\tlabel = libsvm.svm_predict_values(m, xi, dec_values)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "C", "line": "239", "code": "\t\t\tif(nr_class == 1): \n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "W", "line": "240", "code": "\t\t\t\tvalues = [1]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "241", "code": "\t\t\telse: \n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "242", "code": "\t\t\t\tvalues = dec_values[:nr_classifier]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "243", "code": "\t\t\tpred_labels += [label]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "244", "code": "\t\t\tpred_values += [values]\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "245", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "246", "code": "\tACC, MSE, SCC = evaluations(y, pred_labels)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "C", "line": "247", "code": "\tl = len(y)\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "E", "line": "248", "code": "\tif svm_type in [EPSILON_SVR, NU_SVR]:\n", "colour": "yellow", "author": "tom@organisms.be"}, {"error": "W", "line": "249", "code": "\t\tinfo(\"Mean squared error = %g (regression)\" % MSE)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "250", "code": "\t\tinfo(\"Squared correlation coefficient = %g (regression)\" % SCC)\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "251", "code": "\telse:\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "W", "line": "252", "code": "\t\tinfo(\"Accuracy = %g%% (%d/%d) (classification)\" % (ACC, int(l*ACC/100), l))\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "253", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "254", "code": "\treturn pred_labels, (ACC, MSE, SCC), pred_values\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "255", "code": "\n", "colour": "black", "author": "tom@organisms.be"}]]}