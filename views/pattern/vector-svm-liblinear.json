{"path": "/home/asumal/git/cs410/pattern/pattern/vector/svm/liblinear.py", "lines": [[{"index": "1", "colour": "orange", "code": "#!/usr/bin/env python\n", "error": "none", "author": "tom@organisms.be"}, {"index": "2", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "3", "colour": "green", "code": "from ctypes import *\n", "error": "W", "author": "tom@organisms.be"}, {"index": "4", "colour": "orange", "code": "from ctypes.util import find_library\n", "error": "none", "author": "tom@organisms.be"}, {"index": "5", "colour": "orange", "code": "from os import path\n", "error": "none", "author": "tom@organisms.be"}, {"index": "6", "colour": "orange", "code": "import sys\n", "error": "none", "author": "tom@organisms.be"}, {"index": "7", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "8", "colour": "orange", "code": "# For unix the prefix 'lib' is not considered.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "9", "colour": "orange", "code": "if find_library('linear'):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "10", "colour": "green", "code": "\tliblinear = CDLL(find_library('linear'))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "11", "colour": "orange", "code": "elif find_library('liblinear'):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "12", "colour": "green", "code": "\tliblinear = CDLL(find_library('liblinear'))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "13", "colour": "orange", "code": "else:\n", "error": "none", "author": "tom@organisms.be"}, {"index": "14", "colour": "green", "code": "\tb = False\n", "error": "W", "author": "tom@organisms.be"}, {"index": "15", "colour": "green", "code": "\tfor v in (\"liblinear-1.93\",):  # LIBLINEAR 1.93\n", "error": "W", "author": "tom@organisms.be"}, {"index": "16", "colour": "green", "code": "\t\tfor binary in (\n", "error": "W", "author": "tom@organisms.be"}, {"index": "17", "colour": "orange", "code": "\t\t  # If you have OS X 32-bit, you need a 32-bit Python and liblinear-mac32.so.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "18", "colour": "orange", "code": "\t\t  # If you have OS X 32-bit with 64-bit Python, \n", "error": "none", "author": "tom@organisms.be"}, {"index": "19", "colour": "orange", "code": "\t\t  # it will try to load liblinear-mac64.so which fails since OS X is 32-bit.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "20", "colour": "orange", "code": "\t\t  # It won't load liblinear-mac32.so since Python is 64-bit.\n", "error": "none", "author": "tom@organisms.be"}, {"index": "21", "colour": "orange", "code": "\t\t  \"liblinear-win64.dll\",   # 1) 64-bit Windows\n", "error": "none", "author": "tom@organisms.be"}, {"index": "22", "colour": "orange", "code": "\t\t  \"liblinear-win32.dll\",   # 2) 32-bit Windows\n", "error": "none", "author": "tom@organisms.be"}, {"index": "23", "colour": "orange", "code": "\t\t  \"liblinear-mac32.so\",    # 3) 32-bit Mac OS X\n", "error": "none", "author": "tom@organisms.be"}, {"index": "24", "colour": "orange", "code": "\t\t  \"liblinear-mac64.so\",    # 4) 64-bit Mac OS X\n", "error": "none", "author": "tom@organisms.be"}, {"index": "25", "colour": "orange", "code": "\t\t  \"liblinear-ubuntu64.so\", # 5) 64-bit Linux Ubuntu\n", "error": "none", "author": "tom@organisms.be"}, {"index": "26", "colour": "orange", "code": "\t\t  \"liblinear.so\",          # 6) User-compiled Mac / Linux\n", "error": "none", "author": "tom@organisms.be"}, {"index": "27", "colour": "orange", "code": "\t\t  \"liblinear.dll\"):        # 7) User-compiled Windows\n", "error": "none", "author": "tom@organisms.be"}, {"index": "28", "colour": "green", "code": "\t\t\tif sys.platform.startswith(\"win\") and binary.endswith(\".so\"):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "29", "colour": "green", "code": "\t\t\t\tcontinue\n", "error": "W", "author": "tom@organisms.be"}, {"index": "30", "colour": "green", "code": "\t\t\ttry:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "31", "colour": "green", "code": "\t\t\t\tliblinear = CDLL(path.join(path.dirname(__file__), v, binary)); b=True; break\n", "error": "W", "author": "tom@organisms.be"}, {"index": "32", "colour": "green", "code": "\t\t\texcept OSError as e:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "33", "colour": "green", "code": "\t\t\t\tcontinue\n", "error": "W", "author": "tom@organisms.be"}, {"index": "34", "colour": "green", "code": "\t\tif b: break\n", "error": "W", "author": "tom@organisms.be"}, {"index": "35", "colour": "green", "code": "\tif not b:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "36", "colour": "green", "code": "\t\traise ImportError(\"can't import liblinear (%sbit-%s)\" % (\n", "error": "W", "author": "tom@organisms.be"}, {"index": "37", "colour": "orange", "code": "\t\t\tsizeof(c_voidp) * 8, \n", "error": "none", "author": "tom@organisms.be"}, {"index": "38", "colour": "orange", "code": "\t\t\tsys.platform\n", "error": "none", "author": "tom@organisms.be"}, {"index": "39", "colour": "orange", "code": "\t\t))\n", "error": "none", "author": "tom@organisms.be"}, {"index": "40", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "41", "colour": "orange", "code": "# Construct constants\n", "error": "none", "author": "tom@organisms.be"}, {"index": "42", "colour": "orange", "code": "SOLVER_TYPE = ['L2R_LR', 'L2R_L2LOSS_SVC_DUAL', 'L2R_L2LOSS_SVC', 'L2R_L1LOSS_SVC_DUAL',\\\n", "error": "none", "author": "tom@organisms.be"}, {"index": "43", "colour": "orange", "code": "\t\t'MCSVM_CS', 'L1R_L2LOSS_SVC', 'L1R_LR', 'L2R_LR_DUAL', \\\n", "error": "none", "author": "tom@organisms.be"}, {"index": "44", "colour": "orange", "code": "\t\tNone, None, None, \\\n", "error": "none", "author": "tom@organisms.be"}, {"index": "45", "colour": "orange", "code": "\t\t'L2R_L2LOSS_SVR', 'L2R_L2LOSS_SVR_DUAL', 'L2R_L1LOSS_SVR_DUAL']\n", "error": "none", "author": "tom@organisms.be"}, {"index": "46", "colour": "orange", "code": "for i, s in enumerate(SOLVER_TYPE): \n", "error": "none", "author": "tom@organisms.be"}, {"index": "47", "colour": "green", "code": "\tif s is not None: exec(\"%s = %d\" % (s , i))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "48", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "49", "colour": "orange", "code": "PRINT_STRING_FUN = CFUNCTYPE(None, c_char_p)\n", "error": "none", "author": "tom@organisms.be"}, {"index": "50", "colour": "green", "code": "def print_null(s): \n", "error": "W", "author": "tom@organisms.be"}, {"index": "51", "colour": "green", "code": "\treturn \n", "error": "W", "author": "tom@organisms.be"}, {"index": "52", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "53", "colour": "orange", "code": "def genFields(names, types): \n", "error": "none", "author": "tom@organisms.be"}, {"index": "54", "colour": "green", "code": "\treturn list(zip(names, types))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "55", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "56", "colour": "orange", "code": "def fillprototype(f, restype, argtypes): \n", "error": "none", "author": "tom@organisms.be"}, {"index": "57", "colour": "green", "code": "\tf.restype = restype\n", "error": "W", "author": "tom@organisms.be"}, {"index": "58", "colour": "green", "code": "\tf.argtypes = argtypes\n", "error": "W", "author": "tom@organisms.be"}, {"index": "59", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "60", "colour": "blue", "code": "class feature_node(Structure):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "61", "colour": "green", "code": "\t_names = [\"index\", \"value\"]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "62", "colour": "green", "code": "\t_types = [c_int, c_double]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "63", "colour": "green", "code": "\t_fields_ = genFields(_names, _types)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "64", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "65", "colour": "green", "code": "\tdef __str__(self):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "66", "colour": "green", "code": "\t\treturn '%d:%g' % (self.index, self.value)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "67", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "68", "colour": "orange", "code": "def gen_feature_nodearray(xi, feature_max=None, issparse=True):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "69", "colour": "green", "code": "\tif isinstance(xi, dict):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "70", "colour": "green", "code": "\t\tindex_range = xi.keys()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "71", "colour": "green", "code": "\telif isinstance(xi, (list, tuple)):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "72", "colour": "green", "code": "\t\txi = [0] + xi  # idx should start from 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "73", "colour": "green", "code": "\t\tindex_range = range(1, len(xi))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "74", "colour": "green", "code": "\telse:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "75", "colour": "green", "code": "\t\traise TypeError('xi should be a dictionary, list or tuple')\n", "error": "W", "author": "tom@organisms.be"}, {"index": "76", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "77", "colour": "green", "code": "\tif feature_max:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "78", "colour": "green", "code": "\t\tassert(isinstance(feature_max, int))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "79", "colour": "green", "code": "\t\tindex_range = filter(lambda j: j <= feature_max, index_range)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "80", "colour": "green", "code": "\tif issparse: \n", "error": "W", "author": "tom@organisms.be"}, {"index": "81", "colour": "green", "code": "\t\tindex_range = filter(lambda j:xi[j] != 0, index_range)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "82", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "83", "colour": "green", "code": "\tindex_range = sorted(index_range)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "84", "colour": "green", "code": "\tret = (feature_node * (len(index_range)+2))()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "85", "colour": "green", "code": "\tret[-1].index = -1 # for bias term\n", "error": "W", "author": "tom@organisms.be"}, {"index": "86", "colour": "green", "code": "\tret[-2].index = -1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "87", "colour": "green", "code": "\tfor idx, j in enumerate(index_range):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "88", "colour": "green", "code": "\t\tret[idx].index = j\n", "error": "W", "author": "tom@organisms.be"}, {"index": "89", "colour": "green", "code": "\t\tret[idx].value = xi[j]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "90", "colour": "green", "code": "\tmax_idx = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "91", "colour": "green", "code": "\tif index_range : \n", "error": "W", "author": "tom@organisms.be"}, {"index": "92", "colour": "green", "code": "\t\tmax_idx = index_range[-1]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "93", "colour": "green", "code": "\treturn ret, max_idx\n", "error": "W", "author": "tom@organisms.be"}, {"index": "94", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "95", "colour": "blue", "code": "class problem(Structure):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "96", "colour": "green", "code": "\t_names = [\"l\", \"n\", \"y\", \"x\", \"bias\"]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "97", "colour": "green", "code": "\t_types = [c_int, c_int, POINTER(c_double), POINTER(POINTER(feature_node)), c_double]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "98", "colour": "green", "code": "\t_fields_ = genFields(_names, _types)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "99", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "100", "colour": "green", "code": "\tdef __init__(self, y, x, bias = -1):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "101", "colour": "green", "code": "\t\tif len(y) != len(x) :\n", "error": "W", "author": "tom@organisms.be"}, {"index": "102", "colour": "green", "code": "\t\t\traise ValueError(\"len(y) != len(x)\")\n", "error": "W", "author": "tom@organisms.be"}, {"index": "103", "colour": "green", "code": "\t\tself.l = l = len(y)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "104", "colour": "green", "code": "\t\tself.bias = -1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "105", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "106", "colour": "green", "code": "\t\tmax_idx = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "107", "colour": "green", "code": "\t\tx_space = self.x_space = []\n", "error": "W", "author": "tom@organisms.be"}, {"index": "108", "colour": "green", "code": "\t\tfor i, xi in enumerate(x):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "109", "colour": "green", "code": "\t\t\ttmp_xi, tmp_idx = gen_feature_nodearray(xi)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "110", "colour": "green", "code": "\t\t\tx_space += [tmp_xi]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "111", "colour": "green", "code": "\t\t\tmax_idx = max(max_idx, tmp_idx)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "112", "colour": "green", "code": "\t\tself.n = max_idx\n", "error": "W", "author": "tom@organisms.be"}, {"index": "113", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "114", "colour": "green", "code": "\t\tself.y = (c_double * l)()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "115", "colour": "green", "code": "\t\tfor i, yi in enumerate(y): self.y[i] = y[i]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "116", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "117", "colour": "green", "code": "\t\tself.x = (POINTER(feature_node) * l)() \n", "error": "W", "author": "tom@organisms.be"}, {"index": "118", "colour": "green", "code": "\t\tfor i, xi in enumerate(self.x_space): self.x[i] = xi\n", "error": "W", "author": "tom@organisms.be"}, {"index": "119", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "120", "colour": "green", "code": "\t\tself.set_bias(bias)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "121", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "122", "colour": "green", "code": "\tdef set_bias(self, bias):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "123", "colour": "green", "code": "\t\tif self.bias == bias:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "124", "colour": "green", "code": "\t\t\treturn \n", "error": "W", "author": "tom@organisms.be"}, {"index": "125", "colour": "green", "code": "\t\tif bias >= 0 and self.bias < 0: \n", "error": "W", "author": "tom@organisms.be"}, {"index": "126", "colour": "green", "code": "\t\t\tself.n += 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "127", "colour": "green", "code": "\t\t\tnode = feature_node(self.n, bias)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "128", "colour": "green", "code": "\t\tif bias < 0 and self.bias >= 0: \n", "error": "W", "author": "tom@organisms.be"}, {"index": "129", "colour": "green", "code": "\t\t\tself.n -= 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "130", "colour": "green", "code": "\t\t\tnode = feature_node(-1, bias)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "131", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "132", "colour": "green", "code": "\t\tfor xi in self.x_space:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "133", "colour": "green", "code": "\t\t\txi[-2] = node\n", "error": "W", "author": "tom@organisms.be"}, {"index": "134", "colour": "green", "code": "\t\tself.bias = bias\n", "error": "W", "author": "tom@organisms.be"}, {"index": "135", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "136", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "137", "colour": "blue", "code": "class parameter(Structure):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "138", "colour": "green", "code": "\t_names = [\"solver_type\", \"eps\", \"C\", \"nr_weight\", \"weight_label\", \"weight\", \"p\"]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "139", "colour": "green", "code": "\t_types = [c_int, c_double, c_double, c_int, POINTER(c_int), POINTER(c_double), c_double]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "140", "colour": "green", "code": "\t_fields_ = genFields(_names, _types)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "141", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "142", "colour": "green", "code": "\tdef __init__(self, options = None):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "143", "colour": "green", "code": "\t\tif options == None:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "144", "colour": "green", "code": "\t\t\toptions = ''\n", "error": "W", "author": "tom@organisms.be"}, {"index": "145", "colour": "green", "code": "\t\tself.parse_options(options)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "146", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "147", "colour": "green", "code": "\tdef __str__(self):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "148", "colour": "green", "code": "\t\ts = ''\n", "error": "W", "author": "tom@organisms.be"}, {"index": "149", "colour": "green", "code": "\t\tattrs = parameter._names + list(self.__dict__.keys())\n", "error": "W", "author": "tom@organisms.be"}, {"index": "150", "colour": "green", "code": "\t\tvalues = map(lambda attr: getattr(self, attr), attrs) \n", "error": "W", "author": "tom@organisms.be"}, {"index": "151", "colour": "green", "code": "\t\tfor attr, val in zip(attrs, values):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "152", "colour": "green", "code": "\t\t\ts += (' %s: %s\\n' % (attr, val))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "153", "colour": "green", "code": "\t\ts = s.strip()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "154", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "155", "colour": "green", "code": "\t\treturn s\n", "error": "W", "author": "tom@organisms.be"}, {"index": "156", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "157", "colour": "green", "code": "\tdef set_to_default_values(self):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "158", "colour": "green", "code": "\t\tself.solver_type = L2R_L2LOSS_SVC_DUAL\n", "error": "W", "author": "tom@organisms.be"}, {"index": "159", "colour": "green", "code": "\t\tself.eps = float('inf')\n", "error": "W", "author": "tom@organisms.be"}, {"index": "160", "colour": "green", "code": "\t\tself.C = 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "161", "colour": "green", "code": "\t\tself.p = 0.1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "162", "colour": "green", "code": "\t\tself.nr_weight = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "163", "colour": "green", "code": "\t\tself.weight_label = (c_int * 0)()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "164", "colour": "green", "code": "\t\tself.weight = (c_double * 0)()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "165", "colour": "green", "code": "\t\tself.bias = -1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "166", "colour": "green", "code": "\t\tself.cross_validation = False\n", "error": "W", "author": "tom@organisms.be"}, {"index": "167", "colour": "green", "code": "\t\tself.nr_fold = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "168", "colour": "green", "code": "\t\tself.print_func = None\n", "error": "W", "author": "tom@organisms.be"}, {"index": "169", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "170", "colour": "blue", "code": "\tdef parse_options(self, options):\n", "error": "R", "author": "tom@organisms.be"}, {"index": "171", "colour": "green", "code": "\t\tif isinstance(options, list):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "172", "colour": "green", "code": "\t\t\targv = options\n", "error": "W", "author": "tom@organisms.be"}, {"index": "173", "colour": "green", "code": "\t\telif isinstance(options, str):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "174", "colour": "green", "code": "\t\t\targv = options.split()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "175", "colour": "green", "code": "\t\telse:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "176", "colour": "green", "code": "\t\t\traise TypeError(\"arg 1 should be a list or a str.\")\n", "error": "W", "author": "tom@organisms.be"}, {"index": "177", "colour": "green", "code": "\t\tself.set_to_default_values()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "178", "colour": "green", "code": "\t\tself.print_func = cast(None, PRINT_STRING_FUN)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "179", "colour": "green", "code": "\t\tweight_label = []\n", "error": "W", "author": "tom@organisms.be"}, {"index": "180", "colour": "green", "code": "\t\tweight = []\n", "error": "W", "author": "tom@organisms.be"}, {"index": "181", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "182", "colour": "green", "code": "\t\ti = 0\n", "error": "W", "author": "tom@organisms.be"}, {"index": "183", "colour": "green", "code": "\t\twhile i < len(argv) :\n", "error": "W", "author": "tom@organisms.be"}, {"index": "184", "colour": "green", "code": "\t\t\tif argv[i] == \"-s\":\n", "error": "W", "author": "tom@organisms.be"}, {"index": "185", "colour": "green", "code": "\t\t\t\ti = i + 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "186", "colour": "green", "code": "\t\t\t\tself.solver_type = int(argv[i])\n", "error": "W", "author": "tom@organisms.be"}, {"index": "187", "colour": "green", "code": "\t\t\telif argv[i] == \"-c\":\n", "error": "W", "author": "tom@organisms.be"}, {"index": "188", "colour": "green", "code": "\t\t\t\ti = i + 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "189", "colour": "green", "code": "\t\t\t\tself.C = float(argv[i])\n", "error": "W", "author": "tom@organisms.be"}, {"index": "190", "colour": "green", "code": "\t\t\telif argv[i] == \"-p\":\n", "error": "W", "author": "tom@organisms.be"}, {"index": "191", "colour": "green", "code": "\t\t\t\ti = i + 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "192", "colour": "green", "code": "\t\t\t\tself.p = float(argv[i])\n", "error": "W", "author": "tom@organisms.be"}, {"index": "193", "colour": "green", "code": "\t\t\telif argv[i] == \"-e\":\n", "error": "W", "author": "tom@organisms.be"}, {"index": "194", "colour": "green", "code": "\t\t\t\ti = i + 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "195", "colour": "green", "code": "\t\t\t\tself.eps = float(argv[i])\n", "error": "W", "author": "tom@organisms.be"}, {"index": "196", "colour": "green", "code": "\t\t\telif argv[i] == \"-B\":\n", "error": "W", "author": "tom@organisms.be"}, {"index": "197", "colour": "green", "code": "\t\t\t\ti = i + 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "198", "colour": "green", "code": "\t\t\t\tself.bias = float(argv[i])\n", "error": "W", "author": "tom@organisms.be"}, {"index": "199", "colour": "green", "code": "\t\t\telif argv[i] == \"-v\":\n", "error": "W", "author": "tom@organisms.be"}, {"index": "200", "colour": "green", "code": "\t\t\t\ti = i + 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "201", "colour": "green", "code": "\t\t\t\tself.cross_validation = 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "202", "colour": "green", "code": "\t\t\t\tself.nr_fold = int(argv[i])\n", "error": "W", "author": "tom@organisms.be"}, {"index": "203", "colour": "green", "code": "\t\t\t\tif self.nr_fold < 2 :\n", "error": "W", "author": "tom@organisms.be"}, {"index": "204", "colour": "green", "code": "\t\t\t\t\traise ValueError(\"n-fold cross validation: n must >= 2\")\n", "error": "W", "author": "tom@organisms.be"}, {"index": "205", "colour": "green", "code": "\t\t\telif argv[i].startswith(\"-w\"):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "206", "colour": "green", "code": "\t\t\t\ti = i + 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "207", "colour": "green", "code": "\t\t\t\tself.nr_weight += 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "208", "colour": "green", "code": "\t\t\t\tnr_weight = self.nr_weight\n", "error": "W", "author": "tom@organisms.be"}, {"index": "209", "colour": "green", "code": "\t\t\t\tweight_label += [int(argv[i-1][2:])]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "210", "colour": "green", "code": "\t\t\t\tweight += [float(argv[i])]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "211", "colour": "green", "code": "\t\t\telif argv[i] == \"-q\":\n", "error": "W", "author": "tom@organisms.be"}, {"index": "212", "colour": "green", "code": "\t\t\t\tself.print_func = PRINT_STRING_FUN(print_null)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "213", "colour": "green", "code": "\t\t\telse :\n", "error": "W", "author": "tom@organisms.be"}, {"index": "214", "colour": "green", "code": "\t\t\t\traise ValueError(\"Wrong options\")\n", "error": "W", "author": "tom@organisms.be"}, {"index": "215", "colour": "green", "code": "\t\t\ti += 1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "216", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "217", "colour": "green", "code": "\t\tliblinear.set_print_string_function(self.print_func)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "218", "colour": "green", "code": "\t\tself.weight_label = (c_int*self.nr_weight)()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "219", "colour": "green", "code": "\t\tself.weight = (c_double*self.nr_weight)()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "220", "colour": "green", "code": "\t\tfor i in range(self.nr_weight): \n", "error": "W", "author": "tom@organisms.be"}, {"index": "221", "colour": "green", "code": "\t\t\tself.weight[i] = weight[i]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "222", "colour": "green", "code": "\t\t\tself.weight_label[i] = weight_label[i]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "223", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "224", "colour": "green", "code": "\t\tif self.eps == float('inf'):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "225", "colour": "red", "code": "\t\t\tif self.solver_type in [L2R_LR, L2R_L2LOSS_SVC]:\n", "error": "E", "author": "tom@organisms.be"}, {"index": "226", "colour": "green", "code": "\t\t\t\tself.eps = 0.01\n", "error": "W", "author": "tom@organisms.be"}, {"index": "227", "colour": "red", "code": "\t\t\telif self.solver_type in [L2R_L2LOSS_SVR]:\n", "error": "E", "author": "tom@organisms.be"}, {"index": "228", "colour": "green", "code": "\t\t\t\tself.eps = 0.001\n", "error": "W", "author": "tom@organisms.be"}, {"index": "229", "colour": "red", "code": "\t\t\telif self.solver_type in [L2R_L2LOSS_SVC_DUAL, L2R_L1LOSS_SVC_DUAL, MCSVM_CS, L2R_LR_DUAL]:\n", "error": "E", "author": "tom@organisms.be"}, {"index": "230", "colour": "green", "code": "\t\t\t\tself.eps = 0.1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "231", "colour": "red", "code": "\t\t\telif self.solver_type in [L1R_L2LOSS_SVC, L1R_LR]:\n", "error": "E", "author": "tom@organisms.be"}, {"index": "232", "colour": "green", "code": "\t\t\t\tself.eps = 0.01\n", "error": "W", "author": "tom@organisms.be"}, {"index": "233", "colour": "red", "code": "\t\t\telif self.solver_type in [L2R_L2LOSS_SVR_DUAL, L2R_L1LOSS_SVR_DUAL]:\n", "error": "E", "author": "tom@organisms.be"}, {"index": "234", "colour": "green", "code": "\t\t\t\tself.eps = 0.1\n", "error": "W", "author": "tom@organisms.be"}, {"index": "235", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "236", "colour": "orange", "code": "class model(Structure):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "237", "colour": "green", "code": "\t_names = [\"param\", \"nr_class\", \"nr_feature\", \"w\", \"label\", \"bias\"]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "238", "colour": "green", "code": "\t_types = [parameter, c_int, c_int, POINTER(c_double), POINTER(c_int), c_double]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "239", "colour": "green", "code": "\t_fields_ = genFields(_names, _types)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "240", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "241", "colour": "green", "code": "\tdef __init__(self):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "242", "colour": "green", "code": "\t\tself.__createfrom__ = 'python'\n", "error": "W", "author": "tom@organisms.be"}, {"index": "243", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "244", "colour": "green", "code": "\tdef __del__(self):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "245", "colour": "orange", "code": "\t\t# free memory created by C to avoid memory leak\n", "error": "none", "author": "tom@organisms.be"}, {"index": "246", "colour": "green", "code": "\t\tif hasattr(self, '__createfrom__') and self.__createfrom__ == 'C':\n", "error": "W", "author": "tom@organisms.be"}, {"index": "247", "colour": "green", "code": "\t\t\tliblinear.free_and_destroy_model(pointer(self))\n", "error": "W", "author": "tom@organisms.be"}, {"index": "248", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "249", "colour": "green", "code": "\tdef get_nr_feature(self):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "250", "colour": "green", "code": "\t\treturn liblinear.get_nr_feature(self)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "251", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "252", "colour": "green", "code": "\tdef get_nr_class(self):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "253", "colour": "green", "code": "\t\treturn liblinear.get_nr_class(self)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "254", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "255", "colour": "green", "code": "\tdef get_labels(self):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "256", "colour": "green", "code": "\t\tnr_class = self.get_nr_class()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "257", "colour": "green", "code": "\t\tlabels = (c_int * nr_class)()\n", "error": "W", "author": "tom@organisms.be"}, {"index": "258", "colour": "green", "code": "\t\tliblinear.get_labels(self, labels)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "259", "colour": "green", "code": "\t\treturn labels[:nr_class]\n", "error": "W", "author": "tom@organisms.be"}, {"index": "260", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "261", "colour": "green", "code": "\tdef is_probability_model(self):\n", "error": "W", "author": "tom@organisms.be"}, {"index": "262", "colour": "green", "code": "\t\treturn (liblinear.check_probability_model(self) == 1)\n", "error": "W", "author": "tom@organisms.be"}, {"index": "263", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "264", "colour": "orange", "code": "def toPyModel(model_ptr):\n", "error": "none", "author": "tom@organisms.be"}, {"index": "265", "colour": "green", "code": "\t\"\"\"\n", "error": "W", "author": "tom@organisms.be"}, {"index": "266", "colour": "orange", "code": "\ttoPyModel(model_ptr) -> model\n", "error": "none", "author": "tom@organisms.be"}, {"index": "267", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "268", "colour": "orange", "code": "\tConvert a ctypes POINTER(model) to a Python model\n", "error": "none", "author": "tom@organisms.be"}, {"index": "269", "colour": "orange", "code": "\t\"\"\"\n", "error": "none", "author": "tom@organisms.be"}, {"index": "270", "colour": "green", "code": "\tif bool(model_ptr) == False:\n", "error": "W", "author": "tom@organisms.be"}, {"index": "271", "colour": "green", "code": "\t\traise ValueError(\"Null pointer\")\n", "error": "W", "author": "tom@organisms.be"}, {"index": "272", "colour": "green", "code": "\tm = model_ptr.contents\n", "error": "W", "author": "tom@organisms.be"}, {"index": "273", "colour": "green", "code": "\tm.__createfrom__ = 'C'\n", "error": "W", "author": "tom@organisms.be"}, {"index": "274", "colour": "green", "code": "\treturn m\n", "error": "W", "author": "tom@organisms.be"}, {"index": "275", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "276", "colour": "orange", "code": "fillprototype(liblinear.train, POINTER(model), [POINTER(problem), POINTER(parameter)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "277", "colour": "orange", "code": "fillprototype(liblinear.cross_validation, None, [POINTER(problem), POINTER(parameter), c_int, POINTER(c_double)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "278", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "279", "colour": "orange", "code": "fillprototype(liblinear.predict_values, c_double, [POINTER(model), POINTER(feature_node), POINTER(c_double)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "280", "colour": "orange", "code": "fillprototype(liblinear.predict, c_double, [POINTER(model), POINTER(feature_node)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "281", "colour": "orange", "code": "fillprototype(liblinear.predict_probability, c_double, [POINTER(model), POINTER(feature_node), POINTER(c_double)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "282", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "283", "colour": "orange", "code": "fillprototype(liblinear.save_model, c_int, [c_char_p, POINTER(model)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "284", "colour": "orange", "code": "fillprototype(liblinear.load_model, POINTER(model), [c_char_p])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "285", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "286", "colour": "orange", "code": "fillprototype(liblinear.get_nr_feature, c_int, [POINTER(model)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "287", "colour": "orange", "code": "fillprototype(liblinear.get_nr_class, c_int, [POINTER(model)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "288", "colour": "orange", "code": "fillprototype(liblinear.get_labels, None, [POINTER(model), POINTER(c_int)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "289", "colour": "orange", "code": "\n", "error": "none", "author": "tom@organisms.be"}, {"index": "290", "colour": "orange", "code": "fillprototype(liblinear.free_model_content, None, [POINTER(model)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "291", "colour": "orange", "code": "fillprototype(liblinear.free_and_destroy_model, None, [POINTER(POINTER(model))])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "292", "colour": "orange", "code": "fillprototype(liblinear.destroy_param, None, [POINTER(parameter)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "293", "colour": "orange", "code": "fillprototype(liblinear.check_parameter, c_char_p, [POINTER(problem), POINTER(parameter)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "294", "colour": "orange", "code": "fillprototype(liblinear.check_probability_model, c_int, [POINTER(model)])\n", "error": "none", "author": "tom@organisms.be"}, {"index": "295", "colour": "orange", "code": "fillprototype(liblinear.set_print_string_function, None, [CFUNCTYPE(None, c_char_p)])\n", "error": "none", "author": "tom@organisms.be"}]]}