{"path": "/home/asumal/git/cs410/pattern/pattern/web/pdf/runlength.py", "lines": [[{"error": "C", "line": "1", "code": "#!/usr/bin/env python2\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "2", "code": "#\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "3", "code": "# RunLength decoder (Adobe version) implementation based on PDF Reference\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "4", "code": "# version 1.4 section 3.3.4.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "5", "code": "#\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "6", "code": "#  * public domain *\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "7", "code": "#\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "8", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "W", "line": "9", "code": "import sys\n", "colour": "purple", "author": "tom@organisms.be"}, {"error": "none", "line": "10", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "11", "code": "def rldecode(data):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "12", "code": "    \"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "13", "code": "    RunLength decoder (Adobe version) implementation based on PDF Reference\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "14", "code": "    version 1.4 section 3.3.4:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "15", "code": "        The RunLengthDecode filter decodes data that has been encoded in a\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "16", "code": "        simple byte-oriented format based on run length. The encoded data\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "17", "code": "        is a sequence of runs, where each run consists of a length byte\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "18", "code": "        followed by 1 to 128 bytes of data. If the length byte is in the\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "19", "code": "        range 0 to 127, the following length + 1 (1 to 128) bytes are\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "20", "code": "        copied literally during decompression. If length is in the range\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "21", "code": "        129 to 255, the following single byte is to be copied 257 - length\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "22", "code": "        (2 to 128) times during decompression. A length value of 128\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "23", "code": "        denotes EOD.\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "24", "code": "    >>> s = \"\\x05123456\\xfa7\\x04abcde\\x80junk\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "25", "code": "    >>> rldecode(s)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "26", "code": "    '1234567777777abcde'\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "27", "code": "    \"\"\"\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "28", "code": "    decoded = []\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "C", "line": "29", "code": "    i=0\n", "colour": "blue", "author": "tom@organisms.be"}, {"error": "none", "line": "30", "code": "    while i < len(data):\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "31", "code": "        #print \"data[%d]=:%d:\" % (i,ord(data[i]))\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "32", "code": "        length = ord(data[i])\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "33", "code": "        if length == 128:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "34", "code": "            break\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "35", "code": "        if length >= 0 and length < 128:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "36", "code": "            run = data[i+1:(i+1)+(length+1)]\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "37", "code": "            #print \"length=%d, run=%s\" % (length+1,run)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "38", "code": "            decoded.append(run)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "39", "code": "            i = (i+1) + (length+1)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "40", "code": "        if length > 128:\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "41", "code": "            run = data[i+1]*(257-length)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "42", "code": "            #print \"length=%d, run=%s\" % (257-length,run)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "43", "code": "            decoded.append(run)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "44", "code": "            i = (i+1) + 1\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "45", "code": "    return ''.join(decoded)\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "46", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "47", "code": "\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "48", "code": "if __name__ == '__main__':\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "49", "code": "    import doctest\n", "colour": "black", "author": "tom@organisms.be"}, {"error": "none", "line": "50", "code": "    doctest.testmod()\n", "colour": "black", "author": "tom@organisms.be"}]]}