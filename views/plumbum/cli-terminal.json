{"path": "/home/asumal/git/cs410/plumbum/plumbum/cli/terminal.py", "lines": [[{"error": "none", "line": "1", "code": "\"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "2", "code": "Terminal-related utilities\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "3", "code": "\"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "4", "code": "import sys\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "5", "code": "import os\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "6", "code": "import platform\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "7", "code": "from struct import Struct\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "8", "code": "from plumbum import local\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "9", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "10", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "11", "code": "def get_terminal_size():\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "12", "code": "    \"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "13", "code": "    Get width and height of console; works on linux, os x, windows and cygwin\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "14", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "15", "code": "    Adapted from https://gist.github.com/jtriley/1108174\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "16", "code": "    Originally from: http://stackoverflow.com/questions/566746/how-to-get-console-window-width-in-python\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "17", "code": "    \"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "18", "code": "    current_os = platform.system()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "19", "code": "    if current_os == 'Windows':\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "20", "code": "        size = _get_terminal_size_windows()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "21", "code": "        if not size:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "22", "code": "            # needed for window's python in cygwin's xterm!\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "23", "code": "            size = _get_terminal_size_tput()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "24", "code": "    elif current_os in ('Linux', 'Darwin', 'FreeBSD') or current_os.startswith('CYGWIN'):\n", "colour": "blue", "author": "oleg@volchkov.net"}, {"error": "none", "line": "25", "code": "        size = _get_terminal_size_linux()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "26", "code": "    \n", "colour": "blue", "author": "github@drewbotwinick.com"}, {"error": "C", "line": "27", "code": "    if size is None: # we'll assume the standard 80x25 if for any reason we don't know the terminal size\n", "colour": "blue", "author": "github@drewbotwinick.com"}, {"error": "none", "line": "28", "code": "        size = (80, 25)\n", "colour": "black", "author": "oleg@volchkov.net"}, {"error": "none", "line": "29", "code": "    return size\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "30", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "31", "code": "def _get_terminal_size_windows():\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "32", "code": "    try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "33", "code": "        from ctypes import windll, create_string_buffer\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "34", "code": "        STDERR_HANDLE = -12\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "35", "code": "        h = windll.kernel32.GetStdHandle(STDERR_HANDLE)\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "36", "code": "        csbi_struct = Struct(\"hhhhHhhhhhh\")\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "37", "code": "        csbi = create_string_buffer(csbi_struct.size)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "38", "code": "        res = windll.kernel32.GetConsoleScreenBufferInfo(h, csbi)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "39", "code": "        if res:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "40", "code": "            _, _, _, _, _, left, top, right, bottom, _, _ = csbi_struct.unpack(csbi.raw)\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "41", "code": "            return right - left + 1, bottom - top + 1\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "42", "code": "        return None\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "W", "line": "43", "code": "    except Exception:\n", "colour": "purple", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "44", "code": "        return None\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "45", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "46", "code": "def _get_terminal_size_tput():\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "47", "code": "    # get terminal width\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "48", "code": "    # src: http://stackoverflow.com/questions/263890/how-do-i-find-the-width-height-of-a-terminal-window\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "49", "code": "    try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "F", "line": "50", "code": "        from plumbum.cmd import tput\n", "colour": "red", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "51", "code": "        cols = int(tput('cols'))\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "52", "code": "        rows = int(tput('lines'))\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "53", "code": "        return (cols, rows)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "W", "line": "54", "code": "    except Exception:\n", "colour": "purple", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "55", "code": "        return None\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "56", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "57", "code": "def _ioctl_GWINSZ(fd):\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "58", "code": "    yx = Struct(\"hh\")\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "59", "code": "    try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "60", "code": "        import fcntl\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "61", "code": "        import termios\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "62", "code": "        return yx.unpack(fcntl.ioctl(fd, termios.TIOCGWINSZ, '1234'))\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "W", "line": "63", "code": "    except Exception:\n", "colour": "purple", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "64", "code": "        return None\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "65", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "66", "code": "def _get_terminal_size_linux():\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "67", "code": "    cr = _ioctl_GWINSZ(0) or _ioctl_GWINSZ(1) or _ioctl_GWINSZ(2)\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "68", "code": "    if not cr:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "69", "code": "        try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "70", "code": "            fd = os.open(os.ctermid(), os.O_RDONLY)\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "71", "code": "            cr = _ioctl_GWINSZ(fd)\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "72", "code": "            os.close(fd)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "W", "line": "73", "code": "        except Exception:\n", "colour": "purple", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "74", "code": "            pass\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "75", "code": "    if not cr:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "76", "code": "        try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "77", "code": "            cr = (int(os.environ['LINES']), int(os.environ['COLUMNS']))\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "W", "line": "78", "code": "        except Exception:\n", "colour": "purple", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "79", "code": "            return None\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "80", "code": "    return cr[1], cr[0]\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "81", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "82", "code": "def readline(message = \"\"):                          \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "83", "code": "    \"\"\"Gets a line of input from the user (stdin)\"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "84", "code": "    sys.stdout.write(message)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "85", "code": "    return sys.stdin.readline()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "86", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "87", "code": "def ask(question, default = None):\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "88", "code": "    \"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "89", "code": "    Presents the user with a yes/no question. \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "90", "code": "    \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "91", "code": "    :param question: The question to ask\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "92", "code": "    :param default: If ``None``, the user must answer. If ``True`` or ``False``, lack of response is \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "93", "code": "                    interpreted as the default option\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "94", "code": "    \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "95", "code": "    :returns: the user's choice\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "96", "code": "    \"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "97", "code": "    question = question.rstrip().rstrip(\"?\").rstrip() + \"?\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "98", "code": "    if default is None:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "99", "code": "        question += \" (y/n) \"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "100", "code": "    elif default:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "101", "code": "        question += \" [Y/n] \"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "102", "code": "    else:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "103", "code": "        question += \" [y/N] \"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "104", "code": "    \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "105", "code": "    while True:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "106", "code": "        try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "107", "code": "            answer = readline(question).strip().lower()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "108", "code": "        except EOFError:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "109", "code": "            answer = None\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "110", "code": "        if answer in (\"y\", \"yes\"):\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "111", "code": "            return True\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "112", "code": "        elif answer in (\"n\", \"no\"):\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "113", "code": "            return False\n", "colour": "black", "author": "AndydeCleyre@gmail.com"}, {"error": "none", "line": "114", "code": "        elif not answer and default is not None:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "115", "code": "            return default\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "116", "code": "        else:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "117", "code": "            sys.stdout.write(\"Invalid response, please try again\\n\")\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "118", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "R", "line": "119", "code": "def choose(question, options, default = None):\n", "colour": "green", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "120", "code": "    \"\"\"Prompts the user with a question and a set of options, from which the user need choose.\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "121", "code": "    \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "122", "code": "    :param question: The question to ask\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "123", "code": "    :param options: A set of options. It can be a list (of strings or two-tuples, mapping text \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "124", "code": "                    to returned-object) or a dict (mapping text to returned-object).``\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "125", "code": "    :param default: If ``None``, the user must answer. Otherwise, lack of response is interpreted\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "126", "code": "                    as this answer\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "127", "code": "    \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "128", "code": "    :returns: The user's choice\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "129", "code": "    \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "130", "code": "    Example::\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "131", "code": "    \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "132", "code": "        ans = choose(\"What is your favorite color?\", [\"blue\", \"yellow\", \"green\"], default = \"yellow\")\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "133", "code": "        # `ans` will be one of \"blue\", \"yellow\" or \"green\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "134", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "135", "code": "        ans = choose(\"What is your favorite color?\", \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "136", "code": "                {\"blue\" : 0x0000ff, \"yellow\" : 0xffff00 , \"green\" : 0x00ff00}, default = 0x00ff00)\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "137", "code": "        # this will display \"blue\", \"yellow\" and \"green\" but return a numerical value\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "138", "code": "    \"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "139", "code": "    if hasattr(options, \"items\"):\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "140", "code": "        options = options.items()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "141", "code": "    sys.stdout.write(question.rstrip() + \"\\n\")\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "142", "code": "    choices = {}\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "143", "code": "    defindex = None\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "144", "code": "    for i, item in enumerate(options):\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "145", "code": "        i = i + 1 # python2.5\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "146", "code": "        if isinstance(item, (tuple, list)) and len(item) == 2:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "147", "code": "            text = item[0]\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "148", "code": "            val = item[1]\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "149", "code": "        else:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "150", "code": "            text = item\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "151", "code": "            val = item\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "152", "code": "        choices[i] = val\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "153", "code": "        if default is not None and default == val:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "154", "code": "            defindex = i\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "155", "code": "        sys.stdout.write(\"(%d) %s\\n\" % (i, text))\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "156", "code": "    if default is not None:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "157", "code": "        if defindex is None:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "158", "code": "            msg = \"Choice [%s]: \" % (default,)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "159", "code": "        else:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "160", "code": "            msg = \"Choice [%d]: \" % (defindex,)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "161", "code": "    else:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "162", "code": "        msg = \"Choice: \"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "163", "code": "    while True:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "164", "code": "        try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "165", "code": "            choice = readline(msg).strip()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "166", "code": "        except EOFError:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "167", "code": "            choice = \"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "168", "code": "        if not choice and default:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "169", "code": "            return default\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "170", "code": "        try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "171", "code": "            choice = int(choice)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "172", "code": "            if choice not in choices:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "173", "code": "                raise ValueError()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "174", "code": "        except ValueError:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "175", "code": "            sys.stdout.write(\"Invalid choice, please try again\\n\")\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "176", "code": "            continue\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "177", "code": "        return choices[choice]\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "178", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "W", "line": "179", "code": "def prompt(question, type = int, default = NotImplemented, validator = lambda val: True):\n", "colour": "purple", "author": "tomer@weka.io"}, {"error": "none", "line": "180", "code": "    question = question.rstrip(\" \\t:\")\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "181", "code": "    if default is not NotImplemented:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "182", "code": "        question += \" [%s]\" % (default,)\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "183", "code": "    question += \": \"\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "184", "code": "    while True:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "185", "code": "        try:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "186", "code": "            ans = readline(question).strip()\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "187", "code": "        except EOFError:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "188", "code": "            ans = \"\"\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "189", "code": "        if not ans:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "190", "code": "            if default is not NotImplemented:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "191", "code": "                #sys.stdout.write(\"\\b%s\\n\" % (default,))\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "192", "code": "                return default\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "193", "code": "            else:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "194", "code": "                continue\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "195", "code": "        try:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "196", "code": "            ans = type(ans)\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "197", "code": "        except (TypeError, ValueError) as ex:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "198", "code": "            sys.stdout.write(\"Invalid value (%s), please try again\\n\" % (ex,))\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "199", "code": "            continue\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "200", "code": "        try:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "201", "code": "            validator(ans)\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "202", "code": "        except ValueError as ex:\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "203", "code": "            sys.stdout.write(\"%s, please try again\\n\" % (ex,))\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "204", "code": "        return ans\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "none", "line": "205", "code": "\n", "colour": "black", "author": "tomer@weka.io"}, {"error": "C", "line": "206", "code": "def hexdump(data_or_stream, bytes_per_line = 16, aggregate = True):\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "207", "code": "    \"\"\"Convert the given bytes (or a stream with a buffering ``read()`` method) to hexdump-formatted lines, \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "208", "code": "    with possible aggregation of identical lines. Returns a generator of formatted lines.\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "209", "code": "    \"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "210", "code": "    if hasattr(data_or_stream, \"read\"):\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "211", "code": "        def read_chunk():\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "212", "code": "            while True:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "213", "code": "                buf = data_or_stream.read(bytes_per_line)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "214", "code": "                if not buf:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "215", "code": "                    break\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "216", "code": "                yield buf\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "217", "code": "    else:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "218", "code": "        def read_chunk():\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "219", "code": "            for i in range(0, len(data_or_stream), bytes_per_line):\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "220", "code": "                yield data_or_stream[i:i + bytes_per_line]\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "221", "code": "    prev = None\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "222", "code": "    skipped = False\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "223", "code": "    for i, chunk in enumerate(read_chunk()):\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "224", "code": "        hexd = \" \".join(\"%02x\" % (ord(ch),) for ch in chunk)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "225", "code": "        text = \"\".join(ch if 32 <= ord(ch) < 127 else \".\" for ch in chunk)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "226", "code": "        if aggregate and prev == chunk:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "227", "code": "            skipped = True\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "228", "code": "            continue\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "229", "code": "        prev = chunk\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "230", "code": "        if skipped:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "231", "code": "            yield \"*\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "232", "code": "        yield \"%06x | %s| %s\" % (i * bytes_per_line, hexd.ljust(bytes_per_line * 3, \" \"), text)\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "233", "code": "        skipped = False\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "234", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "235", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "236", "code": "def pager(rows, pagercmd = None):\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "237", "code": "    \"\"\"Opens a pager (e.g., ``less``) to display the given text. Requires a terminal.\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "238", "code": "    \n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "239", "code": "    :param rows: a ``bytes`` or a list/iterator of \"rows\" (``bytes``)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "240", "code": "    :param pagercmd: the pager program to run. Defaults to ``less -RSin``\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "241", "code": "    \"\"\"\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "242", "code": "    if not pagercmd:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "243", "code": "        pagercmd = local[\"less\"][\"-RSin\"]\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "244", "code": "    if hasattr(rows, \"splitlines\"):\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "245", "code": "        rows = rows.splitlines()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "246", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "C", "line": "247", "code": "    pg = pagercmd.popen(stdout = None, stderr = None)\n", "colour": "blue", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "248", "code": "    try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "249", "code": "        for row in rows:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "250", "code": "            line = \"%s\\n\" % (row,)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "251", "code": "            try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "252", "code": "                pg.stdin.write(line)\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "253", "code": "                pg.stdin.flush()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "254", "code": "            except IOError:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "255", "code": "                break\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "256", "code": "        pg.stdin.close()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "257", "code": "        pg.wait()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "258", "code": "    finally:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "259", "code": "        try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "260", "code": "            rows.close()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "W", "line": "261", "code": "        except Exception:\n", "colour": "purple", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "262", "code": "            pass\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "263", "code": "        if pg and pg.poll() is None:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "264", "code": "            try:\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "265", "code": "                pg.terminate()\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "W", "line": "266", "code": "            except Exception:\n", "colour": "purple", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "267", "code": "                pass\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "268", "code": "            os.system(\"reset\")\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "269", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "270", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "271", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "272", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}, {"error": "none", "line": "273", "code": "\n", "colour": "black", "author": "tomerfiliba@gmail.com"}]]}