{"path": "/home/asumal/git/cs410/plumbum/plumbum/machines/remote.py", "lines": [[{"index": "1", "colour": "orange", "code": "from __future__ import with_statement\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "2", "colour": "orange", "code": "import re\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "3", "colour": "orange", "code": "from contextlib import contextmanager\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "4", "colour": "orange", "code": "from plumbum.commands import CommandNotFound, shquote, ConcreteCommand\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "5", "colour": "orange", "code": "from plumbum.lib import _setdoc, ProcInfo, six\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "6", "colour": "orange", "code": "from plumbum.machines.local import LocalPath\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "7", "colour": "orange", "code": "from tempfile import NamedTemporaryFile\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "8", "colour": "orange", "code": "from plumbum.machines.env import BaseEnv\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "9", "colour": "orange", "code": "from plumbum.path.remote import RemotePath, RemoteWorkdir, StatRes\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "10", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "11", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "12", "colour": "orange", "code": "class RemoteEnv(BaseEnv):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "13", "colour": "orange", "code": "    \"\"\"The remote machine's environment; exposes a dict-like interface\"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "14", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "15", "colour": "orange", "code": "    __slots__ = [\"_orig\", \"remote\"]\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "16", "colour": "orange", "code": "    def __init__(self, remote):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "17", "colour": "orange", "code": "        self.remote = remote\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "18", "colour": "green", "code": "        self._curr = dict(line.split(\"=\", 1) for line in self.remote._session.run(\"env\")[1].splitlines())\n", "error": "W", "author": "tomer.filiba@emc.com"}, {"index": "19", "colour": "orange", "code": "        self._orig = self._curr.copy()\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "20", "colour": "orange", "code": "        BaseEnv.__init__(self, self.remote.path, \":\")\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "21", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "22", "colour": "orange", "code": "    @_setdoc(BaseEnv)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "23", "colour": "orange", "code": "    def __delitem__(self, name):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "24", "colour": "orange", "code": "        BaseEnv.__delitem__(self, name)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "25", "colour": "green", "code": "        self.remote._session.run(\"unset %s\" % (name,))\n", "error": "W", "author": "tomerf@il.ibm.com"}, {"index": "26", "colour": "orange", "code": "    @_setdoc(BaseEnv)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "27", "colour": "orange", "code": "    def __setitem__(self, name, value):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "28", "colour": "orange", "code": "        BaseEnv.__setitem__(self, name, value)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "29", "colour": "green", "code": "        self.remote._session.run(\"export %s=%s\" % (name, shquote(value)))\n", "error": "W", "author": "tomerf@il.ibm.com"}, {"index": "30", "colour": "orange", "code": "    @_setdoc(BaseEnv)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "31", "colour": "orange", "code": "    def pop(self, name, *default):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "32", "colour": "orange", "code": "        BaseEnv.pop(self, name, *default)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "33", "colour": "green", "code": "        self.remote._session.run(\"unset %s\" % (name,))\n", "error": "W", "author": "tomerf@il.ibm.com"}, {"index": "34", "colour": "orange", "code": "    @_setdoc(BaseEnv)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "35", "colour": "orange", "code": "    def update(self, *args, **kwargs):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "36", "colour": "orange", "code": "        BaseEnv.update(self, *args, **kwargs)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "37", "colour": "green", "code": "        self.remote._session.run(\"export \" +\n", "error": "W", "author": "tanzer@swing.co.at"}, {"index": "38", "colour": "orange", "code": "            \" \".join(\"%s=%s\" % (k, shquote(v)) for k, v in self.getdict().items()))\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "39", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "40", "colour": "orange", "code": "    def expand(self, expr):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "41", "colour": "orange", "code": "        \"\"\"Expands any environment variables and home shortcuts found in ``expr``\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "42", "colour": "orange", "code": "        (like ``os.path.expanduser`` combined with ``os.path.expandvars``)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "43", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "44", "colour": "orange", "code": "        :param expr: An expression containing environment variables (as ``$FOO``) or\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "45", "colour": "orange", "code": "                     home shortcuts (as ``~/.bashrc``)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "46", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "47", "colour": "orange", "code": "        :returns: The expanded string\"\"\"\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "48", "colour": "green", "code": "        return self.remote._session.run(\"echo %s\" % (expr,))[1].strip()\n", "error": "W", "author": "chrisprinos@gmail.com"}, {"index": "49", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "50", "colour": "orange", "code": "    def expanduser(self, expr):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "51", "colour": "orange", "code": "        \"\"\"Expand home shortcuts (e.g., ``~/foo/bar`` or ``~john/foo/bar``)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "52", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "53", "colour": "orange", "code": "        :param expr: An expression containing home shortcuts\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "54", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "55", "colour": "orange", "code": "        :returns: The expanded string\"\"\"\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "56", "colour": "orange", "code": "        if not any(part.startswith(\"~\") for part in expr.split(\"/\")):\n", "error": "none", "author": "AndydeCleyre@gmail.com"}, {"index": "57", "colour": "orange", "code": "            return expr\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "58", "colour": "orange", "code": "        # we escape all $ signs to avoid expanding env-vars\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "59", "colour": "green", "code": "        return self.remote._session.run(\"echo %s\" % (expr.replace(\"$\", \"\\\\$\"),))[1].strip()\n", "error": "W", "author": "chrisprinos@gmail.com"}, {"index": "60", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "61", "colour": "orange", "code": "    # def clear(self):\n", "error": "none", "author": "tomer.filiba@emc.com"}, {"index": "62", "colour": "orange", "code": "    #    BaseEnv.clear(self, *args, **kwargs)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "63", "colour": "orange", "code": "    #    self.remote._session.run(\"export %s\" % \" \".join(\"%s=%s\" % (k, v) for k, v in self.getdict()))\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "64", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "65", "colour": "orange", "code": "    def getdelta(self):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "66", "colour": "orange", "code": "        \"\"\"Returns the difference between the this environment and the original environment of\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "67", "colour": "orange", "code": "        the remote machine\"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "68", "colour": "orange", "code": "        self._curr[\"PATH\"] = self.path.join()\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "69", "colour": "orange", "code": "\n", "error": "none", "author": "drennalls@gmail.com"}, {"index": "70", "colour": "orange", "code": "        delta = {}\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "71", "colour": "orange", "code": "        for k, v in self._curr.items():\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "72", "colour": "orange", "code": "            if k not in self._orig:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "73", "colour": "orange", "code": "                delta[k] = str(v)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "74", "colour": "orange", "code": "        for k, v in self._orig.items():\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "75", "colour": "orange", "code": "            if k not in self._curr:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "76", "colour": "orange", "code": "                delta[k] = \"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "77", "colour": "orange", "code": "            else:\n", "error": "none", "author": "drennalls@gmail.com"}, {"index": "78", "colour": "orange", "code": "                if v != self._curr[k]:\n", "error": "none", "author": "drennalls@gmail.com"}, {"index": "79", "colour": "orange", "code": "                    delta[k] = self._curr[k]\n", "error": "none", "author": "drennalls@gmail.com"}, {"index": "80", "colour": "orange", "code": "\n", "error": "none", "author": "drennalls@gmail.com"}, {"index": "81", "colour": "orange", "code": "        return delta\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "82", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "83", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "84", "colour": "orange", "code": "class RemoteCommand(ConcreteCommand):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "85", "colour": "orange", "code": "    __slots__ = [\"remote\", \"executable\"]\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "86", "colour": "orange", "code": "    QUOTE_LEVEL = 1\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "87", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "88", "colour": "orange", "code": "    def __init__(self, remote, executable, encoding = \"auto\"):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "89", "colour": "orange", "code": "        self.remote = remote\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "90", "colour": "orange", "code": "        ConcreteCommand.__init__(self, executable,\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "91", "colour": "orange", "code": "            remote.encoding if encoding == \"auto\" else encoding)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "92", "colour": "orange", "code": "    @property\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "93", "colour": "orange", "code": "    def machine(self):\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "94", "colour": "orange", "code": "        return self.remote\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "95", "colour": "orange", "code": "    def __repr__(self):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "96", "colour": "orange", "code": "        return \"RemoteCommand(%r, %r)\" % (self.remote, self.executable)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "97", "colour": "orange", "code": "    def popen(self, args = (), **kwargs):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "98", "colour": "orange", "code": "        return self.remote.popen(self[args], **kwargs)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "99", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "100", "colour": "orange", "code": "class ClosedRemoteMachine(Exception):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "101", "colour": "orange", "code": "    pass\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "102", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "103", "colour": "blue", "code": "class ClosedRemote(object):\n", "error": "R", "author": "tomerf@il.ibm.com"}, {"index": "104", "colour": "orange", "code": "    __slots__ = [\"_obj\"]\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "105", "colour": "orange", "code": "    def __init__(self, obj):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "106", "colour": "orange", "code": "        self._obj = obj\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "107", "colour": "orange", "code": "    def close(self):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "108", "colour": "orange", "code": "        pass\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "109", "colour": "orange", "code": "    def __getattr__(self, name):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "110", "colour": "orange", "code": "        raise ClosedRemoteMachine(\"%r has been closed\" % (self._obj,))\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "111", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "112", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "113", "colour": "blue", "code": "class BaseRemoteMachine(object):\n", "error": "R", "author": "tomerfiliba@gmail.com"}, {"index": "114", "colour": "orange", "code": "    \"\"\"Represents a *remote machine*; serves as an entry point to everything related to that\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "115", "colour": "orange", "code": "    remote machine, such as working directory and environment manipulation, command creation,\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "116", "colour": "orange", "code": "    etc.\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "117", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "118", "colour": "orange", "code": "    Attributes:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "119", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "120", "colour": "orange", "code": "    * ``cwd`` - the remote working directory\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "121", "colour": "orange", "code": "    * ``env`` - the remote environment\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "122", "colour": "orange", "code": "    * ``encoding`` - the remote machine's default encoding (assumed to be UTF8)\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "123", "colour": "orange", "code": "    * ``connect_timeout`` - the connection timeout\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "124", "colour": "orange", "code": "    \"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "125", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "126", "colour": "orange", "code": "    def __init__(self, encoding = \"utf8\", connect_timeout = 10, new_session = False):\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "127", "colour": "orange", "code": "        self.encoding = encoding\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "128", "colour": "orange", "code": "        self.connect_timeout = connect_timeout\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "129", "colour": "orange", "code": "        self._session = self.session(new_session = new_session)\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "130", "colour": "orange", "code": "        self.uname = self._get_uname()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "131", "colour": "orange", "code": "        self.cwd = RemoteWorkdir(self)\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "132", "colour": "orange", "code": "        self.env = RemoteEnv(self)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "133", "colour": "orange", "code": "        self._python = None\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "134", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "135", "colour": "orange", "code": "    def _get_uname(self):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "136", "colour": "orange", "code": "        rc, out, _ = self._session.run(\"uname\", retcode = None)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "137", "colour": "orange", "code": "        if rc == 0:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "138", "colour": "orange", "code": "            return out.strip()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "139", "colour": "orange", "code": "        else:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "140", "colour": "orange", "code": "            rc, out, _ = self._session.run(\"python -c 'import platform;print(platform.uname()[0])'\", retcode = None)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "141", "colour": "orange", "code": "            if rc == 0:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "142", "colour": "orange", "code": "                return out.strip()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "143", "colour": "orange", "code": "            else:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "144", "colour": "orange", "code": "                # all POSIX systems should have uname. make an educated guess it's Windows\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "145", "colour": "orange", "code": "                return \"Windows\"\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "146", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "147", "colour": "orange", "code": "    def __repr__(self):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "148", "colour": "orange", "code": "        return \"<%s %s>\" % (self.__class__.__name__, self)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "149", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "150", "colour": "orange", "code": "    def __enter__(self):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "151", "colour": "orange", "code": "        return self\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "152", "colour": "orange", "code": "    def __exit__(self, t, v, tb):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "153", "colour": "orange", "code": "        self.close()\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "154", "colour": "orange", "code": "    def close(self):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "155", "colour": "orange", "code": "        \"\"\"closes the connection to the remote machine; all paths and programs will\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "156", "colour": "orange", "code": "        become defunct\"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "157", "colour": "orange", "code": "        self._session.close()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "158", "colour": "orange", "code": "        self._session = ClosedRemote(self)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "159", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "160", "colour": "orange", "code": "    def path(self, *parts):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "161", "colour": "orange", "code": "        \"\"\"A factory for :class:`RemotePaths <plumbum.path.remote.RemotePath>`.\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "162", "colour": "orange", "code": "        Usage: ``p = rem.path(\"/usr\", \"lib\", \"python2.7\")``\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "163", "colour": "orange", "code": "        \"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "164", "colour": "orange", "code": "        parts2 = [str(self.cwd)]\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "165", "colour": "orange", "code": "        for p in parts:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "166", "colour": "orange", "code": "            if isinstance(p, LocalPath):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "167", "colour": "orange", "code": "                raise TypeError(\"Cannot construct RemotePath from %r\" % (p,))\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "168", "colour": "orange", "code": "            p = str(p)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "169", "colour": "orange", "code": "            if \"~\" in p:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "170", "colour": "orange", "code": "                p = self.env.expanduser(p)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "171", "colour": "orange", "code": "            parts2.append(p)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "172", "colour": "green", "code": "        return RemotePath(self, *parts2)\n", "error": "W", "author": "tomerf@il.ibm.com"}, {"index": "173", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "174", "colour": "orange", "code": "    def which(self, progname):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "175", "colour": "orange", "code": "        \"\"\"Looks up a program in the ``PATH``. If the program is not found, raises\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "176", "colour": "orange", "code": "        :class:`CommandNotFound <plumbum.commands.CommandNotFound>`\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "177", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "178", "colour": "orange", "code": "        :param progname: The program's name. Note that if underscores (``_``) are present\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "179", "colour": "orange", "code": "                         in the name, and the exact name is not found, they will be replaced\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "180", "colour": "orange", "code": "                         in turn by hyphens (``-``) then periods (``.``), and the name will \n", "error": "none", "author": "andy@9mmedia.com"}, {"index": "181", "colour": "orange", "code": "                         be looked up again for each alternative\n", "error": "none", "author": "andy@9mmedia.com"}, {"index": "182", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "183", "colour": "orange", "code": "        :returns: A :class:`RemotePath <plumbum.path.local.RemotePath>`\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "184", "colour": "orange", "code": "        \"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "185", "colour": "orange", "code": "        alternatives = [progname]\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "186", "colour": "orange", "code": "        if \"_\" in progname:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "187", "colour": "orange", "code": "            alternatives.append(progname.replace(\"_\", \"-\"))\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "188", "colour": "orange", "code": "            alternatives.append(progname.replace(\"_\", \".\"))\n", "error": "none", "author": "andy@9mmedia.com"}, {"index": "189", "colour": "orange", "code": "        for name in alternatives:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "190", "colour": "orange", "code": "            for p in self.env.path:\n", "error": "none", "author": "drennalls@gmail.com"}, {"index": "191", "colour": "orange", "code": "                fn = p / name\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "192", "colour": "orange", "code": "                if fn.access(\"x\"):\n", "error": "none", "author": "drennalls@gmail.com"}, {"index": "193", "colour": "orange", "code": "                    return fn\n", "error": "none", "author": "drennalls@gmail.com"}, {"index": "194", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "195", "colour": "orange", "code": "        raise CommandNotFound(progname, self.env.path)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "196", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "197", "colour": "orange", "code": "    def __getitem__(self, cmd):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "198", "colour": "orange", "code": "        \"\"\"Returns a `Command` object representing the given program. ``cmd`` can be a string or\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "199", "colour": "orange", "code": "        a :class:`RemotePath <plumbum.path.remote.RemotePath>`; if it is a path, a command\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "200", "colour": "orange", "code": "        representing this path will be returned; otherwise, the program name will be looked up in\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "201", "colour": "orange", "code": "        the system's ``PATH`` (using ``which``). Usage::\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "202", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "203", "colour": "orange", "code": "            r_ls = rem[\"ls\"]\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "204", "colour": "orange", "code": "        \"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "205", "colour": "orange", "code": "        if isinstance(cmd, RemotePath):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "206", "colour": "orange", "code": "            if cmd.remote is self:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "207", "colour": "orange", "code": "                return RemoteCommand(self, cmd)\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "208", "colour": "orange", "code": "            else:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "209", "colour": "orange", "code": "                raise TypeError(\"Given path does not belong to this remote machine: %r\" % (cmd,))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "210", "colour": "orange", "code": "        elif not isinstance(cmd, LocalPath):\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "211", "colour": "orange", "code": "            if \"/\" in cmd or \"\\\\\" in cmd:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "212", "colour": "orange", "code": "                return RemoteCommand(self, self.path(cmd))\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "213", "colour": "orange", "code": "            else:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "214", "colour": "orange", "code": "                return RemoteCommand(self, self.which(cmd))\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "215", "colour": "orange", "code": "        else:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "216", "colour": "orange", "code": "            raise TypeError(\"cmd must not be a LocalPath: %r\" % (cmd,))\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "217", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "218", "colour": "orange", "code": "    def __contains__(self, cmd):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "219", "colour": "orange", "code": "        \"\"\"Tests for the existance of the command, e.g., ``\"ls\" in remote_machine``.\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "220", "colour": "orange", "code": "        ``cmd`` can be anything acceptable by ``__getitem__``.\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "221", "colour": "orange", "code": "        \"\"\"\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "222", "colour": "orange", "code": "        try:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "223", "colour": "orange", "code": "            self[cmd]\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "224", "colour": "orange", "code": "        except CommandNotFound:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "225", "colour": "orange", "code": "            return False\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "226", "colour": "orange", "code": "        else:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "227", "colour": "orange", "code": "            return True\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "228", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "229", "colour": "orange", "code": "    @property\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "230", "colour": "orange", "code": "    def python(self):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "231", "colour": "orange", "code": "        \"\"\"A command that represents the default remote python interpreter\"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "232", "colour": "orange", "code": "        if not self._python:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "233", "colour": "orange", "code": "            self._python = self[\"python\"]\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "234", "colour": "orange", "code": "        return self._python\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "235", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "236", "colour": "orange", "code": "    def session(self, isatty = False, new_session = False):\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "237", "colour": "orange", "code": "        \"\"\"Creates a new :class:`ShellSession <plumbum.session.ShellSession>` object; this invokes the user's\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "238", "colour": "orange", "code": "        shell on the remote machine and executes commands on it over stdin/stdout/stderr\"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "239", "colour": "orange", "code": "        raise NotImplementedError()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "240", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "241", "colour": "orange", "code": "    def download(self, src, dst):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "242", "colour": "orange", "code": "        \"\"\"Downloads a remote file/directory (``src``) to a local destination (``dst``).\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "243", "colour": "orange", "code": "        ``src`` must be a string or a :class:`RemotePath <plumbum.path.remote.RemotePath>`\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "244", "colour": "orange", "code": "        pointing to this remote machine, and ``dst`` must be a string or a\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "245", "colour": "orange", "code": "        :class:`LocalPath <plumbum.machines.local.LocalPath>`\"\"\"\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "246", "colour": "orange", "code": "        raise NotImplementedError()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "247", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "248", "colour": "orange", "code": "    def upload(self, src, dst):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "249", "colour": "orange", "code": "        \"\"\"Uploads a local file/directory (``src``) to a remote destination (``dst``).\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "250", "colour": "orange", "code": "        ``src`` must be a string or a :class:`LocalPath <plumbum.machines.local.LocalPath>`,\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "251", "colour": "orange", "code": "        and ``dst`` must be a string or a :class:`RemotePath <plumbum.path.remote.RemotePath>`\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "252", "colour": "orange", "code": "        pointing to this remote machine\"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "253", "colour": "orange", "code": "        raise NotImplementedError()\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "254", "colour": "orange", "code": "\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "255", "colour": "orange", "code": "    def popen(self, args, **kwargs):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "256", "colour": "orange", "code": "        \"\"\"Spawns the given command on the remote machine, returning a ``Popen``-like object;\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "257", "colour": "orange", "code": "        do not use this method directly, unless you need \"low-level\" control on the remote\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "258", "colour": "orange", "code": "        process\"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "259", "colour": "orange", "code": "        raise NotImplementedError()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "260", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "261", "colour": "orange", "code": "    def list_processes(self):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "262", "colour": "orange", "code": "        \"\"\"\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "263", "colour": "orange", "code": "        Returns information about all running processes (on POSIX systems: using ``ps``)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "264", "colour": "orange", "code": "\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "265", "colour": "orange", "code": "        .. versionadded:: 1.3\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "266", "colour": "orange", "code": "        \"\"\"\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "267", "colour": "orange", "code": "        ps = self[\"ps\"]\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "268", "colour": "orange", "code": "        lines = ps(\"-e\", \"-o\", \"pid,uid,stat,args\").splitlines()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "269", "colour": "orange", "code": "        lines.pop(0) # header\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "270", "colour": "orange", "code": "        for line in lines:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "271", "colour": "orange", "code": "            parts = line.strip().split()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "272", "colour": "orange", "code": "            yield ProcInfo(int(parts[0]), int(parts[1]), parts[2], \" \".join(parts[3:]))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "273", "colour": "orange", "code": "    \n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "274", "colour": "orange", "code": "    def pgrep(self, pattern):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "275", "colour": "orange", "code": "        \"\"\"\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "276", "colour": "orange", "code": "        Process grep: return information about all processes whose command-line args match the given regex pattern\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "277", "colour": "orange", "code": "        \"\"\"\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "278", "colour": "orange", "code": "        pat = re.compile(pattern)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "279", "colour": "orange", "code": "        for procinfo in self.list_processes():\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "280", "colour": "orange", "code": "            if pat.search(procinfo.args):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "281", "colour": "orange", "code": "                yield procinfo \n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "282", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "283", "colour": "orange", "code": "    @contextmanager\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "284", "colour": "orange", "code": "    def tempdir(self):\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "285", "colour": "orange", "code": "        \"\"\"A context manager that creates a remote temporary directory, which is removed when\n", "error": "none", "author": "tanzer@swing.co.at"}, {"index": "286", "colour": "orange", "code": "        the context exits\"\"\"\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "287", "colour": "orange", "code": "        _, out, _ = self._session.run(\"mktemp -d\")\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "288", "colour": "green", "code": "        dir = self.path(out.strip())  # @ReservedAssignment\n", "error": "W", "author": "tomer.filiba@emc.com"}, {"index": "289", "colour": "orange", "code": "        try:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "290", "colour": "orange", "code": "            yield dir\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "291", "colour": "orange", "code": "        finally:\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "292", "colour": "orange", "code": "            dir.delete()\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "293", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}, {"index": "294", "colour": "orange", "code": "    #\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "295", "colour": "orange", "code": "    # Path implementation\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "296", "colour": "orange", "code": "    #\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "297", "colour": "orange", "code": "    def _path_listdir(self, fn):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "298", "colour": "orange", "code": "        files = self._session.run(\"ls -a %s\" % (shquote(fn),))[1].splitlines()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "299", "colour": "orange", "code": "        files.remove(\".\")\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "300", "colour": "orange", "code": "        files.remove(\"..\")\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "301", "colour": "orange", "code": "        return files\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "302", "colour": "orange", "code": "    def _path_glob(self, fn, pattern):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "303", "colour": "orange", "code": "        matches = self._session.run(\"for fn in %s/%s; do echo $fn; done\" % (fn, pattern))[1].splitlines()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "304", "colour": "orange", "code": "        if len(matches) == 1 and not self._path_stat(matches[0]):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "305", "colour": "orange", "code": "            return []  # pattern expansion failed\n", "error": "none", "author": "tomer.filiba@emc.com"}, {"index": "306", "colour": "orange", "code": "        return matches\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "307", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "308", "colour": "orange", "code": "    def _path_getuid(self, fn):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "309", "colour": "orange", "code": "        return self._session.run(\"stat -c '%u,%U' \" + shquote(fn))[1].strip().split(\",\")\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "310", "colour": "orange", "code": "    def _path_getgid(self, fn):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "311", "colour": "orange", "code": "        return self._session.run(\"stat -c '%g,%G' \" + shquote(fn))[1].strip().split(\",\")\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "312", "colour": "orange", "code": "    def _path_stat(self, fn):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "313", "colour": "orange", "code": "        rc, out, _ = self._session.run(\"stat -c '%F,%f,%i,%d,%h,%u,%g,%s,%X,%Y,%Z' \" + shquote(fn),\n", "error": "none", "author": "tomer.filiba@emc.com"}, {"index": "314", "colour": "orange", "code": "            retcode = None)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "315", "colour": "orange", "code": "        if rc != 0:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "316", "colour": "orange", "code": "            return None\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "317", "colour": "orange", "code": "        statres = out.strip().split(\",\")\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "318", "colour": "orange", "code": "        text_mode = statres.pop(0).lower()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "319", "colour": "orange", "code": "        res = StatRes((int(statres[0], 16),) + tuple(int(sr) for sr in statres[1:]))\n", "error": "none", "author": "Tomer.Filiba@emc.com"}, {"index": "320", "colour": "orange", "code": "        res.text_mode = text_mode\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "321", "colour": "orange", "code": "        return res\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "322", "colour": "orange", "code": "\n", "error": "none", "author": "tomer.filiba@emc.com"}, {"index": "323", "colour": "orange", "code": "    def _path_delete(self, fn):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "324", "colour": "orange", "code": "        self._session.run(\"rm -rf %s\" % (shquote(fn),))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "325", "colour": "orange", "code": "    def _path_move(self, src, dst):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "326", "colour": "orange", "code": "        self._session.run(\"mv %s %s\" % (shquote(src), shquote(dst)))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "327", "colour": "orange", "code": "    def _path_copy(self, src, dst):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "328", "colour": "orange", "code": "        self._session.run(\"cp -r %s %s\" % (shquote(src), shquote(dst)))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "329", "colour": "orange", "code": "    def _path_mkdir(self, fn):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "330", "colour": "orange", "code": "        self._session.run(\"mkdir -p %s\" % (shquote(fn),))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "331", "colour": "orange", "code": "    def _path_chmod(self, mode, fn):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "332", "colour": "orange", "code": "        self._session.run(\"chmod %o %s\" % (mode, shquote(fn)))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "333", "colour": "orange", "code": "    def _path_chown(self, fn, owner, group, recursive):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "334", "colour": "orange", "code": "        args = [\"chown\"]\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "335", "colour": "orange", "code": "        if recursive:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "336", "colour": "orange", "code": "            args.append(\"-R\")\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "337", "colour": "orange", "code": "        if owner is not None and group is not None:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "338", "colour": "orange", "code": "            args.append(\"%s:%s\" % (owner, group))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "339", "colour": "orange", "code": "        elif owner is not None:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "340", "colour": "orange", "code": "            args.append(str(owner))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "341", "colour": "orange", "code": "        elif group is not None:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "342", "colour": "orange", "code": "            args.append(\":%s\" % (group,))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "343", "colour": "orange", "code": "        args.append(shquote(fn))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "344", "colour": "orange", "code": "        self._session.run(\" \".join(args))\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "345", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "346", "colour": "orange", "code": "    def _path_read(self, fn):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "347", "colour": "orange", "code": "        data = self[\"cat\"](fn)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "348", "colour": "orange", "code": "        if self.encoding and isinstance(data, six.unicode_type):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "349", "colour": "orange", "code": "            data = data.encode(self.encoding)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "350", "colour": "orange", "code": "        return data\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "351", "colour": "orange", "code": "    def _path_write(self, fn, data):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "352", "colour": "orange", "code": "        if self.encoding and isinstance(data, six.unicode_type):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "353", "colour": "orange", "code": "            data = data.encode(self.encoding)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "354", "colour": "orange", "code": "        with NamedTemporaryFile() as f:\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "355", "colour": "orange", "code": "            f.write(data)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "356", "colour": "orange", "code": "            f.flush()\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "357", "colour": "orange", "code": "            f.seek(0)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "358", "colour": "orange", "code": "            self.upload(f.name, fn)\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "359", "colour": "orange", "code": "\n", "error": "none", "author": "tomer.filiba@emc.com"}, {"index": "360", "colour": "orange", "code": "    def _path_link(self, src, dst, symlink):\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "361", "colour": "red", "code": "        self._session.run(\"ln -s %s %s\" % (\"-s\" if symlink else \"\", shquote(src), shquote(dst)))\n", "error": "E", "author": "tomerfiliba@gmail.com"}, {"index": "362", "colour": "orange", "code": "\n", "error": "none", "author": "tomerfiliba@gmail.com"}, {"index": "363", "colour": "orange", "code": "\n", "error": "none", "author": "tomerf@il.ibm.com"}]]}